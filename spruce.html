<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="*  A tool that merges separate YAML files into one.  Works well with ."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body class="project"><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>spruce</h1><span class="subheading">*  A tool that merges separate YAML files into one.  Works well with .</span><div class="links"><a class="button button-outline" href="https://github.com/geofffranks/spruce"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Spruce</a><a class="button button-outline" href="https://github.com/starkandwayne/genesis"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Genesis</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info statistics"><span class="stat pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>10 May 2020</span><span class="stat stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>233</span><span class="stat issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>26</span></div></div></div><div class="row"><div class="column"><div class="info tags"><a class="tag" href="/selfhosted-awesome-unlist/tags/go.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">90</span>go</a><a class="tag" href="/selfhosted-awesome-unlist/tags/cloud-orchestration.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">13</span>cloud orchestration</a><a class="tag" href="/selfhosted-awesome-unlist/tags/sysadmin.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">371</span>sysadmin</a></div></div></div></div></section><article><div class="container"><div class="row"><div class="column">
<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content" itemprop="text"><pre><code>          *          .---. ,---.  ,---.  .-. .-.  ,--,  ,---.         *
         /.\        ( .-._)| .-.\ | .-.\ | | | |.' .')  | .-'        /.\
        /..'\      (_) \   | |-' )| `-'/ | | | ||  |(_) | `-.       /..'\
        /'.'\      _  \ \  | |--' |   (  | | | |\  \    | .-'       /'.'\
       /.''.'\    ( `-'  ) | |    | |\ \ | `-')| \  `-. |  `--.    /.''.'\
       /.'.'.\     `----'  /(     |_| \)\`---(_)  \____\/( __.'    /.'.'.\
"'""""/'.''.'.\""'"'""""""(__)""""""""(__)"""""""""""""(__)""'""""/'.''.'.\""'"'"
      ^^^[_]^^^                                                   ^^^[_]^^^
</code></pre>
<p><a href="https://ci.spruce.cf/teams/main/pipelines/spruce-release" rel="nofollow"><img src="https://camo.githubusercontent.com/a56d5212e32830d37da41c71474b6bb290a04f33/68747470733a2f2f63692e7370727563652e63662f6170692f76312f7465616d732f6d61696e2f706970656c696e65732f7370727563652d72656c656173652f6a6f62732f746573742f6261646765" alt="Build Status" data-canonical-src="https://ci.spruce.cf/api/v1/teams/main/pipelines/spruce-release/jobs/test/badge" style="max-width:100%;"></a> <a href="https://cloudfoundry.slack.com/messages/spruce/" rel="nofollow"><img src="https://camo.githubusercontent.com/36d5bf24d09218b2f7de4afccc722e10b71c99b8/687474703a2f2f736c61636b2e636c6f7564666f756e6472792e6f72672f62616467652e737667" alt="Slack" data-canonical-src="http://slack.cloudfoundry.org/badge.svg" style="max-width:100%;"></a> ( We'll be in <code>#spruce</code>)</p>
<h2><a id="user-content-introducing-spruce" class="anchor" aria-hidden="true" href="#introducing-spruce"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introducing Spruce</h2>
<p><code>spruce</code> is a general purpose YAML &amp; JSON merging tool.</p>
<p>It is designed to be an intuitive utility for merging YAML/JSON templates together
to generate complicated YAML/JSON config files in a repeatable fashion. It can be used
to stitch together some generic/top level definitions for the config and pull in overrides
for site-specific configurations to <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="nofollow">DRY</a> your configs up as much as possible.</p>
<h2><a id="user-content-how-do-i-get-started" class="anchor" aria-hidden="true" href="#how-do-i-get-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do I get started?</h2>
<p><code>spruce</code> is available via Homebrew, just <code>brew tap starkandwayne/cf; brew install spruce</code></p>
<p>Alternatively,  you can download a <a href="https://github.com/geofffranks/spruce/releases/">prebuilt binaries for 64-bit Linux, or Mac OS X</a></p>
<h2><a id="user-content-how-do-i-compile-from-source" class="anchor" aria-hidden="true" href="#how-do-i-compile-from-source"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do I compile from source?</h2>
<ol>
<li><a href="https://golang.org/doc/install" rel="nofollow">Install Go</a>, e.g. on Ubuntu <code>sudo snap install --classic go</code></li>
<li>Fetch sources via <code>go get github.com/geofffranks/spruce/...</code></li>
<li>Change current directory to the source root <code>cd ~/go/src/github.com/geofffranks/spruce/</code></li>
<li>Compile and execute tests <code>make all</code></li>
</ol>
<h2><a id="user-content-is-there-a-playground-i-can-use-before-installing-spruce" class="anchor" aria-hidden="true" href="#is-there-a-playground-i-can-use-before-installing-spruce"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Is there a playground I can use before installing spruce?</h2>
<p>Yes! <a href="http://play.spruce.cf" rel="nofollow">play.spruce.cf</a> is around for testing out data merging +
transformation in a cleanroom environment. It has a number of spruce
versions available to it, and can be used to reproduce/troubleshoot bugs that
you're seeing in production. Once you've reproduced an issue, or solution to a
problem, you can save it, and share with a colleague, or reference in a GitHub
issue.</p>
<h2><a id="user-content-a-quick-example" class="anchor" aria-hidden="true" href="#a-quick-example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A Quick Example</h2>
<pre><code># Let's build the first yaml file we will merge
$ cat &lt;&lt;EOF first.yml
some_data: this will be overwritten later
a_random_map:
  key1: some data
heres_an_array:
- first element
EOF

# and now build the second yaml file to merge on top of it
$ cat &lt;&lt;EOF second.yml
some_data: 42
a_random_map:
  key2: adding more data
heres_an_array:
- (( prepend ))
- zeroth element
more_data: 84

# what happens when we spruce merge?
$ spruce merge first.yml second.yml
a_random_map:
  key1: some data
  key2: adding more data
heres_an_array:
- zeroth element
- first element
more_data: 84
some_data: 42
</code></pre>
<p>The data in <code>second.yml</code> is overlayed on top of the data in <code>first.yml</code>. Check out the
<a href="https://github.com/geofffranks/spruce/blob/master/doc/merging.md">merge semantics</a> and <a href="https://github.com/geofffranks/spruce/blob/master/doc/array-merging.md">array merging</a> for more info on how that was done. Or,
check out <a href="http://play.spruce.cf/#0a9d88de624c1f499a4b12eb8573089a" rel="nofollow">this example on play.spruce.cf</a></p>
<h2><a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Documentation</h2>
<ul>
<li><a href="https://github.com/geofffranks/spruce/blob/master/doc/operators.md">What are all the spruce operators, and how do they work?</a></li>
<li><a href="https://github.com/geofffranks/spruce/blob/master/doc/merging.md">What are the merge semantics of spruce?</a></li>
<li><a href="https://github.com/geofffranks/spruce/blob/master/doc/array-merging.md">How can I manipulate arrays with spruce?</a></li>
<li><a href="https://github.com/geofffranks/spruce/blob/master/doc/environment-variables-and-defaults.md">Can I specify defaults for an operation, or use environment variables?</a></li>
<li><a href="https://github.com/geofffranks/spruce/blob/master/doc/merging-go-patch-files.md">Can I use spruce with go-patch files?</a></li>
<li><a href="https://github.com/geofffranks/spruce/blob/master/doc/integrating-with-credhub.md">Can I use spruce with CredHub?</a></li>
<li><a href="https://github.com/geofffranks/spruce/blob/master/doc/pulling-creds-from-vault.md">Can I use spruce with Vault?</a></li>
<li><a href="https://github.com/geofffranks/spruce/blob/master/doc/generating-spruce-with-spruce.md">How can I generate spruce templates with spruce itself?</a></li>
<li><a href="https://github.com/geofffranks/spruce/blob/master/doc/integrating-with-cloud-config.md">How can I use spruce with BOSH's Cloud Config?</a></li>
</ul>
<h2><a id="user-content-what-else-can-spruce-do-for-you" class="anchor" aria-hidden="true" href="#what-else-can-spruce-do-for-you"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What else can Spruce do for you?</h2>
<p><code>spruce</code> doesn't just stop at merging datastructures together. It also has the following
helpful subcommands:</p>
<p><code>spruce diff</code> - Allows you to get a useful diff of two YAML files, to see where they differ
semantically. This is more than a simple diff tool, as it examines the functional differences,
rather than just textual (e.g. key-ordering differences would be ignored)</p>
<p><code>spruce json</code> - Allows you to convert a YAML document into JSON, for consumption by something
that requires a JSON input. <code>spruce merge</code> will handle both YAML + JSON documents, but produce
only YAML output.</p>
<p><code>spruce vaultinfo</code> - Takes a list of files that would be merged together, and analyzes what paths
in Vault would be looked up. Useful for determining explicitly what access an automated process
might need to Vault to obtain the right credentials, and nothing more. Also useful if you need
to audit what credentials your configs are retrieving for a system..</p>
<h2><a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>License</h2>
<p>Licensed under <a href="https://github.com/geofffranks/spruce/blob/master/LICENSE">the MIT License</a></p>
</article></div>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 15 May 2020</div><div class="column">Version: 1.3.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>