<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Simple, robust, BitTorrent tracker  implementation."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>bittorrent-tracker</h1></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info"><div class="github"><span class="pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>27 Apr 2020</span><span class="stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>1023</span><span class="issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>23</span></div><div class="tags"><a class="button" href="/selfhosted-awesome-unlist/tags/file-sharing-and-synchronization.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>File Sharing and Synchronization</a><a class="button" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>selfhosted</a></div></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><h1 id="bittorrent-tracker-travis-npm-downloads-javascript-style-guide">bittorrent-tracker <a href="https://travis-ci.org/webtorrent/bittorrent-tracker"><img src="https://img.shields.io/travis/webtorrent/bittorrent-tracker/master.svg" alt="travis"></a> <a href="https://npmjs.org/package/bittorrent-tracker"><img src="https://img.shields.io/npm/v/bittorrent-tracker.svg" alt="npm"></a> <a href="https://npmjs.org/package/bittorrent-tracker"><img src="https://img.shields.io/npm/dm/bittorrent-tracker.svg" alt="downloads"></a> <a href="https://standardjs.com"><img src="https://img.shields.io/badge/code_style-standard-brightgreen.svg" alt="javascript style guide"></a></h1>
<h4 id="simple-robust-bittorrent-tracker-client--server-implementation">Simple, robust, BitTorrent tracker (client &amp; server) implementation</h4>
<p><img src="img/img.png" alt="tracker visualization"></p>
<p>Node.js implementation of a <a href="https://wiki.theory.org/BitTorrentSpecification#Tracker_HTTP.2FHTTPS_Protocol">BitTorrent tracker</a>, client and server.</p>
<p>A <strong>BitTorrent tracker</strong> is a web service which responds to requests from BitTorrent
clients. The requests include metrics from clients that help the tracker keep overall
statistics about the torrent. The response includes a peer list that helps the client
participate in the torrent swarm.</p>
<p>This module is used by <a href="http://webtorrent.io">WebTorrent</a>.</p>
<h2 id="features">features</h2>
<ul>
<li>Includes client &amp; server implementations</li>
<li>Supports all mainstream tracker types:<ul>
<li>HTTP trackers</li>
<li>UDP trackers (<a href="http://www.bittorrent.org/beps/bep_0015.html">BEP 15</a>)</li>
<li>WebTorrent trackers (<a href="http://webtorrent.io">BEP forthcoming</a>)</li>
</ul>
</li>
<li>Supports ipv4 &amp; ipv6</li>
<li>Supports tracker &quot;scrape&quot; extension</li>
<li>Robust and well-tested<ul>
<li>Comprehensive test suite (runs entirely offline, so it&#39;s reliable)</li>
<li>Used by popular clients: <a href="http://webtorrent.io">WebTorrent</a>, <a href="https://www.npmjs.com/package/peerflix">peerflix</a>, and <a href="https://mafintosh.github.io/playback/">playback</a></li>
</ul>
</li>
<li>Tracker statistics available via web interface at <code>/stats</code> or JSON data at <code>/stats.json</code></li>
</ul>
<p>Also see <a href="https://www.npmjs.com/package/bittorrent-dht">bittorrent-dht</a>.</p>
<h3 id="tracker-stats">Tracker stats</h3>
<p><img src="img/trackerStats.png" alt="Screenshot"></p>
<h2 id="install">install</h2>
<pre><code>npm install bittorrent-tracker</code></pre><h2 id="usage">usage</h2>
<h3 id="client">client</h3>
<p>To connect to a tracker, just do this:</p>
<pre><code class="language-js">var Client = require(&#39;bittorrent-tracker&#39;)

var requiredOpts = {
  infoHash: new Buffer(&#39;012345678901234567890&#39;), // hex string or Buffer
  peerId: new Buffer(&#39;01234567890123456789&#39;), // hex string or Buffer
  announce: [], // list of tracker server urls
  port: 6881 // torrent client port, (in browser, optional)
}

var optionalOpts = {
  getAnnounceOpts: function () {
    // Provide a callback that will be called whenever announce() is called
    // internally (on timer), or by the user
    return {
      uploaded: 0,
      downloaded: 0,
      left: 0,
      customParam: &#39;blah&#39; // custom parameters supported
    }
  },
  // RTCPeerConnection config object (only used in browser)
  rtcConfig: {},
  // User-Agent header for http requests
  userAgent: &#39;&#39;,
  // Custom webrtc impl, useful in node to specify [wrtc](https://npmjs.com/package/wrtc)
  wrtc: {},
}

var client = new Client(requiredOpts)

client.on(&#39;error&#39;, function (err) {
  // fatal client error!
  console.log(err.message)
})

client.on(&#39;warning&#39;, function (err) {
  // a tracker was unavailable or sent bad data to the client. you can probably ignore it
  console.log(err.message)
})

// start getting peers from the tracker
client.start()

client.on(&#39;update&#39;, function (data) {
  console.log(&#39;got an announce response from tracker: &#39; + data.announce)
  console.log(&#39;number of seeders in the swarm: &#39; + data.complete)
  console.log(&#39;number of leechers in the swarm: &#39; + data.incomplete)
})

client.once(&#39;peer&#39;, function (addr) {
  console.log(&#39;found a peer: &#39; + addr) // 85.10.239.191:48623
})

// announce that download has completed (and you are now a seeder)
client.complete()

// force a tracker announce. will trigger more &#39;update&#39; events and maybe more &#39;peer&#39; events
client.update()

// provide parameters to the tracker
client.update({
  uploaded: 0,
  downloaded: 0,
  left: 0,
  customParam: &#39;blah&#39; // custom parameters supported
})

// stop getting peers from the tracker, gracefully leave the swarm
client.stop()

// ungracefully leave the swarm (without sending final &#39;stop&#39; message)
client.destroy()

// scrape
client.scrape()

client.on(&#39;scrape&#39;, function (data) {
  console.log(&#39;got a scrape response from tracker: &#39; + data.announce)
  console.log(&#39;number of seeders in the swarm: &#39; + data.complete)
  console.log(&#39;number of leechers in the swarm: &#39; + data.incomplete)
  console.log(&#39;number of total downloads of this torrent: &#39; + data.downloaded)
})</code></pre>
<h3 id="server">server</h3>
<p>To start a BitTorrent tracker server to track swarms of peers:</p>
<pre><code class="language-js">var Server = require(&#39;bittorrent-tracker&#39;).Server

var server = new Server({
  udp: true, // enable udp server? [default=true]
  http: true, // enable http server? [default=true]
  ws: true, // enable websocket server? [default=true]
  stats: true, // enable web-based statistics? [default=true]
  filter: function (infoHash, params, cb) {
    // Blacklist/whitelist function for allowing/disallowing torrents. If this option is
    // omitted, all torrents are allowed. It is possible to interface with a database or
    // external system before deciding to allow/deny, because this function is async.

    // It is possible to block by peer id (whitelisting torrent clients) or by secret
    // key (private trackers). Full access to the original HTTP/UDP request parameters
    // are available in `params`.

    // This example only allows one torrent.

    var allowed = (infoHash === &#39;aaa67059ed6bd08362da625b3ae77f6f4a075aaa&#39;)
    if (allowed) {
      // If the callback is passed `null`, the torrent will be allowed.
      cb(null)
    } else {
      // If the callback is passed an `Error` object, the torrent will be disallowed
      // and the error&#39;s `message` property will be given as the reason.
      cb(new Error(&#39;disallowed torrent&#39;))
    }
  }
})

// Internal http, udp, and websocket servers exposed as public properties.
server.http
server.udp
server.ws

server.on(&#39;error&#39;, function (err) {
  // fatal server error!
  console.log(err.message)
})

server.on(&#39;warning&#39;, function (err) {
  // client sent bad data. probably not a problem, just a buggy client.
  console.log(err.message)
})

server.on(&#39;listening&#39;, function () {
  // fired when all requested servers are listening
  console.log(&#39;listening on http port:&#39; + server.http.address().port)
  console.log(&#39;listening on udp port:&#39; + server.udp.address().port)
})

// start tracker server listening! Use 0 to listen on a random free port.
server.listen(port, hostname, onlistening)

// listen for individual tracker messages from peers:

server.on(&#39;start&#39;, function (addr) {
  console.log(&#39;got start message from &#39; + addr)
})

server.on(&#39;complete&#39;, function (addr) {})
server.on(&#39;update&#39;, function (addr) {})
server.on(&#39;stop&#39;, function (addr) {})

// get info hashes for all torrents in the tracker server
Object.keys(server.torrents)

// get the number of seeders for a particular torrent
server.torrents[infoHash].complete

// get the number of leechers for a particular torrent
server.torrents[infoHash].incomplete

// get the peers who are in a particular torrent swarm
server.torrents[infoHash].peers</code></pre>
<p>The http server will handle requests for the following paths: <code>/announce</code>, <code>/scrape</code>. Requests for other paths will not be handled.</p>
<h2 id="multi-scrape">multi scrape</h2>
<p>Scraping multiple torrent info is possible with a static <code>Client.scrape</code> method:</p>
<pre><code class="language-js">var Client = require(&#39;bittorrent-tracker&#39;)
Client.scrape({ announce: announceUrl, infoHash: [ infoHash1, infoHash2 ]}, function (err, results) {
  results[infoHash1].announce
  results[infoHash1].infoHash
  results[infoHash1].complete
  results[infoHash1].incomplete
  results[infoHash1].downloaded

  // ...
})</code></pre>
<h2 id="command-line">command line</h2>
<p>Install <code>bittorrent-tracker</code> globally:</p>
<pre><code class="language-sh">$ npm install -g bittorrent-tracker</code></pre>
<p>Easily start a tracker server:</p>
<pre><code class="language-sh">$ bittorrent-tracker
http server listening on 8000
udp server listening on 8000
ws server listening on 8000</code></pre>
<p>Lots of options:</p>
<pre><code class="language-sh">$ bittorrent-tracker --help
  bittorrent-tracker - Start a bittorrent tracker server

  Usage:
    bittorrent-tracker [OPTIONS]

  If no --http, --udp, or --ws option is supplied, all tracker types will be started.

  Options:
    -p, --port [number]  change the port [default: 8000]
        --trust-proxy    trust &#39;x-forwarded-for&#39; header from reverse proxy
        --interval       client announce interval (ms) [default: 600000]
        --http           enable http server
        --udp            enable udp server
        --ws             enable websocket server
    -q, --quiet          only show error output
    -s, --silent         show no output
    -v, --version        print the current version</code></pre>
<h2 id="license">license</h2>
<p>MIT. Copyright (c) <a href="https://feross.org">Feross Aboukhadijeh</a> and <a href="https://webtorrent.io">WebTorrent, LLC</a>.</p>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 02 May 2020</div><div class="column">Version: 1.1.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>