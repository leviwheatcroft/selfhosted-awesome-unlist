<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Portable Github clone."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body class="project"><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>gitprep</h1><span class="subheading">Portable Github clone.</span><div class="links"><a class="button button-outline" href="http://gitprep.yukikimoto.com/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>GitPrep</a><a class="button button-outline" href="http://perlcodesample.sakura.ne.jp/gitprep/gitprep.cgi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-box"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>Demo</a><a class="button button-outline" href="https://github.com/yuki-kimoto/gitprep"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>Source Code</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info statistics"><span class="stat pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>16 Nov 2019</span><span class="stat stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>831</span><span class="stat issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>37</span></div></div></div><div class="row"><div class="column"><div class="info tags"><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/tags/perl.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">12</span>perl</a><a class="tag" href="/selfhosted-awesome-unlist/tags/software-development.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">68</span>software development</a><a class="tag" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">943</span>selfhosted</a><a class="tag" href="/selfhosted-awesome-unlist/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">327</span>docker</a></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><h1 id="gitprep---portable-github-system-into-your-own-server">GitPrep - Portable GitHub system into your own server</h1>
<p>GitPrep is <strong>portable Github system</strong>. You can install portable GitHub system into <strong>your own Unix/Linux server</strong>.</span></p>
<img src="gitprep_01.png" width="870" border="1">


<h2 id="gitprep-example">GitPrep example</h2>
<p>At first, Let&#39;s try <strong><a href="https://perlcodesample.sakura.ne.jp/gitprep/gitprep.cgi/kimoto/gitprep">GitPrep example</a></strong>.
You will find GitPrep is real portable GitHub system.</p>
<p>You can use all of repository, pull request, issue, wiki.</p>
<h2 id="features">Features</h2>
<ul>
<li>Github clone: GitPrep has the same interface as GitHub.</li>
<li>Support issue system</li>
<li>Portable: You can install GitPrep on your own Unix/Linux server.</li>
<li>Only needs Perl 5.10.1+.</li>
<li>Smart HTTP support: you can pull and push repository via HTTP.</li>
<li>Built-in web server, and reverse proxy support.</li>
<li>CGI support.</li>
<li>SSL support.</li>
<li>Public key authentication support</li>
</ul>
<p><strong>Installation</strong> is very <strong>easy</strong>. You run only two commands.
Difficult settings is unnecessary.</p>
<p>Even if you have troubles by your mistake, for example &quot;git push -f origin master&quot;,
you can access all of your git repositories <strong>directory</strong> and fix them.</p>
<p>All reporitories are yours. All repositories exists on <strong>your own server</strong>.</p>
<p>Open source. <strong>All free</strong>.</p>
<p>Let&#39;s try GitPrep. If you like GitPrep, please share and talk about GitPrep in your community or your company.</p>
<h2 id="a-install-and-run-gitprep-by-embdded-web-server">A. Install and run GitPrep by embdded web server</h2>
<p>GitPrep has its own web server. You can start GitPrep easily.</p>
<h3 id="create-gitprep-user">Create gitprep user</h3>
<p>Create a <strong>gitprep</strong> user. This is not necessary, but recommended:</p>
<pre><code>useradd gitprep
su - gitprep
cd ~</code></pre><h3 id="check-if-git-is-installed">Check if git is installed</h3>
<pre><code>git --version</code></pre><h2 id="check-perl-version">Check Perl Version</h2>
<p>Check Perl version. You can use GitPrep if the Perl version is 5.10.1+;</p>
<pre><code>perl -v</code></pre><p>If you don&#39;t have Perl 5.10.1+, you need to install a newer perl version with perlbrew.</p>
<pre><code>curl -L http://install.perlbrew.pl | bash
echo &quot;source ~/perl5/perlbrew/etc/bashrc&quot; &gt;&gt; ~/.bash_profile
source ~/.bash_profile

perlbrew install perl-5.16.3
perlbrew switch perl-5.16.3
perl -v</code></pre><p>Download GitPrep .tar.gz archive, expand it and change directory:</p>
<pre><code>curl -kL https://github.com/yuki-kimoto/gitprep/archive/latest.tar.gz &gt; gitprep-latest.tar.gz
tar xf gitprep-latest.tar.gz
mv gitprep-latest gitprep
cd gitprep</code></pre><p>Setup. Needed modules are installed.</p>
<pre><code>./setup_module</code></pre><p>If this fails and extlib directory already exists, try to remove &quot;extlib&quot; and run &quot;./setup_module&quot; again.</p>
<pre><code>rm -rf extlib
./setup_module</code></pre><p>Check if module setup successes. Run the following command.</p>
<pre><code>prove t</code></pre><p>If &quot;syntax OK&quot; is displayed, setup was successful. </p>
<p>Setup database.</p>
<pre><code>./setup_database</code></pre><p>If you used Gitprep version 1 and upgrade it to version 2, you need to upgrade database
with the following command</p>
<pre><code># Backup gitprep directory for safety
cd ..
cp -rp gitprep gitprep.bak

# Upgrade database
cd gitprep
mv data/gitprep.db data/gitprep_v1bak.db
./setup_database
old/copy_database_v1_to_v2 data/gitprep_v1bak.db data/gitprep.db</code></pre><p>If you install git in your local directory,
you have to add the correct git command path to the <strong>gitprep.conf</strong> config file.</p>
<pre><code>[basic]
;;; Git command path
git_bin=/home/yourname/local/bin/git</code></pre><p>And do some settings</p>
<pre><code>git config --global core.quotepath false</code></pre><h3 id="start-gitprep-server">Start gitprep server</h3>
<p>You can start the application by running the provided gitprep script.
The application is run in the background and the port is <strong>10020</strong> by default.</p>
<pre><code>./gitprep</code></pre><p>(If you run this command again, gitprep server restarts.)</p>
<p>Then access the following URL.</p>
<pre><code>http://localhost:10020</code></pre><p>If you want to change the port, edit gitprep.conf.
If you cannot access this port, you might change the firewall settings.</p>
<h3 id="stop-gitprep-server">Stop gitprep server</h3>
<p>You can stop the application by adding the <strong>--stop</strong> option.</p>
<pre><code>./gitprep --stop</code></pre><h2 id="b-run-gitprep-as-cgi-script">B. Run GitPrep as CGI script</h2>
<p>You can run GitPrep as CGI script as the following site.</p>
<p><a href="https://perlcodesample.sakura.ne.jp/gitprep/gitprep.cgi/kimoto/gitprep">GitPrep example site</a></p>
<p>This is shared server. I assume you can connect the server via SSH and login with your own user.</p>
<p>Installation process is same as above except for create user.</p>
<p>If you finish installation, you can access the following URL.</p>
<pre><code>http://yourhost/somepath/gitprep/gitprep.cgi</code></pre><h3 id="if-you-see-internal-server-error">If you see Internal Server Error</h3>
<p>If you see an internal server error, look at the log file (gitprep/log/production.log)
to see what problem has occurred.</p>
<h2 id="faq">FAQ</h2>
<h2 id="i-cant-install-gitprep-on-centos">I can&#39;t install Gitprep on CentOS</h2>
<p>After CentOS 6, some perl core modules are not installed by default.
You can install Perl core modules by the following command.</p>
<pre><code>yum -y install perl-core</code></pre><h2 id="cant-find-git-command-from-gitprep">Can&#39;t find git command from GitPrep</h2>
<p>If you install git into your local directory,
you must add the correct git command path to the config file <strong>gitprep.conf</strong> .</p>
<pre><code>[basic]
;;; Git command path
git_bin=/home/yourname/local/bin/git</code></pre><h3 id="blame-doesnt-work">blame doesn&#39;t work</h3>
<p>In Gitprep, blame page uses &quot;git blame --line-porcelain&quot;. In old git, there is no --line-porcelain option.
We don&#39;t know when --line-porcelain was added to git.
At least, blame page work well in git 1.8.2.1.</p>
<h3 id="how-to-upgrade-gitprep">How to upgrade GitPrep</h3>
<p>It is very easy. you only overwrite all files except for &quot;gitprep.conf&quot;.</p>
<p>If you want to upgrade by &quot;git pull&quot;, you can do it.
you create &quot;gitprep.my.conf&quot; copied from &quot;gitprep.conf&quot;,
and do &quot;git pull&quot;</p>
<p>If you get a rainbow unicorn t-rex error after upgrading, you might be missing
a new CPAN dependency. Run again &quot;setup.sh&quot;.</p>
<h3 id="i-cant-push-large-repository-by-http-protocol">I can&#39;t push large repository by http protocol</h3>
<p>There are some reasons.</p>
<p><strong>1. Git version is old</strong></p>
<p>If you see &quot;error: RPC failed; result=56, HTTP code = 200&quot; , your git maybe old.
Please upgrade to latest git. I checked git version 1.8.5.5.</p>
<p><strong>2. GitPrep restriction</strong></p>
<p>GitPrep restrict max post message size 10MB(This is default of Mojolicious)</p>
<p>You maybe see the following error</p>
<pre><code>Delta compression using up to 4 threads.
Compressing objects: 100% (17830/17830), done.
Writing objects: 100% (18281/18281), 687.05 MiB | 129.92 MiB/s, done.
Total 18281 (delta 295), reused 18281 (delta 295)
error: RPC failed; result=22, HTTP code = 413
fatal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly</code></pre><p>Please increase increase the value of MOJO_MAX_MESSAGE_SIZE</p>
<pre><code># 1GB
export MOJO_MAX_MESSAGE_SIZE=1024000000</code></pre><p><strong>3. git restriction</strong></p>
<p>git restrict post max size via http protocol.
http.postBuffer value of git config is maybe small.</p>
<p>You maybe see the following error message.</p>
<pre><code>error: RPC failed; result=56, HTTP code = 200
fatal: The remote end hung up unexpectedly
Counting objects: 18281, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (17830/17830), done.
Writing objects: 100% (18281/18281), 687.05 MiB | 133.23 MiB/s, done.
Total 18281 (delta 295), reused 18281 (delta 295)
fatal: The remote end hung up unexpectedly
Everything up-to-date</code></pre><p>Please increase the value of http.postBuffer.</p>
<pre><code># 1GB
git config http.postBuffer 1024000000</code></pre><h3 id="how-to-use-reverse-proxy">How to use reverse proxy?</h3>
<p>You can use GitPrep via reverse proxy access</p>
<pre><code>     ----------------------------     ------------
----&gt;| Web Server(Reverse proxy)|----&gt;|GitPrep   |
&lt;----| (Apache, etc)            |&lt;----|          |
     ----------------------------     ------------</code></pre><p>I show apache config example.
You can use Name virtual host.</p>
<pre><code># HTTP
&lt;VirtualHost *:80&gt;

  ServerName myhost.com
  &lt;Proxy *&gt;
    Order deny,allow
    Allow from all
  &lt;/Proxy&gt;

  ProxyRequests Off
  ProxyPreserveHost On
  ProxyPass / http://localhost:10020/ keepalive=On
  ProxyPassReverse / http://localhost:10020/
  RequestHeader set X-Forwarded-Proto &quot;https&quot;

&lt;/VirtualHost&gt;</code></pre><p>If you use GitPrep via https, you should set X-Forwarded-HTTPS Request Header.</p>
<pre><code># HTTPS
&lt;VirtualHost *:443&gt;

  ServerName myhost.com
  &lt;Proxy *&gt;
    Order deny,allow
    Allow from all
  &lt;/Proxy&gt;

  ProxyRequests Off
  ProxyPreserveHost On
  ProxyPass / http://localhost:10020/ keepalive=On
  ProxyPassReverse / http://localhost:10020/
  RequestHeader set X-Forwarded-Proto &quot;https&quot;
&lt;/VirtualHost&gt;</code></pre><h3 id="how-to-use-reverse-proxy-with-sub-directory">How to use reverse proxy with sub directory?</h3>
<p>GitPrep support reverse proxy with sub directory.</p>
<p>At first, set [reverse_proxy]path_depth option.</p>
<pre><code>[reverse_proxy]

;;; Reverse proxy path depth (default: none)
;;; If proxy path is http://somehost.com/foo, you set path_depth to 1.
;;; If proxy path is http://somehost.com/foo/bar, you set path_depth to 2.
path_depth=1</code></pre><p>Next you set http server config file. The following is apache example.</p>
<pre><code>&lt;VirtualHost *:80&gt;
  ServerName perlcodesample.com
  &lt;Proxy *&gt;
    Order deny,allow
    Allow from all
  &lt;/Proxy&gt;
  ProxyRequests Off
  ProxyPreserveHost On

  ProxyPass /app1 http://localhost:10020/app1 keepalive=On
  ProxyPassReverse /app1 http://localhost:3000/app1

  ProxyPass /app2 http://localhost:10021/app2 keepalive=On
  ProxyPassReverse /app2 http://localhost:3001/app2

  RequestHeader set X-Forwarded-Proto &quot;https&quot;
&lt;/VirtualHost&gt;</code></pre><h3 id="how-to-import-already-existing-repositories">How to import already existing repositories?</h3>
<p>You can import already existing repositories by <strong>script/import_rep</strong> script.</p>
<pre><code>cd script
./import_rep -u kimoto rep_dir</code></pre><p><strong>-u</strong> is user name. rep_dir must contains git respoitories like the following.</p>
<pre><code>rep_dir/project1.git
       /project2.git
       /project3.git
       /project3.git</code></pre><p>If <strong>description</strong> file exists in git repository, it is copied.</p>
<h3 id="i-cant-add-more-than-one-collaborator">I can&#39;t add more than one collaborator</h3>
<p>This is a GitPrep bug before version 1.5.1.
Please use after version 1.5.2.</p>
<p>If you continue to use GitPrep before version 1.5.1,
collaboration table is broken.
Please fix it the following way.</p>
<pre><code># Run SQLite client
sqlite3 data/gitprep.db

# drop collaboration table
drop table collaboration;

# Restart
./gitprep</code></pre><h3 id="i-want-to-set-time-zone">I want to set time zone.</h3>
<p>OK. GitPrep supports time zones. You can set time_zone option in conig file.</p>
<pre><code>[basic]
;;; Time Zone
;;; GitPrep time zone is GMT by default
;;; You can set your local time zone.
time_zone=+9:00</code></pre><h3 id="how-to-hide-user-home-directory-in-ssh-repository-url">How to hide user home directory in ssh repository URL?</h3>
<p><strong>1. Use symbolic link and ssh_rep_url_base option</strong></p>
<p>At first, set [basic]ssh_rep_url_base option to /~/git</p>
<pre><code>;;; SSH repository url base
; For exampke, If you set this value to /~/git, SSH repository url become
; ssh://gitprep@59.106.185.196/~/git/kimoto/gitprep.git
; ~ is exapned to user home directory automatically
ssh_rep_url_base=/~/git</code></pre><p>Next, you create symbolic link to /home/gitprep/gitprep/data/rep</p>
<pre><code>cd ~
ln -s ~/gitprep/data/rep ~/git</code></pre><p><strong>2. Use only public key authentication and set [basic]ssh_rep_url_base to empty</strong></p>
<p>If you use only public key authentication, you can access ssh repository
using the following url.</p>
<pre><code>ssh://kimoto@59.106.185.196/kimoto/gitprep.git</code></pre><p>If you set [basic]ssh_rep_url_base to empty string, this URL is shown on Browser.</p>
<pre><code>;;; SSH repository url base
; For exampke, If you set this value to /git, SSH repository url become
; ssh://kimoto@59.106.185.196/git/kimoto/gitprep.git
ssh_rep_url_base=</code></pre><h3 id="how-to-get-atom-feed-of-commits-page">How to get atom feed of commits page</h3>
<p>You can get atom feed of commits page by the following URL</p>
<pre><code>http://somehost.com/kimoto/gitprep/commits/master.atom</code></pre><h3 id="how-to-run-gitprep-from-root-user">How to run GitPrep from root user</h3>
<p>You can manage the application from the root user.</p>
<p>Start the application</p>
<pre><code>sudo -u gitprep /home/gitprep/gitprep/gitprep</code></pre><p>Stop the application</p>
<pre><code>sudo -u gitprep /home/gitprep/gitprep/gitprep --stop</code></pre><p>If you want to start the application when the OS starts,
add the start application command to <strong>rc.local</strong>(Linux).</p>
<p>If you want to make it easy to manage gitprep,
then create a run script.</p>
<pre><code>mkdir -p /webapp
echo &#39;#!/bin/sh&#39; &gt; /webapp/gitprep
echo &#39;su - gitprep -c &quot;/home/gitprep/gitprep/gitprep $*&quot;&#39; &gt;&gt; /webapp/gitprep
chmod 755 /webapp/gitprep</code></pre><p>You can start and stop the application with the following command.</p>
<pre><code># Start or Restart
/webapp/gitprep

# Stop
/webapp/gitprep --stop</code></pre><h3 id="i-want-to-use-gitprep-on-perl-587-system">I want to use GitPrep on Perl 5.8.7 system</h3>
<p>GitPrep 2.0 dropped support for Perl 5.8.7 because latest Mojolicious doesn&#39;t support Perl 5.8.</p>
<p>You can choose between those options:</p>
<p><strong>1. use GitPrep 1.xx</strong></p>
<p>GitPrep 1.xx support Perl 5.8.7+. You can use GitPrep v1.12.</p>
<p><a href="https://github.com/yuki-kimoto/gitprep/archive/v1.12.tar.gz">https://github.com/yuki-kimoto/gitprep/archive/v1.12.tar.gz</a></p>
<p>You can see version 1.12 document.</p>
<p><a href="old/README_v1.md">GitPrep version 1 Document</a></p>
<p><strong>2. You can install your local perl by perlbrew.</strong></p>
<p><a href="http://perlbrew.pl/">http://perlbrew.pl/</a></p>
<p>perlbrew is a very useful perl installation tool without breaking your system perl.</p>
<p>If you install perl 5.10.1+ with perlbrew, you can install latest GitPrep.</p>
<h3 id="i-know-information-about-gitprep-20-upgrading">I know information about GitPrep 2.0 upgrading.</h3>
<p>If you use GitPrep on Perl 5.8 and install newer perl with perlbrew,
you must remove extlib directory before running the &quot;./setup_module&quot; command.</p>
<p>  rm -rf extlib</p>
<p>You should know the following small changes.</p>
<p><strong>1. X-Forwarded-HTTPS header is deprecated. use  X-Forwarded-Proto header.</strong></p>
<pre><code># This is deprecated in GitPrep 2.0
RequestHeader set X-Forwarded-HTTPS &quot;1&quot;

# Use X-Forwarded-Proto instead
RequestHeader set X-Forwarded-Proto &quot;https&quot;</code></pre><p><strong>2. remove [basic]show_ignore_space_change_link option</strong></p>
<p>remove [basic]show_ignore_space_change_link option.
and move this feature to project settings page.</p>
<pre><code># Go to settings page in your project
/kimoto/gitprep/settings</code></pre><p><strong>3. remove [basic]show_ignore_space_change_link option</strong></p>
<p>remove [basic]show_ignore_space_change_link option.
but enable this feature on in project settings page.</p>
<pre><code># Go to settings page in your project
/kimoto/gitprep/settings</code></pre><p><strong>4. remove [basic]encoding_suspects option</strong></p>
<p>remove [basic]encoding_suspects option
and move this feature to project settings page.</p>
<pre><code># Go to settings page in your project
/kimoto/gitprep/settings</code></pre><p>**5. mail is required for user registration.</p>
<p>mail address is require for user registration.</p>
<h3 id="pull-requests-is-removed-when-gitprep-upgrade">Pull requests is removed when GitPrep upgrade</h3>
<p>Sorry, I found critical database specification mistake in GitPrep from v2.0 to v2.2,
and fix it in v2.3.
All your pull requests is removed when upgrading from v2.0-v2.2 to v2.3+.
Please create Pull request again by the following command.</p>
<pre><code>old/fix_v2_pull_request data/gitprep.db</code></pre><h3 id="are-there-other-ways-to-install-gitprep">Are there other ways to install GitPrep?</h3>
<p><strong>Sparrowdo</strong></p>
<p>You can use Sparrowdo to install GitPrep on remote server ( by ssh ) or on running Docker container:</p>
<p>Here is example for Docker minimal Debian image:</p>
<pre><code>$ zef install Sparrowdo

$ docker pull bitnami/minideb-extras 
$ docker run --name instance0 -d bitnami/minideb-extras -expose=10020:10020  bash

$ sparrowdo \
  --bootstrap
  --docker=instance1 \
  --no_sudo --sparrowfile=deploy/sparrowfile.install.pl6 \
  --format=production

$ firefox 127.0.0.1:10020</code></pre><p>And for remote server:</p>
<pre><code>$ sparrowdo \
  --bootstrap
  --host=$ipaddress \
  --no_sudo --sparrowfile=deploy/sparrowfile.install.pl6 \
  --format=production

$ firefox $ipaddress:10020</code></pre><p>Caveat - this installation method is only supported for Linux OS.</p>
<p>Follow <a href="https://github.com/melezhik/sparrowdo">Sparrowdo</a> for the details.</p>
<p><strong>Dockerfile and docker-compose</strong></p>
<p>You can use Docker to build your own container based on Alpine Linux. This image configures SSHD to be run by user root and GitPrep to be run by user gitprep.</p>
<pre><code>docker build ./deploy -t jndeverteuil/gitprep:latest</code></pre><p>With that build, you can start a service with docker-compose:</p>
<pre><code>version: &quot;3&quot;

services:
gitprep:
    image: jndeverteuil/gitprep:latest
    container_name: gitprep
    hostname: gitprep
    restart: always
    ports:
    - &quot;10020:10020&quot;
    - &quot;0.0.0.0:2222:22&quot;
    volumes:
    - gitprep:/home/gitprep
    - sshd:/etc/ssh

volumes:
gitprep:
sshd:</code></pre><h2 id="for-developers">For Developers</h2>
<h3 id="run-gitprep-in-development-mode">Run GitPrep in development mode</h3>
<p>If you are a developer, you can start the application in development mode.</p>
<pre><code>./morbo</code></pre><p>Then access the following URL.</p>
<pre><code>http://localhost:3000</code></pre><p>If you have git, it is easy to install from git.</p>
<pre><code>git clone git://github.com/yuki-kimoto/gitprep.git</code></pre><p>It is useful to write configuration in <strong><em>gitprep.my.conf</em></strong>, not gitprep.conf.</p>
<h2 id="the-way-to-create-installable-mojolicious-application">The way to create installable Mojolicious application</h2>
<p>GitPrep is the best example for developers who want to create installabel Mojolicious application.</p>
<p>Even if shared hosting server, you can install Mojolicious application as CGI.</p>
<p>###1. cpanm and cpanfile, module installation and version control###</p>
<p><a href="http://weblog.bulknews.net/">Tatsuhiko Miyagawa</a>&#39;s cpanm and cpanfile is the tool which install CPAN module easily.</p>
<p><strong>cpanm</strong> is a command. It is <strong>one file</strong>. you can download cpanm easily and put it in your directory.</p>
<p><strong>cpanfile</strong> is <strong>a definition</strong> of module name and version. you create the following file which name is &quot;cpanfile&quot;.</p>
<pre><code>requires &#39;Time::HiRes&#39;, &#39;== 1.9732&#39;;
requires &#39;DBD::SQLite&#39;, &#39;== 1.50&#39;;
requires &#39;DBI&#39;, &#39;== 1.634&#39;;
requires &#39;DBIx::Connector&#39;, &#39;== 0.53&#39;;
requires &#39;Object::Simple&#39;, &#39;== 3.14&#39;;
requires &#39;DBIx::Custom&#39;, &#39;== 0.36&#39;;
requires &#39;Validator::Custom&#39;, &#39;== 1.01&#39;;
requires &#39;Config::Tiny&#39;, &#39;== 2.23&#39;;
requires &#39;Data::Page&#39;, &#39;== 2.02&#39;;
requires &#39;Data::Page::Navigation&#39;, &#39;== 0.06&#39;;
requires &#39;Mojolicious&#39;, &#39;== 6.57&#39;;
requires &#39;Mojolicious::Plugin::BasicAuth&#39;, &#39;== 0.08&#39;;
requires &#39;Mojolicious::Plugin::AutoRoute&#39;, &#39;== 0.19&#39;;
requires &#39;Mojolicious::Plugin::INIConfig&#39;, &#39;== 0.03&#39;;
requires &#39;Mojolicious::Plugin::DBViewer&#39;, &#39;== 0.28&#39;;
requires &#39;Text::Markdown::Hoedown&#39;, &#39;== 1.01&#39;;
requires &#39;Time::Moment&#39;, &#39;== 0.38&#39;;</code></pre><p>If you want to install all defined modules, you only run the following command.</p>
<pre><code>perl -Iextlib/lib/perl5 cpanm -L extlib --installdeps .</code></pre><p>It&#39;s ok. but in some environment Module::CoreList is not installed, and latest ExtUtils::MakeMaker is needed for module installation.</p>
<p>I write the following way in &quot;setup_module&quot;</p>
<pre><code>perl cpanm -n -l extlib Module::CoreList
perl -Iextlib/lib/perl5 cpanm -f -L extlib ExtUtils::MakeMaker
perl -Iextlib/lib/perl5 cpanm -L extlib --installdeps .</code></pre><p>###2. CGI is supported in Mojolicious</p>
<p>It is good luck for us that Mojolicious author <a href="https://twitter.com/kraih">Sebastian Riedel</a> decided to <strong>support CGI</strong> in Mojolicious.</p>
<p>We can create web application which support CGI with a little effort.</p>
<p>All you do is always using <strong>url_for</strong> method or <strong>url_with</strong> method in your templates when you write URL.</p>
<pre><code>&lt;a href=&quot;&lt;%= url_for(&#39;/foo&#39;) %&gt;&quot;&gt;Bar&lt;/a&gt;

&lt;a href=&quot;&lt;%= url_with(&#39;/foo&#39;) %&gt;&quot;&gt;Bar&lt;/a&gt;</code></pre><p>Mojolicious automatically resolve URL for both embded server and CGI.</p>
<p>After that, you only prepare CGI script to call Mojolicious application in <strong>production</strong> mode.</p>
<pre><code>#!/usr/bin/env perl
use FindBin;
use lib &quot;$FindBin::Bin/extlib/lib/perl5&quot;;

$ENV{MOJO_MODE} = &#39;production&#39;;
require &quot;$FindBin::Bin/script/gitprep&quot;;</code></pre><h2 id="web-site">Web Site</h2>
<p><a href="http://gitprep.yukikimoto.com/">GitPrep Web Site</a></p>
<h2 id="internally-using-modules">Internally Using Modules</h2>
<p>GitPrep depends on the following modules, especially Mojolicious is the base of GitPrep.
Thanks to Mojolicious author,<a href="https://twitter.com/kraih">Sebastian riedel</a>.</p>
<ul>
<li><a href="http://search.cpan.org/~sri/Mojolicious/lib/Mojolicious.pm">Mojolicious</a></li>
<li><a href="http://search.cpan.org/dist/Mojolicious-Plugin-INIConfig/lib/Mojolicious/Plugin/INIConfig.pm">Mojolicious::Plugin::INIConfig</a></li>
<li><a href="http://search.cpan.org/dist/Mojolicious-Plugin-AutoRoute/lib/Mojolicious/Plugin/AutoRoute.pm">Mojolicious::Plugin::AutoRoute</a></li>
<li><a href="http://search.cpan.org/dist/Mojolicious-Plugin-BasicAuth/README.pod">Mojolicious::Plugin::BasicAuth</a></li>
<li><a href="http://search.cpan.org/dist/Mojolicious-Plugin-DBViewer/lib/Mojolicious/Plugin/DBViewer.pm">Mojolicious::Plugin::DBViewer</a></li>
<li><a href="http://search.cpan.org/dist/Object-Simple/lib/Object/Simple.pm">Object::Simple</a></li>
<li><a href="http://search.cpan.org/~tokuhirom/Text-Markdown-Hoedown-1.01/lib/Text/Markdown/Hoedown.pm">Text::Markdown::Hoedown</a></li>
<li><a href="http://search.cpan.org/dist/Validator-Custom/lib/Validator/Custom.pm">Validator::Custom</a></li>
<li><a href="http://search.cpan.org/dist/Time-Moment/lib/Time/Moment.pod">Time::Moment</a></li>
<li><a href="http://search.cpan.org/dist/Config-Tiny/lib/Config/Tiny.pm">Config::Tiny</a></li>
<li><a href="http://search.cpan.org/dist/DBD-SQLite/lib/DBD/SQLite.pm">DBD::SQLite</a></li>
<li><a href="http://search.cpan.org/dist/DBI/DBI.pm">DBI</a></li>
<li><a href="http://search.cpan.org/dist/DBIx-Connector/lib/DBIx/Connector.pm">DBIx::Connector</a></li>
<li><a href="http://search.cpan.org/dist/DBIx-Custom/lib/DBIx/Custom.pm">DBIx::Custom</a></li>
</ul>
<h2 id="sister-project">Sister project</h2>
<p>These are my Perl web application projects.</p>
<ul>
<li><a href="https://github.com/yuki-kimoto/webdbviewer">WebDBViewer</a> - Database viewer to see database information on web browser.</li>
</ul>
<h2 id="bug">Bug</h2>
<p>If you find bug, plese tell me on GitHub issue. Small bugs is OK! I&#39;m pleasure if you report anything bugs.</p>
<p>Please post only bug information.</p>
<ul>
<li><a href="https://github.com/yuki-kimoto/gitprep/issues?state=open">Github Issue</a></li>
</ul>
<h2 id="mailing-list-asking-questions-and-feature-requests">Mailing list (Asking questions and feature requests)</h2>
<ul>
<li><a href="https://groups.google.com/forum/#!forum/gitprep">Google GitPrep Group</a></li>
</ul>
<p>You can ask questions about usage of GitPrep in this mailing list.</p>
<p>If you want new features, please post the request to this mailing list.</p>
<h2 id="author">Author</h2>
<p>Yuki Kimoto</p>
<p><a href="http://blogs.perl.org/users/yuki_kimoto/">Yuki Kimoto Perl Blog</a></p>
<p><a href="https://twitter.com/yukikimoto2">Yuki Kimoto Twitter</a></p>
<p>If you are interested in my project and activity, Please follow me on Twitter.</p>
<h2 id="contributers">Contributers</h2>
<p>Thanks for helping my GitPrep project.</p>
<ul>
<li><a href="https://github.com/maspalio">maspalio</a></li>
<li><a href="https://github.com/djzort">djzort</a></li>
<li><a href="https://github.com/SvenDowideit">SvenDowideit</a></li>
<li><a href="https://github.com/melezhik">melezhik</a></li>
<li><a href="https://github.com/spatil47">spatil47</a></li>
<li><a href="https://github.com/reneeb">reneeb</a></li>
<li><a href="https://github.com/tetsuh">tetsuh</a></li>
<li><a href="https://github.com/flixh">flixh</a></li>
<li><a href="https://github.com/kopytov">kopytov</a></li>
<li><a href="https://github.com/kberov">kberov</a></li>
<li><a href="https://github.com/deavmi">deavmi</a></li>
<li><a href="https://github.com/jackivan88">jackivan88</a></li>
<li><a href="https://github.com/mrmuskrat">mrmuskrat</a></li>
<li><a href="https://github.com/knittl">knittl</a></li>
<li><a href="https://github.com/programmerMOT">programmerMOT</a></li>
<li><a href="https://github.com/sn0">sn0</a></li>
<li><a href="https://github.com/socialmedialabs">socialmedialabs</a></li>
<li><a href="https://github.com/troneill">troneill</a></li>
</ul>
<h2 id="copyright--license">Copyright &amp; license</h2>
<p>Copyright 2012-2016 Yuki Kimoto. All rights reserved.</p>
<p>This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 06 May 2020</div><div class="column">Version: 1.1.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>