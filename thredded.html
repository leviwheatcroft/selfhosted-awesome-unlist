<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Forums, feature-rich and simple."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body class="project"><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>thredded</h1><span class="subheading">Forums, feature-rich and simple.</span><div class="links"><a class="button button-outline" href="https://thredded.org"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Thredded</a><a class="button button-outline" href="https://thredded.org/thredded"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-box"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>Demo</a><a class="button button-outline" href="https://github.com/thredded/thredded"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>Source Code</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info statistics"><span class="stat pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>09 May 2020</span><span class="stat stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>1212</span><span class="stat issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>36</span></div></div></div><div class="row"><div class="column"><div class="info tags"><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/tags/ruby.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">53</span>ruby</a><a class="tag" href="/selfhosted-awesome-unlist/tags/forums.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">4</span>forums</a><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg><span class="count">1</span>message-board</span><a class="tag" href="/selfhosted-awesome-unlist/tags/rails.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">15</span>rails</a><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg><span class="count">1</span>rails-engine</span><a class="tag" href="/selfhosted-awesome-unlist/tags/communication-systems.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">159</span>communication systems</a><a class="tag" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">943</span>selfhosted</a><a class="tag" href="/selfhosted-awesome-unlist/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">330</span>docker</a></div></div></div></div></section><article><div class="container"><div class="row"><div class="column">
<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1><a id="user-content-thredded-----" class="anchor" aria-hidden="true" href="#thredded-----"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Thredded <a href="https://codeclimate.com/github/thredded/thredded" rel="nofollow"><img src="https://camo.githubusercontent.com/f6123ed40baa328a472816890e49f686d88d8a1e/68747470733a2f2f636f6465636c696d6174652e636f6d2f6769746875622f74687265646465642f74687265646465642f6261646765732f6770612e737667" alt="Code Climate" data-canonical-src="https://codeclimate.com/github/thredded/thredded/badges/gpa.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/thredded/thredded/" rel="nofollow"><img src="https://camo.githubusercontent.com/f19633fbc832d44942869499ab29a46d8c47bb92/68747470733a2f2f6170692e7472617669732d63692e6f72672f74687265646465642f74687265646465642e7376673f6272616e63683d6d6173746572" alt="Travis-CI" data-canonical-src="https://api.travis-ci.org/thredded/thredded.svg?branch=master" style="max-width:100%;"></a> <a href="https://codeclimate.com/github/thredded/thredded/coverage" rel="nofollow"><img src="https://camo.githubusercontent.com/462b1cd350f5ef90ca7b9e68a361d54b1ae0813e/68747470733a2f2f636f6465636c696d6174652e636f6d2f6769746875622f74687265646465642f74687265646465642f6261646765732f636f7665726167652e737667" alt="Test Coverage" data-canonical-src="https://codeclimate.com/github/thredded/thredded/badges/coverage.svg" style="max-width:100%;"></a> <a href="http://inch-ci.org/github/thredded/thredded" rel="nofollow"><img src="https://camo.githubusercontent.com/ff7cf556f14d44bcbafa88b89bd82ecfa31fd51d/687474703a2f2f696e63682d63692e6f72672f6769746875622f74687265646465642f74687265646465642e7376673f6272616e63683d6d6173746572" alt="Inline docs" data-canonical-src="http://inch-ci.org/github/thredded/thredded.svg?branch=master" style="max-width:100%;"></a> <a href="https://gitter.im/thredded/thredded?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge" rel="nofollow"><img src="https://camo.githubusercontent.com/4ca778157b43f4d4a72fdb140c2e1077bb368020/68747470733a2f2f6261646765732e6769747465722e696d2f74687265646465642f74687265646465642e737667" alt="Gitter" data-canonical-src="https://badges.gitter.im/thredded/thredded.svg" style="max-width:100%;"></a></h1>
<p><em>Thredded</em> is a Rails 4.2+ forum/messageboard engine. Its goal is to be as simple and feature rich as possible.</p>
<p>Some of the features currently in Thredded:</p>
<ul>
<li>Markdown (default) and / or BBCode post formatting, with <a href="https://github.com/discourse/onebox">onebox</a> and <code>&lt;spoiler&gt;</code> / <code>[spoiler]</code> tag support.</li>
<li>(Un)read posts tracking.</li>
<li>Email notifications, topic subscriptions, @-mentions, per-messageboard notification settings.</li>
<li>Private group messaging.</li>
<li>Full-text search using the database.</li>
<li>Pinned and locked topics.</li>
<li>List of currently online users, for all forums and per-messageboard.</li>
<li>Flexible permissions system.</li>
<li>Basic moderation.</li>
<li>Lightweight default theme configurable via Sass.</li>
</ul>
<table>
<thead>
<tr>
<th align="center"><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/216339/20338810/1fbc4240-abd1-11e6-9cba-4ae2e654c4d4.png"><img src="https://cloud.githubusercontent.com/assets/216339/20338810/1fbc4240-abd1-11e6-9cba-4ae2e654c4d4.png" alt="Messageboards (Thredded v0.8.2)" style="max-width:100%;"></a></th>
<th align="center"><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/216339/20338809/1fbb7dc4-abd1-11e6-9bc3-207b94018931.png"><img src="https://cloud.githubusercontent.com/assets/216339/20338809/1fbb7dc4-abd1-11e6-9bc3-207b94018931.png" alt="Topics (Thredded v0.8.2)" style="max-width:100%;"></a></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/216339/20338433/0920debc-abcf-11e6-811c-8f29d10dfed7.png"><img src="https://cloud.githubusercontent.com/assets/216339/20338433/0920debc-abcf-11e6-811c-8f29d10dfed7.png" alt="Topic on iPhone 6 (Thredded v0.8.2)" style="max-width:100%;"></a></td>
<td align="center"><a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/216339/20338432/090e9c5c-abcf-11e6-8e7e-e287d31f6a54.png"><img src="https://cloud.githubusercontent.com/assets/216339/20338432/090e9c5c-abcf-11e6-8e7e-e287d31f6a54.png" alt="Messageboard Preferences on iPhone 6 (Thredded v0.8.2)" style="max-width:100%;"></a></td>
</tr>
</tbody>
</table>
<p>Thredded works with SQLite, MySQL (v5.6.4+), and PostgreSQL. Thredded has no infrastructure
dependencies other than the database and, if configured in the parent application, the ActiveJob
backend dependency such as Redis. Currently only MRI Ruby 2.2+ is supported. We would love to
support JRuby and Rubinius as well.</p>
<p>If you're looking for variations on a theme - see <a href="http://www.discourse.org/" rel="nofollow">Discourse</a>. However, It is a full rails
application and not an engine like Thredded.</p>
<h1><a id="user-content-table-of-contents" class="anchor" aria-hidden="true" href="#table-of-contents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Table of Contents</h1>
<ul>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#creating-a-new-rails-app-with-thredded">Creating a new Rails app with Thredded</a></li>
<li><a href="#adding-thredded-to-an-existing-rails-app">Adding Thredded to an existing Rails app</a></li>
<li><a href="#upgrading-an-existing-install">Upgrading an existing install</a></li>
<li><a href="#migrating-from-forem">Migrating from Forem</a></li>
</ul>
</li>
<li><a href="#views-and-other-assets">Views and other assets</a>
<ul>
<li><a href="#standalone-layout">Standalone layout</a></li>
<li><a href="#application-layout">Application layout</a>
<ul>
<li><a href="#reference-your-paths-so-that-thredded-can-find-them">Reference your paths so that Thredded can find them</a></li>
<li><a href="#add-thredded-styles">Add Thredded styles</a></li>
<li><a href="#add-thredded-javascripts-sprockets">Add Thredded JavaScripts (Sprockets)</a></li>
<li><a href="#add-thredded-javascripts-webpack">Add Thredded JavaScripts (Webpack)</a></li>
</ul>
</li>
<li><a href="#user-profile-page">User profile page</a></li>
<li><a href="#customizing-views">Customizing views</a>
<ul>
<li><a href="#view-hooks">View hooks</a></li>
</ul>
</li>
<li><a href="#theming">Theming</a>
<ul>
<li><a href="#styles">Styles</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#email-and-other-notifications">Email and other notifications</a>
<ul>
<li><a href="#enabling-auto-follow">Enabling auto-follow</a></li>
</ul>
</li>
<li><a href="#i18n">I18n</a></li>
<li><a href="#permissions">Permissions</a>
<ul>
<li><a href="#permission-methods">Permission methods</a>
<ul>
<li><a href="#reading-messageboards">Reading messageboards</a></li>
<li><a href="#posting-to-messageboards">Posting to messageboards</a></li>
<li><a href="#messaging-other-users-posting-to-private-topics">Messaging other users (posting to private topics)</a></li>
<li><a href="#moderating-messageboards">Moderating messageboards</a></li>
<li><a href="#admin-permissions">Admin permissions</a></li>
</ul>
</li>
<li><a href="#default-permissions">Default permissions</a></li>
<li><a href="#handling-permission-denied-and-not-found-errors">Handling "Permission denied" and "Not found" errors</a></li>
</ul>
</li>
<li><a href="#moderation">Moderation</a>
<ul>
<li><a href="#disabling-moderation">Disabling moderation</a></li>
</ul>
</li>
<li><a href="#plugins">Plugins</a></li>
<li><a href="#development">Development</a>
<ul>
<li><a href="#testing">Testing</a></li>
<li><a href="#ruby">Ruby</a></li>
<li><a href="#javascript">JavaScript</a></li>
<li><a href="#testing-with-all-the-databases-and-rails-versions-locally">Testing with all the databases and Rails versions locally.</a></li>
<li><a href="#developing-and-testing-with-docker-compose">Developing and Testing with Docker Compose</a></li>
</ul>
</li>
</ul>
<h2><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<h3><a id="user-content-creating-a-new-rails-app-with-thredded" class="anchor" aria-hidden="true" href="#creating-a-new-rails-app-with-thredded"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a new Rails app with Thredded</h3>
<p>Thredded provides an app generator that will generate a Rails app with Thredded, Devise, SimpleForm, RSpec,
PostgreSQL, and a basic theme and navigation that is configured to work out of the box.</p>
<div class="highlight highlight-source-shell"><pre>gem install thredded_create_app
thredded_create_app path/to/myapp</pre></div>
<p>See <code>thredded_create_app --help</code> and the <a href="https://github.com/thredded/thredded_create_app">thredded_create_app repo</a> to learn about the various options.</p>
<p>Then, see the rest of this Readme for more information about using and customizing Thredded.</p>
<h3><a id="user-content-adding-thredded-to-an-existing-rails-app" class="anchor" aria-hidden="true" href="#adding-thredded-to-an-existing-rails-app"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding Thredded to an existing Rails app</h3>
<p>Add the gem to your Gemfile:</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-en">gem</span> <span class="pl-s">'thredded'</span><span class="pl-kos">,</span> <span class="pl-s">'~&gt; 0.16.16'</span></pre></div>
<p>Add the Thredded <a href="https://github.com/thredded/thredded/blob/master/lib/generators/thredded/install/templates/initializer.rb">initializer</a> to your parent app by running the install generator.</p>
<div class="highlight highlight-text-shell-session"><pre><span class="pl-c1">rails generate thredded:install</span></pre></div>
<p>Thredded needs to know the base application User model name and certain columns on it. Configure
these in the initializer installed with the command above.</p>
<p>Then, copy the migrations over to your parent application and migrate:</p>
<div class="highlight highlight-text-shell-session"><pre><span class="pl-c1">rake thredded:install:migrations db:migrate db:test:prepare</span></pre></div>
<p>Mount the thredded engine in your routes file:</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-en">mount</span> <span class="pl-v">Thredded</span>::<span class="pl-v">Engine</span> <span class="pl-c1">=&gt;</span> <span class="pl-s">'/forum'</span></pre></div>
<p>You also may want to add an index to the user name column in your users table.
Thredded uses it to find @-mentions and perform name prefix autocompletion on the private topic form.
Add the index in a migration like so:</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-v">DbTextSearch</span>::<span class="pl-v">CaseInsensitive</span><span class="pl-kos">.</span><span class="pl-en">add_index</span><span class="pl-kos">(</span>
    <span class="pl-en">connection</span><span class="pl-kos">,</span> <span class="pl-v">Thredded</span><span class="pl-kos">.</span><span class="pl-en">user_class</span><span class="pl-kos">.</span><span class="pl-en">table_name</span><span class="pl-kos">,</span> <span class="pl-v">Thredded</span><span class="pl-kos">.</span><span class="pl-en">user_name_column</span><span class="pl-kos">,</span> <span class="pl-pds">unique</span>: <span class="pl-c1">true</span><span class="pl-kos">)</span></pre></div>
<h3><a id="user-content-upgrading-an-existing-install" class="anchor" aria-hidden="true" href="#upgrading-an-existing-install"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Upgrading an existing install</h3>
<ol>
<li>To upgrade the initializer:</li>
</ol>
<div class="highlight highlight-text-shell-session"><pre><span class="pl-c1">rails g thredded:install</span></pre></div>
<p>But then compare this with the previous version to decide what to keep.</p>
<ol start="2">
<li>To upgrade the database (in this example from v0.11 to v0.12):</li>
</ol>
<div class="highlight highlight-text-shell-session"><pre># <span class="pl-s1">Note that <span class="pl-k">for</span> guaranteed best results you will want to run this with the thredded gem at v0.12</span>
<span class="pl-c1">cp "$(bundle show thredded)"/db/upgrade_migrations/20170420163138_upgrade_thredded_v0_11_to_v0_12.rb db/migrate</span>
<span class="pl-c1">rake db:migrate</span></pre></div>
<h3><a id="user-content-migrating-from-forem" class="anchor" aria-hidden="true" href="#migrating-from-forem"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Migrating from Forem</h3>
<p>Are you currently using <a href="https://github.com/rubysherpas/forem">Forem</a>? Thredded provides <a href="https://github.com/thredded/thredded/wiki/Migrate-from-Forem">a migration</a> to copy all of your existing data from Forem over
to Thredded.</p>
<h2><a id="user-content-views-and-other-assets" class="anchor" aria-hidden="true" href="#views-and-other-assets"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Views and other assets</h2>
<h3><a id="user-content-standalone-layout" class="anchor" aria-hidden="true" href="#standalone-layout"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Standalone layout</h3>
<p>By default, thredded renders in its own (standalone) layout.</p>
<p>When using the standalone thredded layout, the log in / sign out links will be rendered in the navigation.
For these links (and only for these links), Thredded makes the assumption that you are using devise as your auth
library. If you are using something different you need to override the partial at
<code>app/views/thredded/shared/nav/_standalone.html.erb</code> and use the appropriate log in / sign out path URL helpers.</p>
<p>You can override the partial by copying it into your app:</p>
<div class="highlight highlight-source-shell"><pre>mkdir -p app/views/thredded/shared/nav <span class="pl-k">&amp;&amp;</span> cp <span class="pl-s"><span class="pl-pds">"</span><span class="pl-s"><span class="pl-pds">$(</span>bundle show thredded<span class="pl-pds">)</span></span>/<span class="pl-smi">$_</span>/_standalone.html.erb<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$_</span><span class="pl-pds">"</span></span></pre></div>
<h3><a id="user-content-application-layout" class="anchor" aria-hidden="true" href="#application-layout"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Application layout</h3>
<p>You can also use Thredded with your application (or other) layout by by setting <code>Thredded.layout</code> in the initializer.</p>
<p>In this case, you will need to reference your paths/routes carefully and pull in thredded assets (styles and javascript):</p>
<h4><a id="user-content-reference-your-paths-so-that-thredded-can-find-them" class="anchor" aria-hidden="true" href="#reference-your-paths-so-that-thredded-can-find-them"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference your paths so that Thredded can find them</h4>
<p>In your layout you will probably have links to other paths in your app (e.g. navigation links).
For any url helpers (like <code>users_path</code> or <code>projects_path</code> or whatever) will need to have <code>main_app.</code>
prefixed to them so that they can be found from thredded (<code>main_app.users_path</code> will work from both thredded and your app).</p>
<h4><a id="user-content-add-thredded-styles" class="anchor" aria-hidden="true" href="#add-thredded-styles"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add Thredded styles</h4>
<p>In this case, you will also need to include Thredded styles and JavaScript into the application styles and JavaScript.</p>
<p>Add thredded styles to your <code>application.scss</code>:</p>
<div class="highlight highlight-source-css-scss"><pre><span class="pl-k">@import</span> <span class="pl-s"><span class="pl-pds">"</span>thredded<span class="pl-pds">"</span></span>;</pre></div>
<p>Thredded wraps the views in a container element that has a <code>max-width</code> and paddings by default.
If your app layout already has a container element that handles these, you can remove the <code>max-width</code> and paddings
from the Thredded one by adding this Sass snippet after <code>@import "thredded";</code>:</p>
<div class="highlight highlight-source-css-scss"><pre><span class="pl-e">.thredded--main-container</span> {
  <span class="pl-c"><span class="pl-c">//</span> The padding and max-width are handled by the app's container.</span>
  <span class="pl-c1"><span class="pl-c1">max-width</span></span>: <span class="pl-c1">none</span>;
  <span class="pl-c1"><span class="pl-c1">padding</span></span>: <span class="pl-c1">0</span>;
  <span class="pl-k">@include</span> <span class="pl-en">thredded-media-tablet-and-up</span> {
    <span class="pl-c1"><span class="pl-c1">padding</span></span>: <span class="pl-c1">0</span>;
  }
}</pre></div>
<p>See <a href="#styles">below</a> for customizing the styles via Sass variables.</p>
<h4><a id="user-content-add-thredded-javascripts-sprockets" class="anchor" aria-hidden="true" href="#add-thredded-javascripts-sprockets"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add Thredded JavaScripts (Sprockets)</h4>
<p>Include thredded JavaScripts in your <code>application.js</code>:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c">//= require thredded</span></pre></div>
<p>Thredded is fully compatible with deferred and async script loading.</p>
<h4><a id="user-content-add-thredded-javascripts-webpack" class="anchor" aria-hidden="true" href="#add-thredded-javascripts-webpack"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add Thredded JavaScripts (Webpack)</h4>
<p>You can also include Thredded JavaScript into your webpack pack.</p>
<p>First, run <code>bundle exec rails webpacker:install:erb</code>.</p>
<p>Then, add an <code>app/javascript/thredded_imports.js.erb</code> file with the following contents:</p>
<div class="highlight highlight-text-html-erb"><pre><span class="pl-k">&lt;%=</span> Thredded::WebpackAssets.javascripts <span class="pl-k">%&gt;</span><span class="pl-v"></span><span class="pl-v"></span><span class="pl-kos"></span><span class="pl-en"></span></pre></div>
<p>Finally, add the following to your <code>app/javascript/packs/application.js</code>:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'thredded_imports.js'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p>Note that you must use <code>require</code> (not <code>import</code>) because Thredded JavaScript must be run after UJS/Turbolink <code>start()</code>
has been called. This is because Webpack places <code>import</code> calls before the code in the same file (unlike <code>require</code>,
which are placed in the same order as in the source).</p>
<h5><a id="user-content-alternative-javascript-dependencies" class="anchor" aria-hidden="true" href="#alternative-javascript-dependencies"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Alternative JavaScript dependencies</h5>
<details><summary><b>Rails UJS version</b></summary>
<p>By default, thredded loads <code>rails-ujs</code>. If you're using Rails before v5.1, you need to add <code>rails-ujs</code> to
your Gemfile.</p>
<p>If you'd like it to use <code>jquery_ujs</code> instead, run this command from your app directory:</p>
<div class="highlight highlight-source-shell"><pre>mkdir -p app/assets/javascripts/thredded/dependencies/
<span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">'</span>//= require jquery3\n//= require jquery_ujs\n<span class="pl-pds">'</span></span> <span class="pl-k">&gt;</span> app/assets/javascripts/thredded/dependencies/ujs.js</pre></div>
</details>
<details><summary><b>Timeago version</b></summary>
<p>By default, thredded loads <code>timeago.js</code>.</p>
<p>If you'd like to use <code>jquery.timeago</code> or <code>rails-timeago</code> instead, run this command from your app directory:</p>
<div class="highlight highlight-source-shell"><pre>mkdir -p app/assets/javascripts/thredded/dependencies/
<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>//= require jquery.timeago<span class="pl-pds">'</span></span> <span class="pl-k">&gt;</span> app/assets/javascripts/thredded/dependencies/timeago.js</pre></div>
<p>You will also need to adjust the <code>//= require</code> statements for timeago locales if your site is translated into multiple
languages. For <code>jquery.timeago</code>, these need to be require after <code>thredded/dependencies</code> but before <code>thredded/thredded</code>.
E.g. for Brazilian Portuguese with jquery.timeago:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c">//= require thredded/dependencies</span>
<span class="pl-c">//= require locales/jquery.timeago.pt-br</span>
<span class="pl-c">//= require thredded/thredded</span></pre></div>
</details>
<h4><a id="user-content-thredded-page-title-and-id" class="anchor" aria-hidden="true" href="#thredded-page-title-and-id"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Thredded page title and ID</h4>
<p>Thredded views also provide two <code>content_tag</code>s available to yield - <code>:thredded_page_title</code> and <code>:thredded_page_id</code>.
The views within Thredded pass those up through to your layout if you would like to use them.</p>
<h3><a id="user-content-user-profile-page" class="anchor" aria-hidden="true" href="#user-profile-page"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User profile page</h3>
<p>Thredded does not provide a user's profile page, but it provides a partial for rendering the user's recent posts
in your app's user profile page. Here is how you can render it in your app:</p>
<div class="highlight highlight-text-html-erb"><pre><span class="pl-k">&lt;%=</span> Thredded::ApplicationController.render partial: 'thredded/users/posts', locals: {
      posts: Thredded.posts_page_view(scope: user.thredded_posts.order_newest_first.limit(5),
                                      current_user: current_user) } <span class="pl-k">%&gt;</span><span class="pl-v"></span><span class="pl-v"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-pds"></span><span class="pl-s"></span><span class="pl-kos"></span><span class="pl-pds"></span><span class="pl-kos"></span><span class="pl-pds"></span><span class="pl-v"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-pds"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-c1"></span><span class="pl-kos"></span><span class="pl-kos"></span><span class="pl-pds"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-kos"></span></pre></div>
<p>The <code>user</code> above is the user whose posts are rendered, and <code>current_user</code> is the user viewing the posts or <code>nil</code>.
The policy scopes that limit the posts to the ones <code>current_user</code> can see are applied automatically.</p>
<p>The code above uses the <code>ApplicationController.render</code> method introduced in Rails 5. If you're using Rails 4,
you will need to add the <a href="https://github.com/brainopia/backport_new_renderer"><code>backport_new_renderer</code></a> gem to use it.</p>
<h3><a id="user-content-customizing-views" class="anchor" aria-hidden="true" href="#customizing-views"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customizing views</h3>
<p>You can also override any views and assets by placing them in the same path in your application as they are in the gem.
This uses the <a href="http://guides.rubyonrails.org/engines.html#overriding-views" rel="nofollow">standard Rails mechanism</a> for overriding
engine views. For example, to copy the post view for customization:</p>
<div class="highlight highlight-source-shell"><pre><span class="pl-c"><span class="pl-c">#</span> Copy the post view into the application to customize it:</span>
mkdir -p app/views/thredded/posts <span class="pl-k">&amp;&amp;</span> cp <span class="pl-s"><span class="pl-pds">"</span><span class="pl-s"><span class="pl-pds">$(</span>bundle show thredded<span class="pl-pds">)</span></span>/<span class="pl-smi">$_</span>/_post.html.erb<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$_</span><span class="pl-pds">"</span></span></pre></div>
<p><strong>NB:</strong> Overriding the views like this means that on every update of the thredded gem you have to check that your
customizations are still compatible with the new version of thredded. This is difficult and error-prone.
Whenever possible, use the styles and i18n to customize Thredded to your needs.</p>
<h4><a id="user-content-view-hooks" class="anchor" aria-hidden="true" href="#view-hooks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>View hooks</h4>
<p>Thredded provides view hooks to customize the UI before/after/replacing individual components.</p>
<p>View hooks allow you to render anything in the thredded view context.
For example, to render a partial after the post content textarea, add the snippet below to
the <code>config/initializers/thredded.rb</code> initializer:</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-v">Rails</span><span class="pl-kos">.</span><span class="pl-en">application</span><span class="pl-kos">.</span><span class="pl-en">config</span><span class="pl-kos">.</span><span class="pl-en">to_prepare</span> <span class="pl-k">do</span>
  <span class="pl-v">Thredded</span><span class="pl-kos">.</span><span class="pl-en">view_hooks</span><span class="pl-kos">.</span><span class="pl-en">post_form</span><span class="pl-kos">.</span><span class="pl-en">content_text_area</span><span class="pl-kos">.</span><span class="pl-en">config</span><span class="pl-kos">.</span><span class="pl-en">before</span> <span class="pl-k">do</span> |<span class="pl-s1">form</span>:<span class="pl-kos">,</span> **<span class="pl-s1">args</span>|
    <span class="pl-c"># This is render in the Thredded view context, so all Thredded helpers and URLs are accessible here directly.</span>
    <span class="pl-en">render</span> <span class="pl-s">'my/partial'</span><span class="pl-kos">,</span> <span class="pl-pds">form</span>: <span class="pl-s1">form</span>
  <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>
<p>You can use the post content textarea hook to add things like wysiwyg/wymean editors, buttons, help links, help copy,
further customization for the textarea, etc.</p>
<p>To see the complete list of view hooks and their arguments, run:</p>
<div class="highlight highlight-source-shell"><pre>grep view_hooks -R --include <span class="pl-s"><span class="pl-pds">'</span>*.html.erb<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-s"><span class="pl-pds">$(</span>bundle show thredded<span class="pl-pds">)</span></span><span class="pl-pds">"</span></span></pre></div>
<h3><a id="user-content-theming" class="anchor" aria-hidden="true" href="#theming"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Theming</h3>
<p>The engine comes by default with a light and effective implementation of the
views, styles, and javascript. Once you mount the engine you will be presented
with a "themed" version of thredded.</p>
<h4><a id="user-content-styles" class="anchor" aria-hidden="true" href="#styles"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Styles</h4>
<p>Thredded comes with a light Sass theme controlled by a handful of variables that can be found here:
<a href="https://github.com/thredded/thredded/blob/master/app/assets/stylesheets/thredded/base/_variables.scss">https://github.com/thredded/thredded/blob/master/app/assets/stylesheets/thredded/base/_variables.scss</a>.</p>
<p>To override the styles, override the variables <em>before</em> importing Thredded styles, e.g.:</p>
<div class="highlight highlight-source-css-scss"><pre><span class="pl-c"><span class="pl-c">//</span> application.scss</span>
<span class="pl-v">$thredded-brand</span>: <span class="pl-c1">#9c27b0</span>;
<span class="pl-k">@import</span> <span class="pl-s"><span class="pl-pds">"</span>thredded<span class="pl-pds">"</span></span>;</pre></div>
<p>If you are writing a Thredded plugin, import the <a href="https://github.com/thredded/thredded/blob/master/app/assets/stylesheets/thredded/_base.scss"><code>thredded/base</code></a> Sass package instead.
The <code>base</code> package only defines variables, mixins, and %-placeholders, so it can be imported safely without producing
any duplicate CSS.</p>
<h3><a id="user-content-email-and-other-notifications" class="anchor" aria-hidden="true" href="#email-and-other-notifications"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Email and other notifications</h3>
<p>Thredded sends several notification emails to the users. You can override in the same way as the views.
See <a href="https://github.com/thredded/thredded/wiki/Styling-email-content">this page</a> on how to style the emails.</p>
<p>If you use <a href="https://github.com/glebm/rails_email_preview">Rails Email Preview</a>, you can include Thredded emails into the list of previews by adding
<code>Thredded::BaseMailerPreview.preview_classes</code> to the <a href="https://github.com/glebm/rails_email_preview">Rails Email Preview</a> <code>preview_classes</code> config option.</p>
<p>You can also turn off the email notifier totally, or add other notifiers (e.g. Pushover, possibly Slack) by adjusting
the <code>Thredded.notifiers</code> configuration in your initializer. See the default initializer for examples.</p>
<p>You must configure the address the email appears to be from (<code>Thredded.email_from</code>). This address is also used as the "To" address for both email notifcations, as all the recipients are on bcc.</p>
<h3><a id="user-content-enabling-auto-follow" class="anchor" aria-hidden="true" href="#enabling-auto-follow"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enabling auto-follow</h3>
<p>In some cases, you'll want all users to auto-follow new messageboard topics by default. This might be useful
for a team messageboard or a company announcements board, for example. To enable user auto-follow of new topics,
run the following migration(s):</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-en">change_column_default</span> <span class="pl-pds">:thredded_user_preferences</span><span class="pl-kos">,</span> <span class="pl-pds">:auto_follow_topics</span><span class="pl-kos">,</span> <span class="pl-c1">true</span></pre></div>
<h2><a id="user-content-i18n" class="anchor" aria-hidden="true" href="#i18n"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I18n</h2>
<p>Thredded is mostly internationalized. It is currently available in English, Brazilian Portuguese, Chinese (Simplified),
German, Polish, Italian, Russian, French, and Spanish.
We welcome PRs adding support for new languages.</p>
<p>Here are the steps to ensure the best support for your language if it isn't English:</p>
<ol>
<li>
<p>Add <code>rails-i18n</code> and <code>kaminari-i18n</code> to your Gemfile.</p>
</li>
<li>
<p>Require the translations for timeago.js in your JavaScript. E.g. if you want to add German and Brazilian Portuguese:</p>
<p>Sprockets:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c">//= require thredded/dependencies/timeago</span>
<span class="pl-c">//= require timeago/locales/de</span>
<span class="pl-c">//= require timeago/locales/pt_BR</span>
<span class="pl-c">//= require thredded</span></pre></div>
<p>Webpack:</p>
<div class="highlight highlight-text-html-erb"><pre><span class="pl-k">&lt;%</span> timeago_root = File.join(Gem.loaded_specs['timeago_js'].full_gem_path, 'assets', 'javascripts') <span class="pl-k">%&gt;</span>
import "<span class="pl-k">&lt;%=</span> File.join(timeago_root, 'timeago.js') <span class="pl-k">%&gt;</span>";
<span class="pl-k">&lt;%=</span> %w[de pt_BR].map { |locale| %(import "#{File.join(timeago_root, "timeago/locales/#{locale}.js")}";) } * "\n" <span class="pl-k">%&gt;</span>
<span class="pl-k">&lt;%=</span> Thredded::WebpackAssets.javascripts <span class="pl-k">%&gt;</span><span class="pl-s1"></span><span class="pl-c1"></span><span class="pl-v"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-v"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-s"></span><span class="pl-kos"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-s"></span><span class="pl-kos"></span><span class="pl-s"></span><span class="pl-kos"></span><span class="pl-v"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-s1"></span><span class="pl-kos"></span><span class="pl-s"></span><span class="pl-kos"></span><span class="pl-kos"></span><span class="pl-s"></span><span class="pl-s"></span><span class="pl-kos"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-s1"></span><span class="pl-s"><span class="pl-s1"><span class="pl-kos"></span><span class="pl-v"></span><span class="pl-kos"></span><span class="pl-en"></span><span class="pl-kos"></span><span class="pl-s1"></span><span class="pl-kos"></span><span class="pl-s"><span class="pl-s1"><span class="pl-kos"></span><span class="pl-s1"></span><span class="pl-kos"></span></span></span><span class="pl-kos"></span><span class="pl-kos"></span></span></span><span class="pl-kos"></span><span class="pl-s"><span class="pl-cce"></span></span><span class="pl-v"></span><span class="pl-v"></span><span class="pl-kos"></span><span class="pl-en"></span></pre></div>
<p>Note that it is important that timeago and its locales are required <em>before</em> Thredded.</p>
</li>
<li>
<p>To generate URL slugs for messageboards, categories, and topics with support for more language than English,
you can use a gem like <a href="https://github.com/norman/babosa">babosa</a>.
Add babosa to your Gemfile and uncomment the <code>Thredded.slugifier</code> proc for babosa in the initializer.</p>
</li>
</ol>
<h2><a id="user-content-permissions" class="anchor" aria-hidden="true" href="#permissions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Permissions</h2>
<p>Thredded comes with a flexible permissions system that can be configured per messageboard/user.
It calls a handful of methods on the application <code>User</code> model to determine permissions for logged in users, and calls
the same methods on <code>Thredded:NullUser</code> to determine permissions for non-logged in users.</p>
<h3><a id="user-content-permission-methods" class="anchor" aria-hidden="true" href="#permission-methods"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Permission methods</h3>
<p>The methods used by Thredded for determining the permissions are described below.</p>
<ul>
<li>To customize permissions for logged in users, override any of the methods below on your <code>User</code> model.</li>
<li>To customize permissions for non-logged in users, override these methods on <code>Thredded::NullUser</code>.</li>
</ul>
<h4><a id="user-content-reading-messageboards" class="anchor" aria-hidden="true" href="#reading-messageboards"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reading messageboards</h4>
<ol>
<li>A list of messageboards that a given user can read:</li>
</ol>
<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># @return [ActiveRecord::Relation] messageboards that the user can read</span>
<span class="pl-en">thredded_can_read_messageboards</span></pre></div>
<ol start="2">
<li>A list of users that can read a given list of messageboards:</li>
</ol>
<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># @param messageboards [Array&lt;Thredded::Messageboard&gt;]</span>
<span class="pl-c"># @return [ActiveRecord::Relation] users that can read the given messageboards</span>
<span class="pl-smi">self</span><span class="pl-kos">.</span><span class="pl-en">thredded_messageboards_readers</span><span class="pl-kos">(</span><span class="pl-en">messageboards</span><span class="pl-kos">)</span></pre></div>
<h4><a id="user-content-posting-to-messageboards" class="anchor" aria-hidden="true" href="#posting-to-messageboards"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Posting to messageboards</h4>
<p>A list of messageboards that a given user can post in.</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># @return [ActiveRecord::Relation&lt;Thredded::Messageboard&gt;] messageboards that the user can post in</span>
<span class="pl-en">thredded_can_write_messageboards</span></pre></div>
<h4><a id="user-content-messaging-other-users-posting-to-private-topics" class="anchor" aria-hidden="true" href="#messaging-other-users-posting-to-private-topics"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Messaging other users (posting to private topics)</h4>
<p>A list of users a given user can message:</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># @return [ActiveRecord::Relation] the users this user can include in a private topic</span>
<span class="pl-en">thredded_can_message_users</span></pre></div>
<h4><a id="user-content-moderating-messageboards" class="anchor" aria-hidden="true" href="#moderating-messageboards"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Moderating messageboards</h4>
<p>A list of messageboards that a given user can moderate:</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># @return [ActiveRecord::Relation&lt;Thredded::Messageboard&gt;] messageboards that the user can moderate</span>
<span class="pl-en">thredded_can_moderate_messageboards</span></pre></div>
<h4><a id="user-content-admin-permissions" class="anchor" aria-hidden="true" href="#admin-permissions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Admin permissions</h4>
<p>Includes all of the above for all messageboards:</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># @return [boolean] Whether this user has full admin rights on Thredded</span>
<span class="pl-en">thredded_admin?</span></pre></div>
<h3><a id="user-content-default-permissions" class="anchor" aria-hidden="true" href="#default-permissions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Default permissions</h3>
<p>Below is an overview of the default permissions, with links to the implementations:</p>
<table>
<thead>
  <tr>
    <th align="center"></th>
    <th align="center">Read</th>
    <th align="center">Post</th>
    <th align="center">Message</th>
    <th align="center">Moderate</th>
    <th align="center">Administrate</th>
  </tr>
</thead>
<tbody>
<tr>
  <th align="center">Logged in</th>
  <td align="center" rowspan="2"><a href="https://github.com/thredded/thredded/blob/master/app/models/thredded/user_permissions/read/all.rb">
    <g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji> All
  </a></td>
  <td align="center"><a href="https://github.com/thredded/thredded/blob/master/app/models/thredded/user_permissions/write/all.rb">
    <g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji> All
  </a></td>
  <td align="center"><a href="https://github.com/thredded/thredded/blob/master/app/models/thredded/user_permissions/message/readers_of_writeable_boards.rb">
    Readers of the messageboards<br>the user can post in
  </a></td>
  <td align="center"><a href="https://github.com/thredded/thredded/blob/master/app/models/thredded/user_permissions/moderate/if_moderator_column_true.rb">
    <code>moderator_column</code>
  </a></td>
  <td align="center"><a href="https://github.com/thredded/thredded/blob/master/app/models/thredded/user_permissions/admin/if_admin_column_true.rb">
    <code>admin_column</code>
  </a></td>
</tr>
<tr>
  <th align="center">Not logged in</th>
  
  <td align="center"><a href="https://github.com/thredded/thredded/blob/master/app/models/thredded/user_permissions/write/none.rb">
    <g-emoji class="g-emoji" alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">❌</g-emoji> No
  </a></td>
  <td align="center"><a href="https://github.com/thredded/thredded/blob/master/app/models/thredded/user_permissions/message/readers_of_writeable_boards.rb">
    <g-emoji class="g-emoji" alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">❌</g-emoji> No
  </a></td>
  <td align="center"><a href="https://github.com/thredded/thredded/blob/master/app/models/thredded/user_permissions/moderate/none.rb">
    <g-emoji class="g-emoji" alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">❌</g-emoji> No
  </a></td>
  <td align="center"><a href="https://github.com/thredded/thredded/blob/master/app/models/thredded/user_permissions/admin/none.rb">
    <g-emoji class="g-emoji" alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">❌</g-emoji> No
  </a></td>
</tr>
</tbody>
</table>
<h3><a id="user-content-handling-permission-denied-and-not-found-errors" class="anchor" aria-hidden="true" href="#handling-permission-denied-and-not-found-errors"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handling "Permission denied" and "Not found" errors</h3>
<p>Thredded defines a number of Exception classes for not found / permission denied errors.
The complete list can be found <a href="https://github.com/thredded/thredded/blob/master/app/controllers/thredded/application_controller.rb#L18-L40">here</a>.</p>
<p>Currently, the default behaviour is to render an error message with an appropriate response code within the Thredded
layout. You may want to override the handling for <code>Thredded::Errors::LoginRequired</code> to render a login form instead.
For an example of how to do this, see the initializer.</p>
<h2><a id="user-content-moderation" class="anchor" aria-hidden="true" href="#moderation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Moderation</h2>
<p>Thredded comes with two options for the moderation system:</p>
<ol>
<li>Reactive moderation, where posts from first-time users are published immediately but enter the moderation queue
(default).</li>
<li>Pre-emptive moderation, where posts from first-time users are not published until they have been approved.</li>
</ol>
<p>This is controlled by the <code>Thredded.content_visible_while_pending_moderation</code> setting.</p>
<p>Users, topics, and posts can be in one of three moderation states: <code>pending_moderation</code>, <code>approved</code>, and <code>blocked</code>.
By default, new users are <code>pending_moderation</code>, and new posts and topics inherit their default moderation_state from
the user's.</p>
<p>When you approve a new user's post, all of their later posts will be approved automatically.</p>
<p>Additionally, users always see their own posts regardless of the moderation state. For blocked users, this means
they might not realize they have been blocked right away.</p>
<p>Blocked users cannot send private messages.</p>
<h3><a id="user-content-disabling-moderation" class="anchor" aria-hidden="true" href="#disabling-moderation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Disabling moderation</h3>
<p>To disable moderation, e.g. if you run internal forums that do not need moderation, run the following migration:</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-en">change_column_default</span> <span class="pl-pds">:thredded_user_details</span><span class="pl-kos">,</span> <span class="pl-pds">:moderation_state</span><span class="pl-kos">,</span> <span class="pl-c1">1</span> <span class="pl-c"># approved</span></pre></div>
<h3><a id="user-content-requiring-authentication-to-access-thredded" class="anchor" aria-hidden="true" href="#requiring-authentication-to-access-thredded"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requiring authentication to access Thredded</h3>
<p>To require users to be authenticated to access any part of Thredded, add the following to your initializer:</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># config/initializers/thredded.rb</span>
<span class="pl-v">Rails</span><span class="pl-kos">.</span><span class="pl-en">application</span><span class="pl-kos">.</span><span class="pl-en">config</span><span class="pl-kos">.</span><span class="pl-en">to_prepare</span> <span class="pl-k">do</span>
  <span class="pl-v">Thredded</span>::<span class="pl-v">ApplicationController</span><span class="pl-kos">.</span><span class="pl-en">module_eval</span> <span class="pl-k">do</span>
    <span class="pl-c"># Require authentication to access the forums:</span>
    <span class="pl-en">before_action</span> <span class="pl-pds">:thredded_require_login!</span>
    <span class="pl-c"># NB: in rails 4.2 you will need to change this to:</span>
    <span class="pl-c"># before_action { thredded_require_login! }</span>

    <span class="pl-c"># You may also want to render a login form after the</span>
    <span class="pl-c"># "Please sign in first" message:</span>
    <span class="pl-en">rescue_from</span> <span class="pl-v">Thredded</span>::<span class="pl-v">Errors</span>::<span class="pl-v">LoginRequired</span> <span class="pl-k">do</span> |<span class="pl-s1">exception</span>|
      <span class="pl-c"># Place the code for rendering the login form here, for example:</span>
      <span class="pl-en">flash</span><span class="pl-kos">.</span><span class="pl-en">now</span><span class="pl-kos">[</span><span class="pl-pds">:notice</span><span class="pl-kos">]</span> <span class="pl-c1">=</span> <span class="pl-s1">exception</span><span class="pl-kos">.</span><span class="pl-en">message</span>
      <span class="pl-s1">controller</span> <span class="pl-c1">=</span> <span class="pl-v">Users</span>::<span class="pl-v">SessionsController</span><span class="pl-kos">.</span><span class="pl-en">new</span>
      <span class="pl-s1">controller</span><span class="pl-kos">.</span><span class="pl-en">request</span> <span class="pl-c1">=</span> <span class="pl-en">request</span>
      <span class="pl-s1">controller</span><span class="pl-kos">.</span><span class="pl-en">request</span><span class="pl-kos">.</span><span class="pl-en">env</span><span class="pl-kos">[</span><span class="pl-s">'devise.mapping'</span><span class="pl-kos">]</span> <span class="pl-c1">=</span> <span class="pl-v">Devise</span><span class="pl-kos">.</span><span class="pl-en">mappings</span><span class="pl-kos">[</span><span class="pl-pds">:user</span><span class="pl-kos">]</span>
      <span class="pl-s1">controller</span><span class="pl-kos">.</span><span class="pl-en">response</span> <span class="pl-c1">=</span> <span class="pl-en">response</span>
      <span class="pl-s1">controller</span><span class="pl-kos">.</span><span class="pl-en">response_options</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-pds">status</span>: <span class="pl-pds">:forbidden</span> <span class="pl-kos">}</span>
      <span class="pl-s1">controller</span><span class="pl-kos">.</span><span class="pl-en">process</span><span class="pl-kos">(</span><span class="pl-pds">:new</span><span class="pl-kos">)</span>
    <span class="pl-k">end</span>
  <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>
<h2><a id="user-content-plugins" class="anchor" aria-hidden="true" href="#plugins"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugins</h2>
<p>The following official plugins are available for Thredded:</p>
<ul>
<li><a href="https://github.com/thredded/thredded-bbcode">BBCode</a> formatting for posts, e.g. <code>[b]for bold[/b]</code>. Can be used alongside Markdown.</li>
<li><a href="https://github.com/thredded/thredded-markdown_coderay">Code Syntax Highlighting in Markdown</a> using Coderay.</li>
<li><a href="https://github.com/thredded/thredded-markdown_katex">TeX math via KaTeX in Markdown</a>, fast, accessible, JS-free math rendering.</li>
</ul>
<p>Thredded is built for extensibility, and writing plugins for it is easy. If you plan on extending Thredded functionality
in a way others may benefit from, please consider making it a plugin.</p>
<h2><a id="user-content-development" class="anchor" aria-hidden="true" href="#development"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Development</h2>
<p>To be more clear - this is the for when you are working on <em>this</em> gem.
Not for when you are implementing it into your Rails app.</p>
<p>First, to get started, migrate and seed the database (SQLite by default):</p>
<div class="highlight highlight-source-shell"><pre>bundle
<span class="pl-c"><span class="pl-c">#</span> Create, migrate, and seed the development database with fake forum users, topics, and posts:</span>
bin/rails db:create db:migrate db:seed</pre></div>
<p>Install NPM dependencies for the dummy app:</p>
<div class="highlight highlight-source-shell"><pre><span class="pl-c1">cd</span> spec/dummy <span class="pl-k">&amp;&amp;</span> yarn <span class="pl-k">&amp;&amp;</span> <span class="pl-c1">cd</span> -</pre></div>
<p>Then, start the dummy app server:</p>
<div class="highlight highlight-source-shell"><pre>bin/rails s</pre></div>
<p>By default, the dummy app server uses Webpack for JavaScript.
To use Sprockets instead, run:</p>
<div class="highlight highlight-source-shell"><pre>THREDDED_TESTAPP_WEBPACK=1 bin/rails s</pre></div>
<h3><a id="user-content-testing" class="anchor" aria-hidden="true" href="#testing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing</h3>
<p>To run the tests, just run <code>rspec</code>. The test suite will re-create the test database on every run, so there is no need to
run tasks that maintain the test database.</p>
<p>By default, SQLite is used in development and test. On Travis, the tests will run using SQLite, PostgreSQL, MySQL,
and all the supported Rails versions.</p>
<p>The test suite requires Chromium v59+ and its WebDriver installed:</p>
<p>On Ubuntu, run:</p>
<div class="highlight highlight-source-shell"><pre>sudo apt-get install chromium-chromedriver</pre></div>
<p>On Mac, run:</p>
<div class="highlight highlight-source-shell"><pre>brew cask install chromium
brew cask install chromedriver</pre></div>
<p>To get better page saves (<code>page.save_and_open_page</code>) from local capybara specs ensure you are running the server locally
and set <code>export CAPYBARA_ASSET_HOST=http://localhost:3000</code> (or whatever host/port your server is on) before running your
test suite.</p>
<h3><a id="user-content-ruby" class="anchor" aria-hidden="true" href="#ruby"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ruby</h3>
<p>Thredded Ruby code formatting is ensured by <a href="https://github.com/bbatsov/rubocop">Rubocop</a>. Run <code>rubocop -a</code> to ensure a
consistent code style across the codebase.</p>
<p>Thredded is documented with <a href="http://yardoc.org/" rel="nofollow">YARD</a> and you can use the
<a href="https://github.com/rrrene/inch">inch gem</a> or the <a href="http://inch-ci.org/github/thredded/thredded" rel="nofollow">Inch CI</a> to find code
that lacks documentation.</p>
<h3><a id="user-content-javascript" class="anchor" aria-hidden="true" href="#javascript"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JavaScript</h3>
<p>Currently, Thredded JavaScript is written in the subset of ES6 that does not
require Babel polyfills. We're waiting for the ES6/7 support on Rails to improve
before updating this to full Babel.</p>
<p>All Thredded JavaScript is compatible with the following Turbolinks options:</p>
<ul>
<li>No Turbolinks.</li>
<li>Turbolinks 5.</li>
<li>Turbolinks Classic.</li>
<li>Turbolinks Classic + jquery-turbolinks.</li>
</ul>
<p>Thredded JavaScript is also compatible with being loaded from script elements with
<code>[async]</code> and/or <code>[defer]</code> attributes.</p>
<p>To achieve the above, all the Thredded code must register onload via
<code>Thredded.onPageLoad</code>, e.g.:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">window</span><span class="pl-kos">.</span><span class="pl-c1">Thredded</span><span class="pl-kos">.</span><span class="pl-en">onPageLoad</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c">// Initialize widgets</span>
  <span class="pl-en">autosize</span><span class="pl-kos">(</span><span class="pl-s">'textarea'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p>Additionally, all the thredded views must be wrapped in a <code>&lt;%= thredded_page do %&gt;</code> block.</p>
<p>On Turbolinks 5 onPageLoad will run on the same DOM when the page is restored
from history (because Turbolinks 5 caches a <em>clone</em> of the body node, so
the events are lost).</p>
<p>This means that all DOM modifications on <code>window.Thredded.onPageLoad</code> must be
idempotent, or they must be reverted on the <code>turbolinks:before-cache</code> event,
e.g.:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-en">addEventListener</span><span class="pl-kos">(</span><span class="pl-s">'turbolinks:before-cache'</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c">// Destroy widgets</span>
  <span class="pl-s1">autosize</span><span class="pl-kos">.</span><span class="pl-en">destroy</span><span class="pl-kos">(</span><span class="pl-s">'textarea'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3><a id="user-content-testing-with-all-the-databases-and-rails-versions-locally" class="anchor" aria-hidden="true" href="#testing-with-all-the-databases-and-rails-versions-locally"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing with all the databases and Rails versions locally.</h3>
<p>You can also test the gem with all the supported databases and Rails versions locally.</p>
<p>First install PostgreSQL and MySQL, and run:</p>
<div class="highlight highlight-source-shell"><pre>script/create-db-users</pre></div>
<p>Then, to test with all the databases and the default Rails version (as defined in <code>Gemfile</code>), run:</p>
<div class="highlight highlight-source-shell"><pre>rake test_all_dbs</pre></div>
<p>To test with a specific database and all the Rails versions, run:</p>
<div class="highlight highlight-source-shell"><pre><span class="pl-c"><span class="pl-c">#</span> Test with SQLite3:</span>
rake test_all_gemfiles
<span class="pl-c"><span class="pl-c">#</span> Test with MySQL:</span>
DB=mysql2 rake test_all_gemfiles
<span class="pl-c"><span class="pl-c">#</span> Test with PostgreSQL:</span>
DB=postgresql rake test_all_gemfiles</pre></div>
<p>To test all combinations of supported databases and Rails versions, run:</p>
<div class="highlight highlight-source-shell"><pre>rake test_all</pre></div>
<h3><a id="user-content-developing-and-testing-with-docker-compose" class="anchor" aria-hidden="true" href="#developing-and-testing-with-docker-compose"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Developing and Testing with <a href="http://docs.docker.com/compose/" rel="nofollow">Docker Compose</a></h3>
<p>To quickly try out <em>Thredded</em> with the included dummy app, clone the source and
start the included docker-compose.yml file with:</p>
<div class="highlight highlight-text-shell-session"><pre><span class="pl-c1">docker-compose build</span>
<span class="pl-c1">docker-compose up</span></pre></div>
<p>The above will build and run everything, daemonized, resulting in a running
instance on port 9292. Running <code>docker-compose logs</code> will let you know when
everything is up and running. Editing the source on your host machine will
be reflected in the running docker'ized application.</p>
<p>Note that when using <a href="https://github.com/boot2docker/boot2docker">boot2docker</a>
on a Mac make sure you visit the boot2docker host ip at
<code>http://$(boot2docker ip):9292</code>.</p>
<p>After booting up the containers you can run the test suite with the following:</p>
<div class="highlight highlight-text-shell-session"><pre><span class="pl-c1">docker-compose run web bundle exec rake</span></pre></div>
<p>The docker container uses PostgreSQL.</p>
</article></div>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 24 May 2020</div><div class="column">Version: 1.3.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>