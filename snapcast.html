<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Synchronous multiroom audio server."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body class="project"><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>snapcast</h1><span class="subheading">Synchronous multiroom audio server.</span><div class="links"><a class="button button-outline" href="https://github.com/badaix/snapcast"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Snapcast</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info statistics"><span class="stat pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>04 May 2020</span><span class="stat stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>2890</span><span class="stat issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>48</span></div></div></div><div class="row"><div class="column"><div class="info tags"><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/tags/c.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">23</span>c++</a><a class="tag" href="/selfhosted-awesome-unlist/tags/audio.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">10</span>audio</a><a class="tag" href="/selfhosted-awesome-unlist/tags/audio-player.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">3</span>audio-player</a><a class="tag" href="/selfhosted-awesome-unlist/tags/audio-streaming.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">3</span>audio-streaming</a><a class="tag" href="/selfhosted-awesome-unlist/tags/lms.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">4</span>lms</a><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg><span class="count">1</span>multiroom-audio</span><a class="tag" href="/selfhosted-awesome-unlist/tags/sonos.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">2</span>sonos</a><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg><span class="count">1</span>synchronous</span><a class="tag" href="/selfhosted-awesome-unlist/tags/media-streaming.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">54</span>media streaming</a><a class="tag" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">943</span>selfhosted</a></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><h1 id="snapcast">Snapcast</h1>
<p><img src="https://raw.githubusercontent.com/badaix/snapcast/master/doc/Snapcast_800.png" alt="Snapcast"></p>
<p><strong>S</strong>y<strong>n</strong>chronous <strong>a</strong>udio <strong>p</strong>layer</p>
<p><a href="https://travis-ci.org/badaix/snapcast"><img src="https://travis-ci.org/badaix/snapcast.svg?branch=master" alt="Build Status"></a>
<a href="https://github.com/badaix/snapcast/releases"><img src="https://img.shields.io/github/release/badaix/snapcast.svg" alt="Github Releases"></a>
<a href="https://www.paypal.me/badaix"><img src="https://img.shields.io/badge/Donate-PayPal-green.svg" alt="Donate"></a></p>
<p>Snapcast is a multiroom client-server audio player, where all clients are time synchronized with the server to play perfectly synced audio. It&#39;s not a standalone player, but an extension that turns your existing audio player into a Sonos-like multiroom solution.
The server&#39;s audio input is a named pipe <code>/tmp/snapfifo</code>. All data that is fed into this file will be sent to the connected clients. One of the most generic ways to use Snapcast is in conjunction with the music player daemon (<a href="http://www.musicpd.org/">MPD</a>) or <a href="https://www.mopidy.com/">Mopidy</a>, which can be configured to use a named pipe as audio output.</p>
<h2 id="how-does-it-work">How does it work</h2>
<p>The Snapserver reads PCM chunks from the pipe <code>/tmp/snapfifo</code>. The chunk is encoded and tagged with the local time. Supported codecs are:</p>
<ul>
<li><strong>PCM</strong> lossless uncompressed</li>
<li><strong>FLAC</strong> lossless compressed [default]</li>
<li><strong>Vorbis</strong> lossy compression</li>
<li><strong>Opus</strong> lossy low-latency compression</li>
</ul>
<p>The encoded chunk is sent via a TCP connection to the Snapclients.
Each client does continuous time synchronization with the server, so that the client is always aware of the local server time.
Every received chunk is first decoded and added to the client&#39;s chunk-buffer. Knowing the server&#39;s time, the chunk is played out using a system dependend low level audio API (e.g. ALSA) at the appropriate time. Time deviations are corrected by playing faster/slower, which is done by removing/duplicating single samples (a sample at 48kHz has a duration of ~0.02ms).</p>
<p>Typically the deviation is below 0.2ms.</p>
<p>For more information on the binary protocol, please see the <a href="doc/binary_protocol.md">documentation</a>.</p>
<h2 id="installation">Installation</h2>
<p>You can either install Snapcast from a prebuilt package (recommended for new users), or build and install snapcast from source.</p>
<h3 id="install-linux-packages-recommended-for-beginners">Install Linux packages (recommended for beginners)</h3>
<p>Snapcast packages are available for several Linux distributions.</p>
<h4 id="debian">Debian</h4>
<p>For Debian (and Debian-based systems, such as Ubuntu, Linux Mint, ElementaryOS) download the package for your CPU architecture from the <a href="https://github.com/badaix/snapcast/releases/latest">latest release page</a>.</p>
<p>e.g. for Raspberry Pi <code>snapclient_0.x.x_armhf.deb</code>, for laptops <code>snapclient_0.x.x_amd64.deb</code></p>
<p>Install the package:</p>
<pre><code>sudo dpkg -i snapclient_0.x.x_armhf.deb</code></pre><p>or</p>
<pre><code>sudo dpkg -i snapclient_0.x.x_amd64.deb</code></pre><p>Install missing dependencies:</p>
<pre><code>sudo apt-get -f install</code></pre><h4 id="openwrt">OpenWrt</h4>
<p>On OpenWrt do:</p>
<pre><code>opkg install snapclient_0.x.x_ar71xx.ipk</code></pre><h4 id="alpine-linux">Alpine Linux</h4>
<p>On Alpine Linux do:</p>
<pre><code>apk add snapcast</code></pre><p>Or, for just the client:</p>
<pre><code>apk add snapcast-client</code></pre><p>Or, for just the server:</p>
<pre><code>apk add snapcast-server</code></pre><h4 id="gentoo-linux">Gentoo Linux</h4>
<p>On Gentoo Linux do:</p>
<pre><code>emerge --ask media-sound/snapcast</code></pre><h4 id="archlinux">Archlinux</h4>
<p>On Archlinux, Snapcast is available through the AUR.  To install, use your favorite AUR helper, or do:</p>
<pre><code>git clone https://aur.archlinux.org/snapcast
cd snapcast
makepkg -si</code></pre><h4 id="void-linux">Void Linux</h4>
<p>To install the client:</p>
<pre><code># xbps-install snapclient</code></pre><p>To install the server:</p>
<pre><code># xbps-install snapserver</code></pre><h3 id="installation-from-source">Installation from source</h3>
<p>Please follow this <a href="doc/build.md">guide</a> to build Snapcast for</p>
<ul>
<li><a href="doc/build.md#linux-native">Linux</a></li>
<li><a href="doc/build.md#freebsd-native">FreeBSD</a></li>
<li><a href="doc/build.md#macos-native">macOS</a></li>
<li><a href="doc/build.md#android-cross-compile">Android</a></li>
<li><a href="doc/build.md#openwrtlede-cross-compile">OpenWrt</a></li>
<li><a href="doc/build.md#buildroot-cross-compile">Buildroot</a></li>
<li><a href="doc/build.md#raspberry-pi-cross-compile">Raspberry Pi</a></li>
</ul>
<h2 id="snapos">SnapOS</h2>
<p>The bravest among you may be interested in <a href="https://github.com/badaix/snapos">SnapOS</a>, a small and fast-booting &quot;just enough&quot; OS to run Snapcast as an appliance.</p>
<p>There is a guide (with the necessary buildfiles) available to build SnapOS, which comes in two flavors:</p>
<ul>
<li><a href="https://github.com/badaix/snapos/blob/master/buildroot-external/README.md">Buildroot</a> based, or</li>
<li><a href="https://github.com/badaix/snapos/tree/master/openwrt">OpenWrt</a> based.</li>
</ul>
<p>Please note that there are no pre-built firmware packages available.</p>
<h2 id="configuration">Configuration</h2>
<p>After installation, Snapserver and Snapclient are started with the command line arguments that are configured in <code>/etc/default/snapserver</code> and <code>/etc/default/snapclient</code>.
Allowed options are listed in the man pages (<code>man snapserver</code>, <code>man snapclient</code>) or by invoking the snapserver or snapclient with the <code>-h</code> option.</p>
<p>The server configuration is done in <code>/etc/snapserver.conf</code>. Different streams can by configured in the <code>[stream]</code> section with a list of <code>stream</code> options, e.g.:</p>
<pre><code>[stream]
stream = pipe:///tmp/snapfifo?name=Radio&amp;sampleformat=48000:16:2&amp;codec=flac
stream = file:///home/user/Musik/Some%20wave%20file.wav?name=File</code></pre><p>The pipe stream (<code>stream = pipe</code>) will per default create the pipe. Sometimes your audio source might insist in creating the pipe itself. So the pipe creation mode can by changed to &quot;not create, but only read mode&quot;, using the <code>mode</code> option set to <code>create</code> or <code>read</code>:</p>
<pre><code>stream = pipe:///tmp/snapfifo?name=Radio&amp;mode=read&quot;</code></pre><h2 id="test">Test</h2>
<p>You can test your installation by copying random data into the server&#39;s fifo file</p>
<pre><code>sudo cat /dev/urandom &gt; /tmp/snapfifo</code></pre><p>All connected clients should play random noise now. You might raise the client&#39;s volume with &quot;alsamixer&quot;.
It&#39;s also possible to let the server play a WAV file. Simply configure a <code>file</code> stream in <code>/etc/snapserver.conf</code>, and restart the server:</p>
<pre><code>[stream]
stream = file:///home/user/Musik/Some%20wave%20file.wav?name=test</code></pre><p>When you are using a Raspberry Pi, you might have to change your audio output to the 3.5mm jack:</p>
<pre><code>#The last number is the audio output with 1 being the 3.5 jack, 2 being HDMI and 0 being auto.
amixer cset numid=3 1</code></pre><p>To setup WiFi on a Raspberry Pi, you can follow this <a href="https://www.raspberrypi.org/documentation/configuration/wireless/wireless-cli.md">guide</a></p>
<h2 id="control">Control</h2>
<p>Snapcast can be controlled using a <a href="doc/json_rpc_api/v2_0_0.md">JSON-RPC API</a>:</p>
<ul>
<li>Set client&#39;s volume</li>
<li>Mute clients</li>
<li>Rename clients</li>
<li>Assign a client to a stream</li>
<li>...</li>
</ul>
<p>There is an Android client <a href="https://github.com/badaix/snapdroid">snapdroid</a> available in <a href="https://github.com/badaix/snapdroid/releases/latest">Releases</a> and on <a href="https://play.google.com/store/apps/details?id=de.badaix.snapcast">Google Play</a></p>
<p><img src="https://raw.githubusercontent.com/badaix/snapcast/master/doc/snapcast_android_scaled.png" alt="Snapcast for Android"></p>
<p>There is also an unofficial WebApp from @atoomic <a href="https://github.com/atoomic/snapcast-volume-ui">atoomic/snapcast-volume-ui</a>.
This app lists all clients connected to a server and allows you to control individually the volume of each client.
Once installed, you can use any mobile device, laptop, desktop, or browser.</p>
<p>There is also an <a href="https://forum.fhem.de/index.php/topic,62389.0.html">unofficial FHEM module</a> from @unimatrix27 which integrates a Snapcast controller into the <a href="https://fhem.de/fhem.html">FHEM</a> home automation system.</p>
<p>There is a <a href="https://home-assistant.io/components/media_player.snapcast/">snapcast component for Home Assistant</a> which integrates a Snapcast controller in to the <a href="https://home-assistant.io/">Home Assistant</a> home automation system.</p>
<p>For a web interface in Python, see <a href="https://github.com/xkonni/snapcastr">snapcastr</a>, based on <a href="https://github.com/happyleavesaoc/python-snapcast">python-snapcast</a>. This interface controls client volume and assigns streams to groups.</p>
<p>Another web interface running on any device is <a href="https://github.com/derglaus/snapcast-websockets-ui">snapcast-websockets-ui</a>, running entirely in the browser, which needs <a href="https://github.com/novnc/websockify">websockify</a>. No configuration needed; features almost all functions; still needs some tuning for the optics.</p>
<p>A web interface called <a href="https://github.com/mariolukas/HydraPlay">HydraPlay</a> integrates Snapcast and multiple Mopidy instances. It is JavaScript based and uses Angular 7. A Snapcast web socket proxy server is needed to connect Snapcast to HydraPlay over web sockets.</p>
<h2 id="setup-of-audio-playersserver">Setup of audio players/server</h2>
<p>Snapcast can be used with a number of different audio players and servers, and so it can be integrated into your favorite audio-player solution and make it synced-multiroom capable.
The only requirement is that the player&#39;s audio can be redirected into the Snapserver&#39;s fifo <code>/tmp/snapfifo</code>. In the following configuration hints for <a href="http://www.musicpd.org/">MPD</a> and <a href="https://www.mopidy.com/">Mopidy</a> are given, which are base of other audio player solutions, like <a href="https://volumio.org/">Volumio</a> or <a href="http://www.runeaudio.com/">RuneAudio</a> (both MPD) or <a href="http://www.pimusicbox.com/">Pi MusicBox</a> (Mopidy).</p>
<p>The goal is to build the following chain:</p>
<pre><code>audio player software -&gt; snapfifo -&gt; snapserver -&gt; network -&gt; snapclient -&gt; alsa</code></pre><p>This <a href="doc/player_setup.md">guide</a> shows how to configure different players/audio sources to redirect their audio signal into the Snapserver&#39;s fifo:</p>
<ul>
<li><a href="doc/player_setup.md#mpd">MPD</a></li>
<li><a href="doc/player_setup.md#mopidy">Mopidy</a></li>
<li><a href="doc/player_setup.md#ffmpeg">FFmpeg</a></li>
<li><a href="doc/player_setup.md#mpv">mpv</a></li>
<li><a href="doc/player_setup.md#mplayer">MPlayer</a></li>
<li><a href="doc/player_setup.md#alsa">Alsa</a></li>
<li><a href="doc/player_setup.md#pulseaudio">PulseAudio</a></li>
<li><a href="doc/player_setup.md#airplay">AirPlay</a></li>
<li><a href="doc/player_setup.md#spotify">Spotify</a></li>
<li><a href="doc/player_setup.md#process">Process</a></li>
<li><a href="doc/player_setup.md#line-in">Line-in</a></li>
</ul>
<h2 id="roadmap">Roadmap</h2>
<p>Unordered list of features that should make it into the v1.0</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong>Remote control</strong> JSON-RPC API to change client latency, volume, zone,...</li>
<li><input checked="" disabled="" type="checkbox"> <strong>Android client</strong> JSON-RPC client and Snapclient</li>
<li><input checked="" disabled="" type="checkbox"> <strong>Streams</strong> Support multiple streams</li>
<li><input checked="" disabled="" type="checkbox"> <strong>Debian packages</strong> prebuild deb packages</li>
<li><input checked="" disabled="" type="checkbox"> <strong>Endian</strong> independent code</li>
<li><input checked="" disabled="" type="checkbox"> <strong>OpenWrt</strong> port Snapclient to OpenWrt</li>
<li><input checked="" disabled="" type="checkbox"> <strong>Hi-Res audio</strong> support (like 96kHz 24bit)</li>
<li><input checked="" disabled="" type="checkbox"> <strong>Groups</strong> support multiple Groups of clients (&quot;Zones&quot;)</li>
<li><input disabled="" type="checkbox"> <strong>JSON-RPC</strong> Possibility to add, remove, rename streams</li>
<li><input disabled="" type="checkbox"> <strong>Protocol specification</strong> Snapcast binary streaming protocol, JSON-RPC protocol</li>
<li><input disabled="" type="checkbox"> <strong>Ports</strong> Snapclient for Windows, <del>Mac OS X</del>,...</li>
</ul>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 06 May 2020</div><div class="column">Version: 1.1.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>