<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Wiki program that stores pages and uploaded files in a git repository, which can then be modified using the VCS command line tools or the wiki's web interface."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/site.css" rel="stylesheet" type="text/css"></head></head><body><nav class="navigation"><section class="container"><a class="navigation-title" href="/">Selfhosted Awesome [Un]list</a><ul class="navigation-list float-right"><li class="navigation-item"><a class="navigation-link" href="/tags"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>github</a></li></ul></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>gitit</h1><span class="subheading"></span><div class="links"><a class="button button-outline" href="https://github.com/jgm/gitit"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Gitit</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info"><div class="github"><span class="pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>02 May 2020</span><span class="stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>1774</span><span class="issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>203</span></div><div class="tags"><a class="button" href="/tags/haskell.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Haskell</a><a class="button" href="/tags/wikis.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Wikis</a><a class="button" href="/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>selfhosted</a></div></div></div></div></div></section><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><h1 id="gitit">Gitit</h1>
<p>Gitit is a wiki program written in Haskell. It uses <a href="http://happstack.com">Happstack</a> for
the web server and <a href="http://pandoc.org">pandoc</a> for markup processing. Pages and uploaded
files are stored in a <a href="http://git.or.cz">git</a>, <a href="http://darcs.net">darcs</a>, or <a href="http://mercurial.selenic.com/">mercurial</a> repository
and may be modified either by using the VCS&#39;s command-line tools or
through the wiki&#39;s web interface. By default, pandoc&#39;s extended version
of markdown is used as a markup language, but reStructuredText, LaTeX, HTML,
DocBook, or Emacs Org-mode markup can also be used. Pages can be exported in a
number of different formats, including LaTeX, RTF, OpenOffice ODT, and
MediaWiki markup.  Gitit can be configured to display TeX math (using
<a href="http://github.com/jgm/texmath/tree/master">texmath</a>) and highlighted source code (using <a href="http://johnmacfarlane.net/highlighting-kate/">highlighting-kate</a>).</p>
<p>Other features include</p>
<ul>
<li><p>plugins: dynamically loaded page transformations written in Haskell
(see &quot;Network.Gitit.Interface&quot;)</p>
</li>
<li><p>categories</p>
</li>
<li><p>TeX math</p>
</li>
<li><p>syntax highlighting of source code files and code snippets (using
highlighting-kate)</p>
</li>
<li><p>caching</p>
</li>
<li><p>Atom feeds (site-wide and per-page)</p>
</li>
<li><p>a library, &quot;Network.Gitit&quot;, that makes it simple to include a gitit
wiki in any happstack application</p>
</li>
</ul>
<h1 id="getting-started">Getting started</h1>
<h2 id="compiling-and-installing-gitit">Compiling and installing gitit</h2>
<p>The most reliable way to install gitit from source is to get the
<a href="https://github.com/commercialhaskell/stack">stack</a> tool.  Then clone the gitit repository and use stack
to install:</p>
<pre><code>git clone https://github.com/jgm/gitit
cd gitit
stack install</code></pre><p>Alternatively, instead of using <a href="https://github.com/commercialhaskell/stack">stack</a>, you can get the
<a href="https://www.haskell.org/platform/">Haskell Platform</a> and do the following:</p>
<pre><code>cabal update
cabal install gitit</code></pre><p>This will install the latest released version of gitit.
To install a version of gitit checked out from the repository,
change to the gitit directory and type:</p>
<pre><code>cabal install</code></pre><p>The <code>cabal</code> tool will automatically install all of the required haskell
libraries. If all goes well, by the end of this process, the latest
release of gitit will be installed in your local <code>.cabal</code> directory. You
can check this by trying:</p>
<pre><code>gitit --version</code></pre><p>If that doesn&#39;t work, check to see that <code>gitit</code> is in your local
cabal-install executable directory (usually <code>~/.cabal/bin</code>). And make
sure <code>~/.cabal/bin</code> is in your system path.</p>
<h2 id="running-gitit">Running gitit</h2>
<p>To run gitit, you&#39;ll need <code>git</code> in your system path. (Or <code>darcs</code> or
<code>hg</code>, if you&#39;re using darcs or mercurial to store the wiki data.)</p>
<p>Gitit assumes that the page files (stored in the git repository) are
encoded as UTF-8. Even page names may be UTF-8 if the file system
supports this. So you should make sure that you are using a UTF-8 locale
when running gitit. (To check this, type <code>locale</code>.)</p>
<p>Switch to the directory where you want to run gitit. This should be a
directory where you have write access, since three directories, <code>static</code>,
<code>templates</code>, and <code>wikidata</code>, and two files, <code>gitit-users</code> and <code>gitit.log</code>,
will be created here. To start gitit, just type:</p>
<pre><code>gitit</code></pre><p>If all goes well, gitit will do the following:</p>
<ol>
<li>Create a git repository, <code>wikidata</code>, and add a default front page.</li>
<li>Create a <code>static</code> directory containing files to be treated as
static files by gitit.</li>
<li>Create a <code>templates</code> directory containing HStringTemplate templates
for wiki pages.</li>
<li>Start a web server on port 5001.</li>
</ol>
<p>Check that it worked: open a web browser and go to
<a href="http://localhost:5001">http://localhost:5001</a>.</p>
<p>You can control the port that gitit runs on using the <code>-p</code> option:
<code>gitit -p 4000</code> will start gitit on port 4000. Additional runtime
options are described by <code>gitit -h</code>.</p>
<h1 id="using-gitit">Using gitit</h1>
<h2 id="wiki-links-and-formatting">Wiki links and formatting</h2>
<p>For instructions on editing pages and creating links, see the &quot;Help&quot; page.</p>
<p>Gitit interprets links with empty URLs as wikilinks. Thus, in markdown
pages, <code>[Front Page]()</code> creates an internal wikilink to the page <code>Front
Page</code>. In reStructuredText pages, <code>`Front Page &lt;&gt;`_</code> has the same
effect.</p>
<p>If you want to link to a directory listing for a subdirectory, use a
trailing slash:  <code>[foo/bar/]()</code> creates a link to the directory for
<code>foo/bar</code>.</p>
<h2 id="page-metadata">Page metadata</h2>
<p>Pages may optionally begin with a metadata block.  Here is an example:</p>
<pre><code>---
format: latex+lhs
categories: haskell math
toc: no
title: Haskell and
  Category Theory
...

\section{Why Category Theory?}</code></pre><p>The metadata block consists of a list of key-value pairs, each on a
separate line. If needed, the value can be continued on one or more
additional line, which must begin with a space. (This is illustrated by
the &quot;title&quot; example above.) The metadata block must begin with a line
<code>---</code> and end with a line <code>...</code> optionally followed by one or more blank
lines. (The metadata block is a valid YAML document, though not all YAML
documents will be valid metadata blocks.)</p>
<p>Currently the following keys are supported:</p>
<p>format
:   Overrides the default page type as specified in the configuration file.
    Possible values are <code>markdown</code>, <code>rst</code>, <code>latex</code>, <code>html</code>, <code>markdown+lhs</code>,
    <code>rst+lhs</code>, <code>latex+lhs</code>.  (Capitalization is ignored, so you can also
    use <code>LaTeX</code>, <code>HTML</code>, etc.)  The <code>+lhs</code> variants indicate that the page
    is to be interpreted as literate Haskell.  If this field is missing,
    the default page type will be used.</p>
<p>categories
:   A space or comma separated list of categories to which the page belongs.</p>
<p>toc
:   Overrides default setting for table-of-contents in the configuration file.
    Values can be <code>yes</code>, <code>no</code>, <code>true</code>, or <code>false</code> (capitalization is ignored).</p>
<p>title
:   By default the displayed page title is the page name.  This metadata element
    overrides that default.</p>
<h2 id="highlighted-source-code">Highlighted source code</h2>
<p>If gitit was compiled against a version of pandoc that has highlighting
support (see above), you can get highlighted source code by using
<a href="http://pandoc.org/README.html#delimited-code-blocks">delimited code blocks</a>:</p>
<pre><code>~~~ {.haskell .numberLines}
qsort []     = []
qsort (x:xs) = qsort (filter (&lt; x) xs) ++ [x] ++
               qsort (filter (&gt;= x) xs) 
~~~</code></pre><p>To see what languages your pandoc was compiled to highlight:</p>
<pre><code>pandoc -v</code></pre><h1 id="configuring-and-customizing-gitit">Configuring and customizing gitit</h1>
<h2 id="configuration-options">Configuration options</h2>
<p>Use the option <code>-f [filename]</code> to specify a configuration file:</p>
<pre><code>gitit -f my.conf</code></pre><p>The configuration can be split between several files:</p>
<pre><code>gitit -f my.conf -f additional.conf</code></pre><p>One use case is to keep sensible part of the configuration outside of a SCM
(oauth client secret for example).</p>
<p>If this option is not used, gitit will use a default configuration.
To get a copy of the default configuration file, which you
can customize, just type:</p>
<pre><code>gitit --print-default-config &gt; my.conf</code></pre><p>The default configuration file is documented with comments throughout.</p>
<h2 id="the-static-directory">The <code>static</code> directory</h2>
<p>On receiving a request, gitit always looks first in the <code>static</code>
directory (or in whatever directory is specified for <code>static-dir</code> in
the configuration file). If a file corresponding to the request is
found there, it is served immediately. If the file is not found in
<code>static</code>, gitit next looks in the <code>static</code> subdirectory of gitit&#39;s data
file (<code>$CABALDIR/share/gitit-x.y.z/data</code>). This is where default css,
images, and javascripts are stored. If the file is not found there
either, gitit treats the request as a request for a wiki page or wiki
command.</p>
<p>So, you can throw anything you want to be served statically (for
example, a <code>robots.txt</code> file or <code>favicon.ico</code>) in the <code>static</code>
directory. You can override any of gitit&#39;s default css, javascript, or
image files by putting a file with the same relative path in <code>static</code>.
Note that gitit has a default <code>robots.txt</code> file that excludes all
URLs beginning with <code>/_</code>.</p>
<p>Note:  if you set <code>static-dir</code> to be a subdirectory of <code>repository-path</code>,
and then add the files in the static directory to your repository, you
can ensure that others who clone your wiki repository get these files
as well.  It will not be possible to modify these files using the web
interface, but they will be modifiable via git.</p>
<h2 id="using-a-vcs-other-than-git">Using a VCS other than git</h2>
<p>By default, gitit will store wiki pages in a git repository in the
<code>wikidata</code> directory.  If you&#39;d prefer to use darcs instead of git,
you need to add the following field to the configuration file:</p>
<pre><code>repository-type: Darcs</code></pre><p>If you&#39;d prefer to use mercurial, add:</p>
<pre><code>repository-type: Mercurial</code></pre><p>This program may be called &quot;darcsit&quot; instead of &quot;gitit&quot; when a darcs
backend is used.</p>
<p>Note:  we recommend that you use gitit/darcsit with darcs version
2.3.0 or greater.  If you must use an older version of darcs, then
you need to compile the filestore library without the (default)
maxcount flag, before (re)installing gitit:</p>
<pre><code>cabal install --reinstall filestore -f-maxcount
cabal install --reinstall gitit</code></pre><p>Otherwise you will get an error when you attempt to access your
repository.</p>
<h2 id="changing-the-theme">Changing the theme</h2>
<p>To change the look of the wiki, you can modify <code>custom.css</code> in
<code>static/css</code>.</p>
<p>To change the look of printed pages, copy gitit&#39;s default <code>print.css</code>
to <code>static/css</code> and modify it.</p>
<p>The logo picture can be changed by copying a new PNG file to
<code>static/img/logo.png</code>. The default logo is 138x155 pixels.</p>
<p>To change the footer, modify <code>templates/footer.st</code>.</p>
<p>For more radical changes, you can override any of the default
templates in <code>$CABALDIR/share/gitit-x.y.z/data/templates</code> by copying
the file into <code>templates</code>, modifying it, and restarting gitit. The 
<code>page.st</code> template is the master template; it includes the others. 
Interpolated variables are surrounded by <code>$</code>s, so <code>literal $</code> must 
be backslash-escaped.</p>
<h2 id="adding-support-for-math">Adding support for math</h2>
<p>To write math on a markdown-formatted wiki page, just enclose it
in dollar signs, as in LaTeX:</p>
<pre><code>Here is a formula:  $\frac{1}{\sqrt{c^2}}$</code></pre><p>You can write display math by enclosing it in double dollar signs:</p>
<pre><code>$$\frac{1}{\sqrt{c^2}}$$</code></pre><p>Gitit can display TeX math in three different ways, depending on the
setting of <code>math</code> in the configuration file:</p>
<ol>
<li><p><code>mathjax</code> (default): Math will be rendered using the <a href="https://www.mathjax.org/">MathJax</a> javascript.</p>
</li>
<li><p><code>mathml</code>: Math will be converted to MathML using
<a href="http://github.com/jgm/texmath/tree/master">texmath</a>. This method works with IE+mathplayer, Firefox, and
Opera, but not Safari.</p>
</li>
<li><p><code>raw</code>: Math will be rendered as raw LaTeX codes.</p>
</li>
</ol>
<h2 id="restricting-access">Restricting access</h2>
<p>If you want to limit account creation on your wiki, the easiest way to do this
is to provide an <code>access-question</code> in your configuration file. (See the commented
default configuration file.)  Nobody will be able to create an account without
knowing the answer to the access question.</p>
<p>Another approach is to use HTTP authentication. (See the config file comments on
<code>authentication-method</code>.)</p>
<h2 id="authentication-through-github">Authentication through github</h2>
<p>If you want to authenticate the user from github through oauth2, you need to
register your app with github to obtain a OAuth client secret and add the
following section to your configuration file:</p>
<pre><code>[Github]
oauthclientid: 01239456789abcdef012
oauthclientsecret: 01239456789abcdef01239456789abcdef012394
oauthcallback: http://mysite/_githubCallback
oauthoauthorizeendpoint: https://github.com/login/oauth/authorize
oauthaccesstokenendpoint: https://github.com/login/oauth/access_token
## Uncomment if you are checking membership against an organization and change
## gitit-testorg to this organization:
# github-org: gitit-testorg</code></pre><p>The github authentication uses the scope <code>user:email</code>. This way, gitit gets the
email of the user, and the commit can be assigned to the right author if the
wikidata repository is pushed to github. Additionally, it uses <code>read:org</code> if you
uses the option <code>github-org</code> to check membership against an organization.</p>
<p>To push your repository to gitub after each commit, you can add the file
<code>post-commit</code> with the content below in the .git/hooks directory of your
wikidata repository.</p>
<pre><code>#!/bin/sh
git push origin master 2&gt;&gt; logit</code></pre><h1 id="plugins">Plugins</h1>
<p>Plugins are small Haskell programs that transform a wiki page after it
has been converted from Markdown or another source format. See the example
plugins in the <code>plugins</code> directory. To enable a plugin, include the path to the
plugin (or its module name) in the <code>plugins</code> field of the configuration file.
(If the plugin name starts with <code>Network.Gitit.Plugin.</code>, gitit will assume that
the plugin is an installed module and will not look for a source file.)</p>
<p>Plugin support is enabled by default. However, plugin support makes
the gitit executable considerably larger and more memory-hungry.
If you don&#39;t need plugins, you may want to compile gitit without plugin
support.  To do this, unset the <code>plugins</code> Cabal flag:</p>
<pre><code>cabal install --reinstall gitit -f-plugins</code></pre><p>Note also that if you compile gitit for executable profiling, attempts
to load plugins will result in &quot;internal error: PAP object entered!&quot;</p>
<h1 id="accessing-the-wiki-through-git">Accessing the wiki through git</h1>
<p>All the pages and uploaded files are stored in a git repository. By
default, this lives in the <code>wikidata</code> directory (though this can be
changed through configuration options). So you can interact with the
wiki using git command line tools:</p>
<pre><code>git clone ssh://my.server.edu/path/of/wiki/wikidata
cd wikidata
vim Front\ Page.page  # edit the page
git commit -m &quot;Added message about wiki etiquette&quot; Front\ Page.page
git push</code></pre><p>If you now look at the Front Page on the wiki, you should see your changes
reflected there.  Note that the pages all have the extension <code>.page</code>.</p>
<p>If you are using the darcs or mercurial backend, the commands will
be slightly different.  See the documentation for your VCS for
details.</p>
<h1 id="performance">Performance</h1>
<h2 id="caching">Caching</h2>
<p>By default, gitit does not cache content.  If your wiki receives a lot of
traffic or contains pages that are slow to render, you may want to activate
caching.  To do this, set the configuration option <code>use-cache</code> to <code>yes</code>.
By default, rendered pages, highlighted source files, and exported PDFs
will be cached in the <code>cache</code> directory. (Another directory can be
specified by setting the <code>cache-dir</code> configuration option.)</p>
<p>Cached pages are updated when pages are modified using the web
interface. They are not updated when pages are modified directly through
git or darcs. However, the cache can be refreshed manually by pressing
Ctrl-R when viewing a page, or by sending an HTTP GET or POST request to
<code>/_expire/path/to/page</code>, where <code>path/to/page</code> is the name of the page to
be expired.</p>
<p>Users who frequently update pages using git or darcs may wish to add a
hook to the repository that makes the appropriate HTTP request to expire
pages when they are updated. To facilitate such hooks, the gitit cabal
package includes an executable <code>expireGititCache</code>. Assuming you are
running gitit at port 5001 on localhost, and the environment variable
<code>CHANGED_FILES</code> contains a list of the files that have changed, you can
expire their cached versions using</p>
<pre><code>expireGititCache http://localhost:5001 $CHANGED_FILES</code></pre><p>Or you can specify the files directly:</p>
<pre><code>expireGititCache http://localhost:5001 &quot;Front Page.page&quot; foo/bar/baz.c</code></pre><p>This program will return a success status (0) if the page has been
successfully expired (or if it was never cached in the first place),
and a failure status (&gt; 0) otherwise.</p>
<p>The cache is persistent through restarts of gitit.  To expire all cached
pages, simply remove the <code>cache</code> directory.</p>
<h2 id="idle">Idle</h2>
<p>By default, GHC&#39;s runtime will repeatedly attempt to collect garbage
when an executable like Gitit is idle. This means that gitit will, after
the first page request, never use 0% CPU time and sleep, but will use
~1%. This can be bad for battery life, among other things.</p>
<p>To fix this, one can disable the idle-time GC with the runtime flag
<code>-I0</code>:</p>
<pre><code>gitit -f my.conf +RTS -I0 -RTS</code></pre><p>Note:</p>
<p>To enable RTS, cabal needs to pass the compile flag <code>-rtsopts</code> to GHC while installing.</p>
<pre><code>cabal install --reinstall gitit --ghc-options=&quot;-rtsopts&quot;</code></pre><h1 id="using-gitit-with-apache">Using gitit with apache</h1>
<p>Most users who run a public-facing gitit will want gitit to appear
at a nice URL like <code>http://wiki.mysite.com</code> or
<code>http://mysite.com/wiki</code> rather than <code>http://mysite.com:5001</code>.
This can be achieved using apache&#39;s <code>mod_proxy</code>.</p>
<h2 id="proxying-to-httpwikimysitecom">Proxying to <code>http://wiki.mysite.com</code></h2>
<p>Set up your DNS so that <code>http://wiki.mysite.com</code> maps to
your server&#39;s IP address. Make sure that the <code>mod_proxy</code>, <code>mod_proxy_http</code> and <code>mod_rewrite</code> modules are
loaded, and set up a virtual host with the following configuration:</p>
<pre><code>&lt;VirtualHost *&gt;
    ServerName wiki.mysite.com
    DocumentRoot /var/www/
    RewriteEngine On
    ProxyPreserveHost On
    ProxyRequests Off

    &lt;Proxy *&gt;
       Order deny,allow
       Allow from all
    &lt;/Proxy&gt;

    ProxyPassReverse /    http://127.0.0.1:5001
    RewriteRule ^(.*) http://127.0.0.1:5001$1 [P]

    ErrorLog /var/log/apache2/error.log
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined
    ServerSignature On

&lt;/VirtualHost&gt;</code></pre><p>Reload your apache configuration and you should be all set.</p>
<h2 id="using-nginx-to-achieve-the-same">Using nginx to achieve the same</h2>
<p>Drop a file called <code>wiki.example.com.conf</code> into <code>/etc/nginx/conf.d</code>
(or where ever your distribution puts it).</p>
<pre><code>server {
    listen 80;
    server_name wiki.example.com
    location / {
        proxy_pass        http://127.0.0.1:5001/;
        proxy_set_header  X-Real-IP  $remote_addr;
        proxy_redirect off;
    }
    access_log /var/log/nginx/wiki.example.com.log main;
}</code></pre><p>Reload your nginx config and you should be all set.</p>
<h2 id="proxying-to-httpmysitecomwiki">Proxying to <code>http://mysite.com/wiki</code></h2>
<p>Make sure the <code>mod_proxy</code>, <code>mod_headers</code>, <code>mod_proxy_http</code>,
and <code>mod_proxy_html</code> modules are loaded. <code>mod_proxy_html</code>
is an external module, which can be obtained [here]
(<a href="http://apache.webthing.com/mod_proxy_html/">http://apache.webthing.com/mod_proxy_html/</a>). It rewrites URLs that
occur in web pages. Here we will use it to rewrite gitit&#39;s links so that
they all begin with <code>/wiki/</code>.</p>
<p>First, tell gitit not to compress pages, since <code>mod_proxy_html</code> needs
uncompressed pages to parse. You can do this by setting the gitit
configuration option</p>
<pre><code>compress-responses: no</code></pre><p>Second, modify the link in the <code>reset-password-message</code> in the
configuration file:  instead of</p>
<pre><code>http://$hostname$:$port$$resetlink$</code></pre><p>set it to</p>
<pre><code>http://$hostname$/wiki$resetlink$</code></pre><p>Restart gitit.</p>
<p>Now add the following lines to the apache configuration file for the
<code>mysite.com</code> server:</p>
<pre><code># These commands will proxy /wiki/ to port 5001

ProxyRequests Off

&lt;Proxy *&gt;
  Order deny,allow
  Allow from all
&lt;/Proxy&gt;

ProxyPass /wiki/ http://127.0.0.1:5001/

&lt;Location /wiki/&gt;
  SetOutputFilter  proxy-html
  ProxyPassReverse /
  ProxyHTMLURLMap  /   /wiki/
  ProxyHTMLDocType &quot;&lt;!DOCTYPE html PUBLIC &#39;-//W3C//DTD XHTML 1.0 Strict//EN&#39; &#39;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&#39;&gt;&quot; XHTML
  RequestHeader unset Accept-Encoding
&lt;/Location&gt;</code></pre><p>Reload your apache configuration and you should be set.</p>
<p>For further information on the use of <code>mod_proxy_http</code> to rewrite URLs,
see the <a href="http://apache.webthing.com/mod_proxy_html/guide.html"><code>mod_proxy_html</code> guide</a>.</p>
<h1 id="using-gitit-as-a-library">Using gitit as a library</h1>
<p>By importing the module <code>Network.Gitit</code>, you can include a gitit wiki
(or several of them) in another happstack application. There are some
simple examples in the haddock documentation for <code>Network.Gitit</code>.</p>
<h1 id="reporting-bugs">Reporting bugs</h1>
<p>Bugs may be reported (and feature requests filed) at
<a href="https://github.com/jgm/gitit/issues">https://github.com/jgm/gitit/issues</a>.</p>
<p>There is a mailing list for users and developers at
<a href="http://groups.google.com/group/gitit-discuss">http://groups.google.com/group/gitit-discuss</a>.</p>
<h1 id="acknowledgements">Acknowledgements</h1>
<p>A number of people have contributed patches:</p>
<ul>
<li>Gwern Branwen helped to optimize gitit and wrote the
InterwikiPlugin. He also helped with the Feed module.</li>
<li>Simon Michael contributed the patch adding RST support.</li>
<li>Henry Laxen added support for password resets and helped with
the apache proxy instructions.</li>
<li>Anton van Straaten made the process of page generation
more modular by adding Gitit.ContentTransformer.</li>
<li>Robin Green helped improve the plugin API and interface, and
fixed a security problem with the reset password code.</li>
<li>Thomas Hartman helped improve the index page, making directory
browsing persistent, and fixed a bug in template recompilation.</li>
<li>Justin Bogner improved the appearance of the preview button.</li>
<li>Kohei Ozaki contributed the ImgTexPlugin.</li>
<li>Michael Terepeta improved validation of change descriptions.</li>
<li>mightybyte suggested making gitit available as a library,
and contributed a patch to ifLoggedIn that was needed to
make gitit usable with a custom authentication scheme.</li>
</ul>
<p>I am especially grateful to the darcs team for using darcsit for
their public-facing wiki.  This has helped immensely in identifying
issues and improving performance.</p>
<p>Gitit&#39;s default visual layout is shamelessly borrowed from Wikipedia.
The stylesheets are influenced by Wikipedia&#39;s stylesheets and by the
bluetrip CSS framework (see BLUETRIP-LICENSE). Some of the icons in
<code>img/icons</code> come from bluetrip as well.</p>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built At: 02 May 2020</div><div class="column">Version: 1.0.0</div></div></div></footer><script src="/site.js"></script></body></html>