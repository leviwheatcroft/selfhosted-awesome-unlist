<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Mozilla WebThings is Mozilla’s open source implementation of the Web of Things, including the WebThings Gateway and the WebThings framework."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body class="project"><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>gateway</h1><span class="subheading">Mozilla WebThings is Mozilla’s open source implementation of the Web of Things, including the WebThings Gateway and the WebThings framework.</span><div class="links"><a class="button button-outline" href="https://iot.mozilla.org/gateway/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Mozilla Gateway</a><a class="button button-outline" href="https://github.com/mozilla-iot/gateway"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>Source Code</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info statistics"><span class="stat pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>24 May 2020</span><span class="stat stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>2224</span><span class="stat issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>173</span></div></div></div><div class="row"><div class="column"><div class="info tags"><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/languages/undefined.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></a><a class="tag" href="/selfhosted-awesome-unlist/tags/javascript.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">199</span>javascript</a><a class="tag" href="/selfhosted-awesome-unlist/tags/internet-of-things-iot.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">9</span>internet of things (iot)</a><a class="tag" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">943</span>selfhosted</a><a class="tag" href="/selfhosted-awesome-unlist/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">330</span>docker</a></div></div></div></div></section><article><div class="container"><div class="row"><div class="column">
<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1><a id="user-content-webthings-gateway-by-mozilla" class="anchor" aria-hidden="true" href="#webthings-gateway-by-mozilla"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebThings Gateway by Mozilla</h1>
<p><a href="https://github.com/mozilla-iot/gateway/actions?query=workflow%3ABuild"><img src="https://github.com/mozilla-iot/gateway/workflows/Build/badge.svg" alt="Build Status" style="max-width:100%;"></a>
<a href="https://codecov.io/gh/mozilla-iot/gateway" rel="nofollow"><img src="https://camo.githubusercontent.com/7a2181ac2750398101bfb3d4698366962ca8ebd3/68747470733a2f2f636f6465636f762e696f2f67682f6d6f7a696c6c612d696f742f676174657761792f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/mozilla-iot/gateway/branch/master/graph/badge.svg" style="max-width:100%;"></a>
<a href="https://david-dm.org/mozilla-iot/gateway" rel="nofollow"><img src="https://camo.githubusercontent.com/493c3485e05575bc8c4b8c28f7277e818ecf01a4/68747470733a2f2f64617669642d646d2e6f72672f6d6f7a696c6c612d696f742f676174657761792e737667" alt="dependencies" data-canonical-src="https://david-dm.org/mozilla-iot/gateway.svg" style="max-width:100%;"></a>
<a href="https://david-dm.org/mozilla-iot/gateway?type=dev" rel="nofollow"><img src="https://camo.githubusercontent.com/2b78efe0134ac83999c6f9412c3301d9a2536119/68747470733a2f2f64617669642d646d2e6f72672f6d6f7a696c6c612d696f742f676174657761792f6465762d7374617475732e737667" alt="devDependencies" data-canonical-src="https://david-dm.org/mozilla-iot/gateway/dev-status.svg" style="max-width:100%;"></a>
<a href="LICENSE"><img src="https://camo.githubusercontent.com/e51cbb8111c683061ad824efa4b5151e1a95fdb8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d504c2d2d322e302d626c75652e737667" alt="license" data-canonical-src="https://img.shields.io/badge/license-MPL--2.0-blue.svg" style="max-width:100%;"></a></p>
<p>Web of Things gateway.</p>
<h2><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<ul>
<li>If you have a Rasberry Pi, the easiest way to use the gateway is to <a href="http://iot.mozilla.org/gateway/" rel="nofollow">download and flash</a> a pre-built software image from Mozilla to an SD card.</li>
<li>If you prefer to use Docker, we have a prebuilt Docker image available <a href="https://hub.docker.com/r/mozillaiot/gateway" rel="nofollow">here</a>, for both ARM and amd64. You can also build your own image from <a href="https://github.com/mozilla-iot/gateway-docker">this repository</a>.</li>
<li>On Fedora, Debian, Raspbian, or Ubuntu, you can install the relevant .rpm or .deb package from the <a href="https://github.com/mozilla-iot/gateway/releases">releases page</a>. Those packages are built from the <a href="https://github.com/mozilla-iot/gateway-rpm">gateway-rpm</a> and <a href="https://github.com/mozilla-iot/gateway-deb">gateway-deb</a> repos.</li>
<li>On Arch Linux, you can install the <a href="https://aur.archlinux.org/packages/webthings-gateway/" rel="nofollow">webthings-gateway AUR package</a>. The PKGBUILD for this package can also be seen <a href="https://github.com/mozilla-iot/gateway-aur">here</a>.</li>
<li>Otherwise, you can build it from source yourself (see below).</li>
</ul>
<h2><a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Documentation</h2>
<ul>
<li><a href="https://iot.mozilla.org/docs/gateway-getting-started-guide.html" rel="nofollow">Getting Started Guide</a></li>
<li><a href="https://iot.mozilla.org/docs/gateway-user-guide.html" rel="nofollow">User Guide</a></li>
<li><a href="https://github.com/mozilla-iot/wiki/wiki">Wiki</a></li>
<li><a href="https://iot.mozilla.org/docs/" rel="nofollow">Various other docs</a></li>
</ul>
<h2><a id="user-content-community" class="anchor" aria-hidden="true" href="#community"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Community</h2>
<ul>
<li><a href="https://discourse.mozilla.org/c/iot" rel="nofollow">Discourse</a></li>
<li><a href="https://matrix.to/#/#iot:mozilla.org" rel="nofollow">Matrix</a> (<code>#iot:mozilla.org</code>)</li>
</ul>
<h2><a id="user-content-prerequisites-for-building" class="anchor" aria-hidden="true" href="#prerequisites-for-building"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites for Building</h2>
<h3><a id="user-content-install-os" class="anchor" aria-hidden="true" href="#install-os"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install OS</h3>
<p>(If you're just installing on your PC, you can skip this step).</p>
<p>If you're installing on a Raspberry Pi then you may need to set up the OS on the Raspberry Pi first. <a href="https://github.com/mozilla-iot/wiki/wiki/Setting-up-Raspberry-Pi">See here</a> for instructions.</p>
<h3><a id="user-content-update-package-cache-linux-only" class="anchor" aria-hidden="true" href="#update-package-cache-linux-only"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Update Package Cache (Linux only)</h3>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt update
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf --refresh upgrade
</code></pre>
<h3><a id="user-content-install-pkg-config" class="anchor" aria-hidden="true" href="#install-pkg-config"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install pkg-config</h3>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install pkg-config
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf install pkgconfig
</code></pre>
<p>Under macOS:</p>
<pre><code>$ brew install pkg-config
</code></pre>
<h3><a id="user-content-install-curl-needed-to-install-nvm" class="anchor" aria-hidden="true" href="#install-curl-needed-to-install-nvm"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install curl (needed to install nvm)</h3>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install curl
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf install curl
</code></pre>
<h3><a id="user-content-install-nvm-recommended" class="anchor" aria-hidden="true" href="#install-nvm-recommended"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install nvm (Recommended)</h3>
<p>nvm allows you to easily install different versions of node. To install nvm:</p>
<pre><code>$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash
</code></pre>
<p>Reinitialize your terminal session.</p>
<pre><code>$ . ~/.bashrc
</code></pre>
<h3><a id="user-content-install-node-if-you-didnt-use-nvm" class="anchor" aria-hidden="true" href="#install-node-if-you-didnt-use-nvm"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install node (if you didn't use nvm)</h3>
<p>(If you already installed node via nvm you can skip this step)</p>
<p>Follow the directions from <a href="https://nodejs.org" rel="nofollow">NodeJS</a> to install on your platform.</p>
<h3><a id="user-content-set-up-bluetooth-permissions-linux-only" class="anchor" aria-hidden="true" href="#set-up-bluetooth-permissions-linux-only"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Set up Bluetooth permissions (Linux only)</h3>
<p>The following is required in order to let node and python3 use the Bluetooth adapter.</p>
<pre><code>$ sudo setcap cap_net_raw+eip $(eval readlink -f `which node`)
$ sudo setcap cap_net_raw+eip $(eval readlink -f `which python3`)
</code></pre>
<h3><a id="user-content-install-bluetooth-and-bt-low-energy-support-libraries-linux-only" class="anchor" aria-hidden="true" href="#install-bluetooth-and-bt-low-energy-support-libraries-linux-only"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Bluetooth and BT Low Energy support libraries (Linux only)</h3>
<p>The following are required in order to install the Python modules that support Bluetooth</p>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install libboost-python-dev libboost-thread-dev libbluetooth-dev libglib2.0-dev
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf install boost-python2-devel boost-python3-devel boost-devel bluez-libs-devel glib2-devel
</code></pre>
<h3><a id="user-content-install-libusb-and-libudev-linux-only" class="anchor" aria-hidden="true" href="#install-libusb-and-libudev-linux-only"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install libusb and libudev (Linux only)</h3>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install libusb-1.0-0-dev libudev-dev
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf install libudev-devel libusb1-devel
</code></pre>
<h3><a id="user-content-install-autoconf" class="anchor" aria-hidden="true" href="#install-autoconf"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install autoconf</h3>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install autoconf
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf install autoconf
</code></pre>
<p>Under macOS:</p>
<pre><code>$ brew install autoconf
</code></pre>
<h3><a id="user-content-install-libpng-linux-only" class="anchor" aria-hidden="true" href="#install-libpng-linux-only"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install libpng (Linux only)</h3>
<p>Under x86-64 or x86 Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install libpng16-16
</code></pre>
<p>Under ARM Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install libpng-dev
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf install libpng-devel
</code></pre>
<h3><a id="user-content-install-libffi" class="anchor" aria-hidden="true" href="#install-libffi"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install libffi</h3>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install libffi-dev
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf install libffi-devel
</code></pre>
<p>Under macOS:</p>
<pre><code>$ brew install libffi
</code></pre>
<h3><a id="user-content-install-git" class="anchor" aria-hidden="true" href="#install-git"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install git</h3>
<p>You'll need git to checkout the repositories.</p>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install git
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf install git
</code></pre>
<h3><a id="user-content-install-gcc" class="anchor" aria-hidden="true" href="#install-gcc"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install gcc</h3>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install build-essential
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf group install "C Development Tools and Libraries"
</code></pre>
<h3><a id="user-content-install-python-tools" class="anchor" aria-hidden="true" href="#install-python-tools"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Python tools</h3>
<p>Under Ubuntu/Debian Linux:</p>
<pre><code>$ sudo apt install python-pip python3-pip
$ sudo python2 -m pip install six
$ sudo python3 -m pip install git+https://github.com/mozilla-iot/gateway-addon-python#egg=gateway_addon
</code></pre>
<p>Under Fedora Linux:</p>
<pre><code>$ sudo dnf install python2-pip python3-pip
$ sudo python2 -m pip install six
$ sudo python3 -m pip install git+https://github.com/mozilla-iot/gateway-addon-python#egg=gateway_addon
</code></pre>
<h2><a id="user-content-download-and-build-gateway" class="anchor" aria-hidden="true" href="#download-and-build-gateway"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Download and Build Gateway</h2>
<ul>
<li>
<p>Clone the GitHub repository (or fork it first):</p>
<pre><code>$ git clone https://github.com/mozilla-iot/gateway.git
</code></pre>
</li>
<li>
<p>Change into the gateway directory:</p>
<pre><code>$ cd gateway
</code></pre>
</li>
<li>
<p>If you have chosen to install nvm above, install and use an LTS version of node and then set the default version. The <strong><code>.nvmrc</code></strong> file will be used by nvm to determine which version of node to install.</p>
<pre><code>$ nvm install
$ nvm use
$ nvm alias default $(node -v)
</code></pre>
</li>
<li>
<p>Verify that node and npm have been installed:</p>
<pre><code>$ node --version
v10.19.0
$ npm --version
6.14.0
</code></pre>
<p>Note: these versions might differ from the LTS version installed locally.</p>
</li>
<li>
<p>Install dependencies:</p>
<pre><code>$ npm ci
</code></pre>
</li>
<li>
<p>Add Firewall exceptions (Fedora Linux Only)</p>
<pre><code>$ sudo firewall-cmd --zone=public --add-port=4443/tcp --permanent
$ sudo firewall-cmd --zone=public --add-port=8080/tcp --permanent
$ sudo firewall-cmd --zone=public --add-port=5353/udp --permanent
</code></pre>
</li>
<li>
<p>Set up domain:</p>
<ul>
<li>If you plan to use Mozilla's provided tunneling service to set up a <code>*.mozilla-iot.org</code> domain:
<ul>
<li>
<p>Start the web server:</p>
<pre><code>$ npm start
</code></pre>
</li>
<li>
<p>Load <code>http://localhost:8080</code> in your web browser (or use the server's IP address if loading remotely). Then follow the instructions on the web page to set up domain and register. Once this is done you can load
<code>https://localhost:4443</code> in your web browser (or use the server's IP address if loading remotely).</p>
</li>
</ul>
</li>
<li>If you plan to use your own SSL certificate:
<ul>
<li>
<p>The HTTPS server looks for <code>privatekey.pem</code> and <code>certificate.pem</code> in the <code>ssl</code> sub-directory of the <code>userProfile</code> directory specified in your config. You can use a real certificate or generate a self-signed one by following the steps below.</p>
<pre><code>$ MOZIOT_HOME="${MOZIOT_HOME:=${HOME}/.mozilla-iot}"
$ SSL_DIR="${MOZIOT_HOME}/ssl"
$ [ ! -d "${SSL_DIR}" ] &amp;&amp; mkdir -p "${SSL_DIR}"
$ openssl genrsa -out "${SSL_DIR}/privatekey.pem" 2048
$ openssl req -new -sha256 -key "${SSL_DIR}/privatekey.pem" -out "${SSL_DIR}/csr.pem"
$ openssl x509 -req -in "${SSL_DIR}/csr.pem" -signkey "${SSL_DIR}/privatekey.pem" -out "${SSL_DIR}/certificate.pem"
</code></pre>
</li>
<li>
<p>Start the web server:</p>
<pre><code>$ npm start
</code></pre>
</li>
<li>
<p>Load <code>https://localhost:4443</code> in your web browser (or use the server's IP address if loading remotely). Since you're using a self-signed certificate, you'll need to add a security exception in the browser.</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a id="user-content-browser-support" class="anchor" aria-hidden="true" href="#browser-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Browser Support</h2>
<p>The Gateway only supports the following browsers, due to its use of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" rel="nofollow"><code>Fetch API</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API" rel="nofollow"><code>WebSocket API</code></a>:</p>
<ul>
<li>Firefox 52+</li>
<li>Chrome 43+</li>
<li>Edge 14+</li>
<li>Safari 10.1+</li>
<li>Opera 29+</li>
</ul>
<h2><a id="user-content-debugging" class="anchor" aria-hidden="true" href="#debugging"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Debugging</h2>
<p>If you are using VS Code, simply use the "launch" target. It will build the gateway in debugger mode.</p>
<p>If you are not using VS Code, run <code>npm run debug</code> and it will build the gateway and launch it with <code>--inspect</code>.</p>
<h2><a id="user-content-install-additional-dependencies-for-test-debian" class="anchor" aria-hidden="true" href="#install-additional-dependencies-for-test-debian"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install additional dependencies for Test (Debian)</h2>
<p>These steps are required on Debian</p>
<pre><code>$ sudo apt install firefox openjdk-8-jre
</code></pre>
<h2><a id="user-content-running-tests" class="anchor" aria-hidden="true" href="#running-tests"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running Tests</h2>
<p>To run the linter and all tests:</p>
<pre><code>$ npm test
</code></pre>
<p>To run a single test:</p>
<pre><code>$ jest src/test/{test-name}.js
</code></pre>
<p>(assumes you have the <code>jest</code> command on your <code>PATH</code>, otherwise use <code>./node_modules/jest/bin/jest.js</code>)</p>
<p>To compare UI with parent branch:</p>
<pre><code>$ npm run screenshots
$ npm test
</code></pre>
<p>(if you have the screenshots in the folder <code>./browser-test-screenshots</code>, <code>npm test</code> should compare UI with screenshots stored)</p>
<h2><a id="user-content-source-code-structure" class="anchor" aria-hidden="true" href="#source-code-structure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Source Code Structure</h2>
<ul>
<li><strong><code>config/</code></strong> - Gateway configuration files</li>
<li><strong><code>image/</code></strong> - Tools for building the Raspberry Pi image</li>
<li><strong><code>src/</code></strong>
<ul>
<li><strong><code>addons-test/</code></strong> - Add-ons used strictly for testing</li>
<li><strong><code>controllers/</code></strong> - App URL routes and their logic</li>
<li><strong><code>models/</code></strong> - Data model and business logic</li>
<li><strong><code>platforms/</code></strong> - Platform-specific functionality</li>
<li><strong><code>plugin/</code></strong> - Utility classes and methods used by add-ons</li>
<li><strong><code>rules-engine/</code></strong> - The rules engine</li>
<li><strong><code>test/</code></strong> - Integration tests</li>
<li><strong><code>views/</code></strong> - HTML views</li>
<li><strong><code>addon-loader.js</code></strong> - Script used for starting up Node-based add-ons</li>
<li><strong><code>addon-manager.js</code></strong> - Manages add-ons (e.g. Zigbee, Z-Wave)</li>
<li><strong><code>app.js</code></strong> - The main back end</li>
<li><strong><code>certificate-manager.js</code></strong> - Certificate registration and renewal, via Let's Encrypt</li>
<li><strong><code>command-utils.js</code></strong> - Utilities used by commands parser</li>
<li><strong><code>constants.js</code></strong> - System-wide constants</li>
<li><strong><code>db.js</code></strong> - Manages the SQLite3 database</li>
<li><strong><code>deferred.js</code></strong> - Wraps up a promise in a slightly more convenient manner for passing around, or saving</li>
<li><strong><code>dynamic-require.js</code></strong> - Small utility to require code from file system, rather than webpacked bundle</li>
<li><strong><code>ec-crypto.js</code></strong> - Elliptic curve helpers for the ES256 curve</li>
<li><strong><code>jwt-middleware.js</code></strong> - Express middleware for determining authentication status</li>
<li><strong><code>log-timestamps.js</code></strong> - Utilities for adding timestamps to console logging functions</li>
<li><strong><code>mdns-server.js</code></strong> - mDNS server</li>
<li><strong><code>oauth-types.js</code></strong> - OAuth types</li>
<li><strong><code>passwords.js</code></strong> - Password utilities</li>
<li><strong><code>platform.js</code></strong> - Platform-specific utilities</li>
<li><strong><code>push-service.js</code></strong> - Push notification service</li>
<li><strong><code>router.js</code></strong> - Routes app URLs to controllers</li>
<li><strong><code>router-setup.js</code></strong> - Initial router setup code for OpenWrt</li>
<li><strong><code>sleep.js</code></strong> - Small utility to implement a promise-based sleep</li>
<li><strong><code>ssltunnel.js</code></strong> - Utilities to determine state of tunnel and manage the PageKite process</li>
<li><strong><code>user-profile.js</code></strong> - Manages persistent user data</li>
<li><strong><code>utils.js</code></strong> - Various utility functions</li>
<li><strong><code>wifi-setup.js</code></strong> - Initial Wi-Fi setup code for Raspbian</li>
</ul>
</li>
<li><strong><code>static/</code></strong> - Static CSS, JavaScript &amp; image resources for web app front end</li>
<li><strong><code>tools/</code></strong> - Helpful utilities (not part of the build)</li>
<li><strong><code>package.json</code></strong> - npm module manifest</li>
</ul>
</article></div>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 24 May 2020</div><div class="column">Version: 1.3.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>