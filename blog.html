<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Facebook-styled blog. Free, extremely lightweight, single-user and easy to install."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/site.css" rel="stylesheet" type="text/css"></head></head><body><nav class="navigation"><section class="container"><a class="navigation-title" href="/">Selfhosted Awesome [Un]list</a><ul class="navigation-list float-right"><li class="navigation-item"><a class="navigation-link" href="https://github.com/leviwheatcroft/selfhosted-awesome-unlist"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>github</a></li></ul></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>blog</h1><span class="subheading"></span><div class="links"><a class="button button-outline" href="https://github.com/m1k1o/blog"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Blog</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info"><div class="github"><span class="pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>07 Apr 2020</span><span class="stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>23</span><span class="issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>3</span></div><div class="tags"><a class="button" href="/tags/php.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>PHP</a><a class="button" href="/tags/blogging-platforms.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Blogging Platforms</a><a class="button" href="/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>selfhosted</a><a class="button" href="/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Docker</a></div></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><h1 id="blog">blog</h1>
<p>This is a simple self-hosted, lightweight, singe-user PHP blog, where you can create your own Facebook-like feed. Give read access to other people, and you can share rich text with photos including highlighted code or links.</p>
<p>In this context lightweight means:</p>
<ul>
<li>No npm dependency, there won&#39;t be an annoying 1GB <code>node_modules</code> directory.</li>
<li>No pipeline. What you see is pure code without a need to install it.</li>
<li>No overhead, essential features, simple usage.</li>
</ul>
<h2 id="screenshots">Screenshots</h2>
<details>
    <summary>Light theme</summary>

<p><img src="https://raw.githubusercontent.com/m1k1o/blog/master/static/screenshot-theme02-light.png" alt="screenshot"></p>
</details>

<details>
    <summary>Dark theme</summary>

<p><img src="https://raw.githubusercontent.com/m1k1o/blog/master/static/screenshot-theme02-dark.png" alt="screenshot"></p>
</details>

<details>
    <summary>Legacy theme (compatible with older browsers)</summary>

<p><img src="https://raw.githubusercontent.com/m1k1o/blog/master/static/screenshot-theme01.png" alt="screenshot"></p>
</details>

<h2 id="install-standalone-app-using-docker-compose">Install standalone app using <code>docker-compose</code></h2>
<p>You need to install <a href="https://docs.docker.com/compose/install/">docker-compose</a>.</p>
<h3 id="step-1-clone-this-repository">Step 1: Clone this repository:</h3>
<pre><code>git clone https://github.com/m1k1o/blog
cd blog</code></pre><h3 id="step-2-build--run-containers-using-docker-compose">Step 2: Build &amp; run containers using docker-compose.</h3>
<pre><code>docker-compose up -d</code></pre><p>You can specify these environment variables, otherwise the default ones will be used:</p>
<ul>
<li><strong>HTTP_PORT=80</strong> - where the blog will be accessible.</li>
<li><strong>DATA=./data</strong> - directory to store the user data.</li>
</ul>
<p>These environment variables can be stored in the <code>.env</code> file or passed to the command directly:</p>
<pre><code>HTTP_PORT=3001 DATA=/home/user/blog docker-compose up -d</code></pre><h3 id="step-3-copy-the-config">Step 3: Copy the config</h3>
<p>Copy the config from the root directory to your new <code>./data/</code> directory.</p>
<pre><code>cp ./config.ini ./data/config.ini</code></pre><p>Now you can modify your config.</p>
<h3 id="correct-permissions">Correct permissions</h3>
<p>Make sure your <code>./data/</code> directory has correct permissions. Apache is running as a <code>www-data</code> user, which needs to have write access to the <code>./data/</code> directory (for uploading images).</p>
<h4 id="prefered-solution">Prefered solution</h4>
<p>Change the directory owner to the <code>www-data</code> user:</p>
<pre><code>chown 33:33 ./data/</code></pre><p>Alternatively, add the <code>www-data</code> user to the user group that owns the <code>./data/</code> directory.</p>
<h4 id="bad-solution-but-it-works">Bad solution (but it works)</h4>
<p>Set <code>777</code> permission for your <code>./data/</code>, so everyone can read, write, and execute:</p>
<pre><code>chmod 777 ./data/</code></pre><p><strong>NOTICE:</strong> You should not use <code>777</code>. You are giving access to anyone for this directory. Maybe to some attacker, who can run his exploit here.</p>
<h2 id="install-using-docker">Install using docker</h2>
<p>You need to install <a href="https://docs.docker.com/install/">docker</a>.</p>
<p>If you don&#39;t want do spawn a new database server, but you want to use your existing <code>mariadb</code> or <code>mysql</code> server, you can install this blog using Docker.</p>
<h3 id="build-image">Build image</h3>
<p>After you have cloned and accessed the repository, you need to run this command. It will build a docker image with a tag <code>blog</code>.</p>
<pre><code>docker build --tag blog .</code></pre><h3 id="run-container">Run container</h3>
<p>After you have built the image, you can run it as the following:</p>
<pre><code>docker run \
  -p 80:80 \
  -p 443:443 \
  -v ./data:/var/www/html/data \
  blog</code></pre><p>Now you can copy the config to your new <code>./data</code> directory and set up the database connection settings.</p>
<pre><code>cp ./config.ini ./data/config.ini</code></pre><h2 id="install">Install</h2>
<p>If you have decied that you don&#39;t want to use Docker, you can intall it manually.</p>
<p><strong>Requirements:</strong> Apache 2.0*, PHP 7.4, MariaDB 10.1</p>
<p><strong>NOTICE:</strong> If you would like to use Nginx or another web server, make sure that the sensitive data are not exposed to the public. Since <code>.htaccess</code> is protecting those files in Apache, that could not be the case in a different environment. Take care of:</p>
<ul>
<li><strong>config.ini</strong> - disallow access to all <em>.ini</em> files for the public.</li>
<li><strong>data/logs/_ANY_.log</strong> - make sure no sensitive information are located in <em>.log</em>.</li>
</ul>
<h3 id="database-schema">Database Schema</h3>
<p>You can find database schema in the <code>./app/db/01_schema.sql</code> file.</p>
<h3 id="debug-mode">Debug mode</h3>
<p>To check if your server is set up correctly, turn on a debug mode (in config add <code>debug = true</code>) to see the details. In the debug mode, an error may be shown if you are missing some <strong>PHP extensions</strong> needed to be installed on your server.</p>
<h2 id="config-file">Config file</h2>
<p><strong>DO NOT</strong> edit <code>./config.ini</code> file. If you wish to modify the config, simply make a copy to the <code>./data/config.ini</code> directory and edit it there.</p>
<p><strong>But, why?</strong> If there is any change in config file (most likely adding a new feature), you will have problems with merging a new version. Also, if you would fork this repository, you might accidentally push your secrets to the git. We don&#39;t want that to happen. Content of the <code>/data</code> directory is ignored by the git, so none of your pictures or personal data should ever be published to git.</p>
<h1 id="features">Features</h1>
<ul>
<li>Dark mode, retina ready, legacy theme available.</li>
<li>Use BBcode in texts.</li>
<li>Make posts available for <strong>everyone</strong>, <strong>only you</strong> or just for <strong>friends</strong>.</li>
<li>Extra fields in post: <strong>Feeling</strong>, <strong>With</strong> and <strong>At</strong>.</li>
<li>Hide posts from timeline so they are visible only when you need them to be.</li>
<li>All pasted links will get preview with page title, description and image (can be configured proxy).</li>
<li>Upload images using button <em>(for mobile)</em>.</li>
<li>Upload images using drag &amp; drop <em>(drop it into textarea)</em>.</li>
<li>Upload images using CTRL + V <em>(paste it into textarea)</em>. </li>
<li>Highlight code in post using <code>[code]..your code..[/code]</code>.</li>
<li>Highlight your goal using <code>[goal]Text of your goal.[/goal]</code>.</li>
<li>Use tags in posts (allowed characters <code>A-Za-z0-9-_</code> terminated by space or EOL): <code>#song</code></li>
<li>Sort posts by hashtags: <code>http://blog/#tag=songs</code></li>
<li>Sort posts by location in url using: <code>http://blog/#loc=Vienna</code>.</li>
<li>Display posts from chosen date using (format YYYY-MM-DD or YYY-MM): <code>http://blog/#from=2017-06</code>.</li>
<li>Display posts to chosen date using (format YYYY-MM-DD or YYY-MM): <code>http://blog/#to=2017-06</code>.</li>
<li>Combine parameters in url using <code>&amp;</code>, e.g. show posts between dates: <code>http://blog/#from=2017-06&amp;to=2017-08</code>.</li>
</ul>
<h2 id="language-support">Language support</h2>
<p>Feel free to create new PR and add a new language. Specify language in config or in url: <code>http://blog/?hl=sk</code>.</p>
<ul>
<li>en - ðŸ‡¬ðŸ‡§ English</li>
<li>de - ðŸ‡©ðŸ‡ª German</li>
<li>sk - ðŸ‡¸ðŸ‡° Slovak</li>
<li>fr - ðŸ‡«ðŸ‡· French (thanks @Phundrak)</li>
</ul>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 02 May 2020</div><div class="column">Version: 1.0.0</div></div></div></footer><script src="/site.js"></script></body></html>