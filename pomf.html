<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Simple file uploading and sharing, source for the now shut down site Pomf.se."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body class="project"><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>pomf</h1><span class="subheading">Simple file uploading and sharing, source for the now shut down site Pomf.se.</span><div class="links"><a class="button button-outline" href="https://github.com/Pomf/Pomf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Pomf</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info statistics"><span class="stat pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>16 Apr 2020</span><span class="stat stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>410</span><span class="stat issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>17</span></div></div></div><div class="row"><div class="column"><div class="info tags"><a class="tag" href="/selfhosted-awesome-unlist/languages/php.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>PHP</a><a class="tag" href="/selfhosted-awesome-unlist/tags/file-sharing.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">15</span>file-sharing</a><a class="tag" href="/selfhosted-awesome-unlist/tags/file-upload.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">7</span>file-upload</a><a class="tag" href="/selfhosted-awesome-unlist/tags/files.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">2</span>files</a><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg><span class="count">1</span>pomf</span><a class="tag" href="/selfhosted-awesome-unlist/tags/upload.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">3</span>upload</a><a class="tag" href="/selfhosted-awesome-unlist/tags/file-sharing-and-synchronization.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">63</span>file sharing and synchronization</a><a class="tag" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">943</span>selfhosted</a></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><h1 id="pomf">Pomf</h1>
<p><a href="https://travis-ci.org/pomf/pomf"><img src="https://travis-ci.org/pomf/pomf.svg?branch=master" alt="Build
Status"></a>
<a href="https://david-dm.org/pomf/pomf"><img src="https://david-dm.org/pomf/pomf.svg" alt="Dependency
Status"></a>
<a href="https://david-dm.org/pomf/pomf#info=devDependencies"><img src="https://david-dm.org/pomf/pomf/dev-status.svg" alt="devDependency
Status"></a>
<a href="https://raw.githubusercontent.com/pomf/pomf/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="MIT
licensed"></a>
<a href="http://pomf.readthedocs.io/en/latest/?badge=latest"><img src="https://readthedocs.org/projects/pomf/badge/?version=latest" alt="Documentation Status"></a></p>
<p>Pomf is a simple file uploading and sharing platform.</p>
<h2 id="features">Features</h2>
<ul>
<li>One click uploading, no registration required</li>
<li>A minimal, modern web interface</li>
<li>Drag &amp; drop supported</li>
<li>Upload API with multiple response choices<ul>
<li>JSON</li>
<li>HTML</li>
<li>Text</li>
<li>CSV</li>
</ul>
</li>
<li>Supports <a href="https://getsharex.com/">ShareX</a> and other screenshot tools</li>
</ul>
<h3 id="demo">Demo</h3>
<p>See the real world example at <a href="https://safe.moe/">safe.moe</a>.</p>
<h2 id="requirements">Requirements</h2>
<p>Original development environment is Nginx + PHP5.5 + MySQL, but is confirmed to
work with Apache 2.4 and newer PHP versions. Should work with any other
PDO-compatible database.</p>
<h2 id="install">Install</h2>
<p>For the purposes of this guide, we won&#39;t cover setting up Nginx, PHP, MySQL,
Node, or NPM. So we&#39;ll just assume you already have them all running well.</p>
<h3 id="compiling">Compiling</h3>
<p>First you must get a copy of the pomf code.  To do so, clone this git repo.
You will need to recursively clone the repo to get the required PHP submodule,
and the optional user panel submodule.</p>
<pre><code class="language-bash">git clone --recursive https://github.com/pomf/pomf</code></pre>
<p>If you don&#39;t want either of the submodules run the following command,</p>
<pre><code class="language-bash">git clone https://github.com/pomf/pomf</code></pre>
<p>Assuming you already have Node and NPM working, compilation is easy. If you would like any additional submodules, or to exclude the default PHP submodule, use the <code>MODULES=&quot;...&quot;</code> variable.</p>
<p>Run the following commands to do so.</p>
<pre><code class="language-bash">cd pomf/
make
# alternatively
make MODULES=&quot;&quot; # compile no submodules; exclude the default php backend module
make MODULES=&quot;php moe&quot; # compile the php and moe submodules
#
make install</code></pre>
<p>OR</p>
<pre><code class="language-bash">make install DESTDIR=/desired/path/for/site</code></pre>
<p>After this, the pomf site is now compressed and set up inside <code>dist/</code>, or, if specified, <code>DESTDIR</code>.</p>
<h2 id="configuring">Configuring</h2>
<p>Front-end related settings, such as the name of the site, and maximum allowable
file size, are found in <code>dist.json</code>.  Changes made here will
only take effect after rebuilding the site pages.  This may be done by running
<code>make</code> from the root of the site directory.</p>
<p>Back-end related settings, such as database configuration, and path for uploaded files, are found in <code>static/php/includes/settings.inc.php</code>.  Changes made here take effect immediately.</p>
<p>If you intend to allow uploading files larger than 2 MB, you may also need to
increase POST size limits in <code>php.ini</code> and webserver configuration. For PHP,
modify <code>upload_max_filesize</code> and <code>post_max_size</code> values. The configuration
option for nginx webserver is <code>client_max_body_size</code>.</p>
<p>Example nginx configs can be found in confs/.</p>
<h2 id="using-sqlite-as-db-engine">Using SQLite as DB engine</h2>
<p>We need to create the SQLite database before it may be used by pomf.
Fortunately, this is incredibly simple.  </p>
<p>First create a directory for the database, e.g. <code>mkdir /var/db/pomf</code>.  
Then, create a new SQLite database from the schema, e.g. <code>sqlite3 /var/db/pomf/pomf.sq3 -init /home/pomf/sqlite_schema.sql</code>.
Then, finally, ensure the permissions are correct, e.g.</p>
<pre><code class="language-bash">chown nginx:nginx /var/db/pomf
chmod 0750 /var/db/pomf
chmod 0640 /var/db/pomf/pomf.sq3</code></pre>
<p>Finally, edit <code>php/includes/settings.inc.php</code> to indicate this is the database engine you would like to use.  Make the changes outlined below</p>
<pre><code class="language-php">define(&#39;POMF_DB_CONN&#39;, &#39;[stuff]&#39;); ---&gt; define(&#39;POMF_DB_CONN&#39;, &#39;sqlite:/var/db/pomf/pomf.sq3&#39;);
define(&#39;POMF_DB_USER&#39;, &#39;[stuff]&#39;); ---&gt; define(&#39;POMF_DB_USER&#39;, null);
define(&#39;POMF_DB_PASS&#39;, &#39;[stuff]&#39;); ---&gt; define(&#39;POMF_DB_PASS&#39;, null);</code></pre>
<p><em>NOTE: The directory where the SQLite database is stored, must be writable by the web server user</em></p>
<h3 id="apache">Apache</h3>
<p>If you are running Apache and want to compress your output when serving files,
add to your <code>.htaccess</code> file:</p>
<pre><code>AddOutputFilterByType DEFLATE text/html text/plain text/css application/javascript application/x-javascript application/json</code></pre><p>Remember to enable <code>deflate_module</code> and <code>filter_module</code> modules in your Apache
configuration file.</p>
<h3 id="migrating-from-mysql-to-sqlite">Migrating from MySQL to SQLite</h3>
<p> ,
Compared to SQLite, MySQL is relatively complicated to administer, brings in many unneeded dependencies, and consumes more resources.  Additonally, as a network service, poorly configured installations have the potential
to pose a security risk.</p>
<p>For these reasons, you may wish to use SQLite rather than MySQL.</p>
<p>Fortunately, it is incredibly simple to migrate your database.  This may be done on a live server, if you desire, and requires zero downtime.</p>
<p>The process described below involves running these commands on a live server.  Nothing done here affects your main site, until running the very last command, which is done after verifying there are no issues.  </p>
<p>No changes described here are destructive, and are easily reverted.  They only have the potential to cause uploading to fail gracefully, and will not affect downloading.</p>
<p>Run the following commands as root, to dump your database, and make a SQLite database with the contents.  </p>
<pre><code class="language-bash">mkdir /var/db/pomf
wget -O /tmp/m2s https://github.com/dumblob/mysql2sqlite/raw/master/mysql2sqlite.sh
mysqldump -u OLD_DB_USER -p OLD_DB_PASS pomf | sh /tmp/m2s | sqlite3 /var/db/pomf/sq3
rm /tmp/m2s
chown -R nginx:nginx /var/db/pomf #replace user as appropriate
chmod 0750 /var/db/pomf &amp;&amp; chmod 0640 /var/db/pomf/sq3</code></pre>
<p>Edit the file <code>php/includes/settings.inc.php</code>, in your <strong>source directory</strong>, making the changes outlined below.  Note, changing the second two lines is optional, as they are simply ignored when using SQLite.</p>
<pre><code class="language-php">define(&#39;POMF_DB_CONN&#39;, &#39;[stuff]&#39;); ---&gt; define(&#39;POMF_DB_CONN&#39;, &#39;sqlite:/var/db/pomf/pomf.sq3&#39;);
define(&#39;POMF_DB_USER&#39;, &#39;[stuff]&#39;); ---&gt; define(&#39;POMF_DB_USER&#39;, null);
define(&#39;POMF_DB_PASS&#39;, &#39;[stuff]&#39;); ---&gt; define(&#39;POMF_DB_PASS&#39;, null);</code></pre>
<p>Then, run <code>make DESTDIR=/path/to/main_site/testing_dir</code> (note the <em>testing_dir</em> component) to rebuild the website, and copy it into place, in a new testing subdirectory.</p>
<p>Now, navigate to this subdirectory in your web browser, e.g. <a href="http://example.com/testing_dir">http://example.com/testing_dir</a>, and verify that uploading works fine.  If so, excellent!  You may rerun <code>make DESTDIR=/path/to/main_site</code> to update your main site.</p>
<p>All done! You may disable or uninstall MySQL if you wish.</p>
<h2 id="getting-help">Getting help</h2>
<p>The Pomf community gathers on IRC. You can also email the maintainer for help.</p>
<ul>
<li>IRC (users): <code>#pomfret</code> on Rizon (<code>irc.rizon.net</code>)</li>
</ul>
<h2 id="contributing">Contributing</h2>
<p>We&#39;d really like if you can take some time to make sure your coding style is
consistent with the project. Pomf follows <a href="http://www.php-fig.org/psr/psr-2/">PHP
PSR-2</a> and <a href="https://github.com/airbnb/javascript/tree/es5-deprecated/es5">Airbnb JavaScript
(ES5)</a> (<code>airbnb/legacy</code>)
coding style guides. We use ESLint and PHPCS tools to enforce these standards.</p>
<p>You can also help by sending us feature requests or writing documentation and
tests.</p>
<p>Thanks!</p>
<h2 id="credits">Credits</h2>
<p>Pomf was created by Eric Johansson and Peter Lejeck for
<a href="http://pomf.se/">Pomf.se</a>. The software is currently maintained by the
community.</p>
<h2 id="license">License</h2>
<p>Pomf is free software, and is released under the terms of the Expat license. See
<code>LICENSE</code>.</p>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 03 May 2020</div><div class="column">Version: 1.1.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>