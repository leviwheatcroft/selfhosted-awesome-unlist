<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Pastebin inspired from project pb and hastebin, with an API and a SQL-based backend."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body class="project"><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>pbnh</h1><span class="subheading">Pastebin inspired from project pb and hastebin, with an API and a SQL-based backend.</span><div class="links"><a class="button button-outline" href="https://github.com/bhanderson/pbnh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>pbnh</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info statistics"><span class="stat pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>27 Oct 2018</span><span class="stat stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>11</span><span class="stat issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>8</span></div></div></div><div class="row"><div class="column"><div class="info tags"><a class="tag" href="/selfhosted-awesome-unlist/tags/javascript.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">199</span>javascript</a><a class="tag" href="/selfhosted-awesome-unlist/tags/pastebins.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">22</span>pastebins</a><a class="tag" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">943</span>selfhosted</a><a class="tag" href="/selfhosted-awesome-unlist/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">327</span>docker</a></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><h1 id="pbnh">pbnh</h1>
<h1 id="this-is-no-longer-valid-with-this-branch">THIS IS NO LONGER VALID WITH THIS BRANCH</h1>
<p><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/license-MIT-yellow.svg" alt="MIT License"></a>
<a href="https://travis-ci.org/bhanderson/pbnh"><img src="https://img.shields.io/travis/bhanderson/pbnh.svg" alt="Build Status"></a>
<a href="https://coveralls.io/github/bhanderson/pbnh?branch=master"><img src="https://coveralls.io/repos/github/bhanderson/pbnh/badge.svg?branch=master" alt="Coverage Status"></a></p>
<p>pbnh is our implementation of a pastebin server using flask and postgres or sqlite</p>
<p>It is highly derived from <a href="https://github.com/silverp1">silverp1&#39;s</a> and <a href="https://github.com/buhman">buhman&#39;s</a> project <a href="https://github.com/ptpb/pb">pb</a> and they deserve the recognition for this idea.</p>
<p>The syntax highlighting is done using <a href="https://github.com/codemirror/codemirror">codemirrors</a> javascript library.</p>
<p>The icons are from <a href="https://fortawesome.github.io/Font-Awesome/">Font Awesome</a></p>
<p>pbnh requires at least Python 3.3</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#pbnh">pbnh</a></li>
<li><a href="#table-of-contents">Table of contents</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#content">Content</a></li>
<li><a href="#sunset">Sunset</a></li>
<li><a href="#mime">Mime</a></li>
</ul>
</li>
<li><a href="#rendering">Render</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#dependency">Dependency</a></li>
</ul>
<h2 id="installation">Installation</h2>
<p>Note, psycopg2 is a C extension module for postgres. You can grab the dependencies by either installing python-psycopg2 from your package manager, or grab libpq-dev as well as python3-dev and gcc if you don&#39;t already have them.</p>
<p>To install the pbnh package:</p>
<pre><code>$ git clone https://github.com/bhanderson/pbnh.git
$ cd pbnh
$ pip install .</code></pre><p><a href="https://asciinema.org/a/75sd1vwb395kp997phsowfcvs"><img src="https://asciinema.org/a/75sd1vwb395kp997phsowfcvs.png" alt="asciicast"></a></p>
<h2 id="configuration">Configuration</h2>
<p>To configure pbnh, copy the sample config to ~/.config/pbnh/config.yml and edit it as desired. You can also use the default config in conf.py.</p>
<p>To configure postgres (assuming debian/ubuntu, other distros should be similar):</p>
<pre><code># apt install postgres
# su - postgres
$ createuser -s $USERNAME
python3 db/createdb.py</code></pre><h2 id="configure-using-docker-compose">Configure using docker-compose</h2>
<ul>
<li>Install docker-compose by following the instructions here:
<a href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></li>
<li>Copy <code>sample_config.yml</code> to <code>~/.config/pbnh.yml</code> and configure as desired</li>
<li>Build the container with <code>docker-compose build</code></li>
<li>Launch the container with <code>docker-compose up</code></li>
<li>The webui should be available at <code>localhost:5000</code></li>
</ul>
<h2 id="usage">Usage</h2>
<p>You can create pastes with the webui or though the cli using curl. Currently the only way to upload anything other than text or a redirect is through the cli.</p>
<p>Curl has an option for a form id, you can use c or content to specify the contents of a paste.</p>
<pre><code>curl -F content=@file.txt servername.com</code></pre><p>Or you can cat a file</p>
<pre><code>cat file.txt | curl -F c=@- servername.com</code></pre><p><a href="https://asciinema.org/a/8q5x4a0wrhtm7e2feok4b9i67"><img src="https://asciinema.org/a/8q5x4a0wrhtm7e2feok4b9i67.png" alt="asciicast"></a>
We also support strings</p>
<pre><code>curl -F content=&quot;hello world!&quot; servername.com</code></pre><p>To upload a redirect change the form id to r</p>
<pre><code>curl -F r=&quot;https://www.google.com&quot; servername.com</code></pre><p>There are three different inputs allowed in a curl command they are content, sunset, and mime. Sunset and Mime are optional.</p>
<h3 id="content-or-c">content or c</h3>
<p>The content is exactly what it sounds like. The content of the file or the string data you want to paste and can be seen in the examples above.</p>
<h3 id="redirect-or-r">redirect or r</h3>
<p>You can submit a url to be a 302 redirect by specifying the form as r or redirect</p>
<h3 id="sunset">sunset</h3>
<p>The sunset is the amount of time you want this paste to be available. If sunset is specified you may specify for it to last a maximum of 24 hours. If unspecified the sunset value is 0 and the paste will not be removed.</p>
<p>Currently there is no support for deleting pastes after you create them with a sunset. The sunset is set but no process is cleaning them up.</p>
<pre><code>curl -F content=@file.txt -F sunset=10 servername.com</code></pre><h3 id="mime">mime</h3>
<p>The mime type is the type of file. If you want automatic syntax highlighting through the webui or want an image to be displayed you can set the mimetype.
The default is plain text, pbnh uses <a href="https://github.com/ahupp/python-magic">python-magic</a> to attempt to guess the buffer mimetype if none is specified.
A list of mimetypes can be found <a href="http://www.freeformatter.com/mime-types-list.html">here</a>. Only specify the second half of the mimetype.
For example for the mimetype &#39;application/pdf&#39; only specify pdf.</p>
<pre><code>curl -F content=@file.txt -F mime=plain servername.com</code></pre><h2 id="rendering">Rendering</h2>
<p>You can render files as the browser would want to see them by specifying .<extension> in the url
Currently things we render with javascript are</p>
<ul>
<li>Markdown (.md)</li>
<li>RST (.rst)</li>
<li>asciinema (.asciinema)<h2 id="tests">Tests</h2>
To install the dependencies required for running tests, simply run<pre><code>pip install -r tests_require.txt</code></pre>Tests can be ran by running nosetests in the pbnh directory or by specifying a specific test</li>
</ul>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 13 May 2020</div><div class="column">Version: 1.2.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>