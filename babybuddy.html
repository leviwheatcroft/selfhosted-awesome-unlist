<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Helps caregivers track baby sleep, feedings, diaper changes, and tummy time."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body class="project"><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>babybuddy</h1><span class="subheading">Helps caregivers track baby sleep, feedings, diaper changes, and tummy time.</span><div class="links"><a class="button button-outline" href="https://github.com/cdubz/babybuddy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Baby Buddy</a><a class="button button-outline" href="https://babybuddy.herokuapp.com/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-box"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>Demo</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info statistics"><span class="stat pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>23 Apr 2020</span><span class="stat stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>889</span><span class="stat issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>19</span></div></div></div><div class="row"><div class="column"><div class="info tags"><a class="tag" href="/selfhosted-awesome-unlist/tags/javascript.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">199</span>javascript</a><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg><span class="count">1</span>baby</span><a class="tag" href="/selfhosted-awesome-unlist/tags/dashboard.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">12</span>dashboard</a><a class="tag" href="/selfhosted-awesome-unlist/tags/django.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">30</span>django</a><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg><span class="count">1</span>infant</span><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg><span class="count">1</span>newborn</span><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg><span class="count">1</span>parents</span><a class="tag" href="/selfhosted-awesome-unlist/tags/python.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">116</span>python</a><a class="tag" href="/selfhosted-awesome-unlist/tags/self-hosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">77</span>self-hosted</a><a class="tag" href="/selfhosted-awesome-unlist/tags/tracker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">2</span>tracker</a><a class="tag" href="/selfhosted-awesome-unlist/tags/personal-dashboards.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">13</span>personal dashboards</a><a class="tag" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">943</span>selfhosted</a><a class="tag" href="/selfhosted-awesome-unlist/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">327</span>docker</a></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><img src="babybuddy/static_src/logo/icon.png" height="150" align="left">

<h1 id="baby-buddy">Baby Buddy</h1>
<p><a href="https://opensource.org/licenses/BSD-2-Clause"><img src="https://img.shields.io/badge/License-BSD%202--Clause-orange.svg" alt="License"></a>
<a href="https://gitter.im/babybuddy/Lobby"><img src="https://img.shields.io/gitter/room/nwjs/nw.js.svg" alt="Gitter"></a></p>
<p>A buddy for babies! Helps caregivers track sleep, feedings, diaper changes, 
tummy time and more to learn about and predict baby&#39;s needs without (<em>as much</em>)
guess work.</p>
<p><img src="screenshot.png" alt="Baby Buddy desktop view"></p>
<p><img src="screenshot_mobile.png" alt="Baby Buddy mobile views"></p>
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#demo">Demo</a></li>
<li><a href="#deployment">Deployment</a><ul>
<li><a href="#aws-elastic-beanstalk">AWS Elastic Beanstalk</a></li>
<li><a href="#docker">Docker</a></li>
<li><a href="#heroku">Heroku</a></li>
<li><a href="#manual">Manual</a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#languages">Languages</a></li>
<li><a href="#importexport">Import/Export</a><ul>
<li><a href="#export">Export</a></li>
<li><a href="#import">Import</a></li>
</ul>
</li>
<li><a href="#api">API</a><ul>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#get-method"><code>GET</code> Method</a></li>
<li><a href="#options-method"><code>OPTIONS</code> Method</a></li>
<li><a href="#post-method"><code>POST</code> Method</a></li>
<li><a href="#patch-method"><code>PATCH</code> Method</a></li>
<li><a href="#delete-method"><code>DELETE</code> Method</a></li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
</ul>
<h2 id="demo">Demo</h2>
<p>A <a href="http://demo.baby-buddy.net">demo of Baby Buddy</a> is available on Heroku.
The demo instance resets every hour. Login credentials are:</p>
<ul>
<li>Username: <code>admin</code></li>
<li>Password: <code>admin</code></li>
</ul>
<h2 id="deployment">Deployment</h2>
<p>The default user name and password for Baby Buddy is <code>admin</code>/<code>admin</code>. For any
deployment, <strong>log in and change the default admin password immediately</strong>.</p>
<p>Many of Baby Buddy&#39;s configuration settings can be controlled using environment
variables - see <a href="#configuration">Configuration</a> for detailed information.</p>
<h3 id="aws-elastic-beanstalk">AWS Elastic Beanstalk</h3>
<p>A basic <a href="https://aws.amazon.com/elasticbeanstalk/">Elastic Beanstalk</a>
configuration is provided in <code>.ebextensions/babybuddy.config</code>.   The steps
below are a rough guide to deployment. See <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-apps.html">Working with Python</a>
for detailed information.</p>
<ol>
<li><p>Clone/download the Baby Buddy repo</p>
<pre><code> git clone https://github.com/babybuddy/babybuddy.git</code></pre></li>
<li><p>Enter the cloned/downloaded directory</p>
<pre><code> cd babybuddy</code></pre></li>
<li><p>Set (at least) the <code>SECRET_KEY</code> environment value in <code>.ebextensions/babybuddy.config</code></p>
<p> *See <a href="#configuration">Configuration</a> for other settings that can be
 controlled by environment variables.</p>
</li>
<li><p><a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html">Create an IAM user</a> in AWS with EB, EC2, RDS and S3 privileges.</p>
</li>
<li><p>Initialize the Elastic Bean application (using the IAM user from the previous step)</p>
<pre><code> eb init -p python-3.6</code></pre></li>
<li><p>Create/deploy the environment! :rocket:</p>
<pre><code> eb create -db -db.engine postgres</code></pre></li>
</ol>
<p>The create command will also do an initial deployment. Run <code>eb deploy</code> to
redeploy the app (e.g. if there are errors or settings are changed).</p>
<h3 id="docker">Docker</h3>
<p>A Docker deployment requires <a href="https://www.docker.com/">Docker Engine</a> v18.06.0+
and <a href="https://docs.docker.com/compose/">Docker Compose</a> v1.22.0+ to create two
containers: one for the database and one for the application.</p>
<p>The example <code>docker-compose.example.yml</code> file provided in this repository is
intended for production deployments. Baby Buddy is deployed to Docker Hub as
<a href="https://hub.docker.com/r/babybuddy/babybuddy">babybuddy/babybuddy</a> so this is
the only file needed for a Docker deployment with Docker Compose.</p>
<ol>
<li><p>Copy the contents of <code>docker-compose.example.yml</code> as <code>docker-compose.yml</code>
and set, at least, the <code>ALLOWED_HOSTS</code> and <code>SECRET_KEY</code> variables under
<code>services:app:environment</code>.</p>
<p> <em>See <a href="#configuration">Configuration</a> for other settings that can be
 controlled by environment variables.</em></p>
</li>
<li><p>Build/run the application</p>
<pre><code> docker-compose up -d</code></pre></li>
</ol>
<p>The app should now be locally available at
<a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a>. See
<a href="https://docs.docker.com/get-started/">Docker&#39;s &quot;Get Started&quot; documentation</a>
for detailed information about deployment methods with Docker.</p>
<h3 id="heroku">Heroku</h3>
<p><a href="https://heroku.com/deploy"><img src="https://www.herokucdn.com/deploy/button.svg" alt="Deploy"></a></p>
<p>For manual deployments to Heroku without using the deploy button, make sure to
create the following settings before pushing:</p>
<pre><code>heroku config:set DJANGO_SETTINGS_MODULE=babybuddy.settings.heroku
heroku config:set SECRET_KEY=&lt;CHANGE TO SOMETHING RANDOM&gt;
heroku config:set DISABLE_COLLECTSTATIC=1
heroku config:set TIME_ZONE=&lt;DESIRED DEFAULT TIMEZONE&gt;</code></pre><p>See <a href="#configuration">Configuration</a> for other settings that can be controlled
by <code>heroku config:set</code>.</p>
<p>And after an initial push, execute the following commands:</p>
<pre><code>heroku run python manage.py migrate
heroku run python manage.py createcachetable</code></pre><h3 id="manual">Manual</h3>
<p>There are many ways to deploy Baby Buddy manually to any server/VPS. The basic 
requirements are Python, a web server, an application server, and a database.</p>
<h4 id="requirements">Requirements</h4>
<ul>
<li>Python 3.6+, pip, pipenv</li>
<li>Web server (<a href="http://nginx.org/">nginx</a>, <a href="http://httpd.apache.org/">Apache</a>, etc.)</li>
<li>Application server (<a href="http://projects.unbit.it/uwsgi">uwsgi</a>, <a href="http://gunicorn.org/">gunicorn</a>, etc.)</li>
<li>Database (<a href="https://sqlite.org/">sqlite</a>, <a href="https://www.postgresql.org/">Postgres</a>, <a href="https://www.mysql.com/">MySQL</a>, etc.)</li>
</ul>
<h4 id="example-deployment">Example deployment</h4>
<p><em>This example assumes a 512MB VPS instance with Ubuntu 18.04.</em> It uses
Python 3.6+, nginx, uwsgi and sqlite and should be sufficient for a few users
(e.g. two parents and 1+ child).</p>
<ol>
<li><p>Install system packages</p>
<pre><code> sudo apt-get install python3 python3-pip nginx uwsgi uwsgi-plugin-python3 git libopenjp2-7-dev</code></pre></li>
<li><p>Default python3 to python for this session</p>
<pre><code> alias python=python3</code></pre></li>
<li><p>Install pipenv</p>
<pre><code> sudo -H pip3 install pipenv</code></pre></li>
<li><p>Set up directories and files</p>
<pre><code> sudo mkdir /var/www/babybuddy
 sudo chown user:user /var/www/babybuddy
 mkdir -p /var/www/babybuddy/data/media
 git clone https://github.com/babybuddy/babybuddy.git /var/www/babybuddy/public</code></pre></li>
<li><p>Move in to the application folder</p>
<pre><code> cd /var/www/babybuddy/public</code></pre></li>
<li><p>Set pipenv to install locally.</p>
<pre><code> export PIPENV_VENV_IN_PROJECT=1</code></pre></li>
<li><p>Initiate and enter the Python environment</p>
<pre><code> pipenv install --three
 pipenv shell</code></pre><p> <strong>Note:</strong> Python dependencies are locked on x86-64 architecture. Installs 
 on other architectures (like Raspberry Pi&#39;s ARM) may result in a 
 <code>THESE PACKAGES DO NOT MATCH THE HASHES FROM Pipfile.lock!</code> error. Add 
 the <code>--skip-lock</code> flag to the above command to suppress this error 
 (i.e.: <code>pipenv install --three --dev --skip-lock</code>).</p>
</li>
<li><p>Create a production settings file and set the <code>SECRET_KEY</code> and <code>ALLOWED_HOSTS</code> values</p>
<pre><code> cp babybuddy/settings/production.example.py babybuddy/settings/production.py
 editor babybuddy/settings/production.py</code></pre></li>
<li><p>Initiate the application</p>
<pre><code> export DJANGO_SETTINGS_MODULE=babybuddy.settings.production
 python manage.py migrate
 python manage.py createcachetable</code></pre></li>
<li><p>Set appropriate permissions on the database and data folder</p>
<pre><code> sudo chown -R www-data:www-data /var/www/babybuddy/data
 sudo chmod 640 /var/www/babybuddy/data/db.sqlite3
 sudo chmod 750 /var/www/babybuddy/data</code></pre></li>
<li><p>Create and configure the uwsgi app</p>
<pre><code> sudo editor /etc/uwsgi/apps-available/babybuddy.ini</code></pre><p> Example config:</p>
<pre><code> [uwsgi]
 plugins = python3
 project = babybuddy
 base_dir = /var/www/babybuddy

 chdir = %(base_dir)/public
 virtualenv = %(chdir)/.venv
 module =  %(project).wsgi:application
 env = DJANGO_SETTINGS_MODULE=%(project).settings.production
 master = True
 vacuum = True</code></pre><p> See the <a href="http://uwsgi-docs.readthedocs.io/en/latest/">uWSGI documentation</a>
 for more advanced configuration details.</p>
</li>
<li><p>Symlink config and restart uWSGI:</p>
<pre><code> sudo ln -s /etc/uwsgi/apps-available/babybuddy.ini /etc/uwsgi/apps-enabled/babybuddy.ini
 sudo service uwsgi restart</code></pre></li>
<li><p>Create and configure the nginx server</p>
<pre><code> sudo editor /etc/nginx/sites-available/babybuddy</code></pre><p> Example config:</p>
<pre><code> upstream babybuddy {
     server unix:///var/run/uwsgi/app/babybuddy/socket;
 }

 server {
     listen 80;
     server_name babybuddy.example.com;

     location / {
         uwsgi_pass babybuddy;
         include uwsgi_params;
     }

     location /media {
         alias /var/www/babybuddy/data/media;
     }
 }</code></pre><p> See the <a href="https://nginx.org/en/docs/">nginx documentation</a> for more advanced
 configuration details.</p>
</li>
<li><p>Symlink config and restart NGINX:</p>
<pre><code> sudo ln -s /etc/nginx/sites-available/babybuddy /etc/nginx/sites-enabled/babybuddy
 sudo service nginx restart</code></pre></li>
<li><p>That&#39;s it (hopefully)! :tada:</p>
</li>
</ol>
<h2 id="configuration">Configuration</h2>
<p>Environment variables can be used to define a number of configuration settings.
Baby Buddy will check the application directory structure for an <code>.env</code> file or
take these variables from the system environment. <strong>System environment variables
take precedence over the contents of an <code>.env</code> file.</strong></p>
<ul>
<li><a href="#allowed_hosts"><code>ALLOWED_HOSTS</code></a></li>
<li><a href="#allow_uploads"><code>ALLOW_UPLOADS</code></a></li>
<li><a href="#aws_access_key_id"><code>AWS_ACCESS_KEY_ID</code></a></li>
<li><a href="#aws_secret_access_key"><code>AWS_SECRET_ACCESS_KEY</code></a></li>
<li><a href="#aws_storage_bucket_name"><code>AWS_STORAGE_BUCKET_NAME</code></a></li>
<li><a href="#debug"><code>DEBUG</code></a></li>
<li><a href="#nap_start_max"><code>NAP_START_MAX</code></a></li>
<li><a href="#nap_start_min"><code>NAP_START_MIN</code></a></li>
<li><a href="#secret_key"><code>SECRET_KEY</code></a></li>
<li><a href="#time_zone"><code>TIME_ZONE</code></a></li>
</ul>
<h3 id="allowed_hosts"><code>ALLOWED_HOSTS</code></h3>
<p><em>Default: * (any)</em></p>
<p>This option may be set to a single host or comma-separated list of hosts
(without spaces). This should <em>always</em> be set to a specific host or hosts in
production deployments.</p>
<p>See also: <a href="https://docs.djangoproject.com/en/3.0/ref/settings/#allowed-hosts">Django&#39;s documentation on the ALLOWED_HOSTS setting</a></p>
<h3 id="allow_uploads"><code>ALLOW_UPLOADS</code></h3>
<p><em>Default: True</em></p>
<p>Whether or not to allow uploads (e.g. of Child photos). For some deployments
(AWS, Heroku) this setting will default to False due to the lack of available
persistent storage.</p>
<h3 id="aws_access_key_id"><code>AWS_ACCESS_KEY_ID</code></h3>
<p><em>Default: None</em></p>
<p>Required to access your AWS S3 bucket, should be uniquely generated per bucket
for security.</p>
<p>See also: <a href="#aws_storage_bucket_name"><code>AWS_STORAGE_BUCKET_NAME</code></a></p>
<h3 id="aws_secret_access_key"><code>AWS_SECRET_ACCESS_KEY</code></h3>
<p><em>Default: None</em></p>
<p>Required to access your AWS S3 bucket, should be uniquely generated per bucket
for security.</p>
<p>See also: <a href="#aws_storage_bucket_name"><code>AWS_STORAGE_BUCKET_NAME</code></a></p>
<h3 id="aws_storage_bucket_name"><code>AWS_STORAGE_BUCKET_NAME</code></h3>
<p><em>Default: None</em></p>
<p>If you would like to use AWS S3 for storage on ephemeral storage platforms like
Heroku you will need to create a bucket and add it&#39;s name. See django-storages&#39;
<a href="https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html">Amazon S3 documentation</a>.</p>
<h3 id="debug"><code>DEBUG</code></h3>
<p><em>Default: False</em></p>
<p>When in debug mode, Baby Buddy will print much more detailed error information
for exceptions. This setting should be <em>False</em> in production deployments.</p>
<p>See also <a href="https://docs.djangoproject.com/en/3.0/ref/settings/#debug">Django&#39;s documentation on the DEBUG setting</a>.</p>
<h3 id="nap_start_max"><code>NAP_START_MAX</code></h3>
<p><em>Default: 18:00</em></p>
<p>The maximum <em>start</em> time (in the instance&#39;s time zone) before which a sleep
entry is consider a nap. Expects the 24-hour format %H:%M.</p>
<h3 id="nap_start_min"><code>NAP_START_MIN</code></h3>
<p><em>Default: 06:00</em></p>
<p>The minimum <em>start</em> time (in the instance&#39;s time zone) after which a sleep
entry is considered a nap. Expects the 24-hour format %H:%M.</p>
<h3 id="secret_key"><code>SECRET_KEY</code></h3>
<p><em>Default: None</em></p>
<p>A random, unique string must be set as the &quot;secret key&quot; before Baby Buddy can
be deployed and run.</p>
<p>See also <a href="https://docs.djangoproject.com/en/3.0/ref/settings/#secret-key">Django&#39;s documentation on the SECRET_KEY setting</a>.</p>
<h3 id="time_zone"><code>TIME_ZONE</code></h3>
<p><em>Default: Etc/UTC</em></p>
<p>The default time zone to use for the instance. See <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">List of tz database time zones</a>
for all possible values. This value can be overridden per use from the user
settings form.</p>
<h2 id="languages">Languages</h2>
<p>Baby Buddy includes translation support as of v1.2.2. Language can be set on a
per-user basis from the user settings page (<code>/user/settings/</code>). See 
<a href="CONTRIBUTING.md#translation">CONTRIBUTING.md</a> for information about how to
create/update translations.</p>
<h3 id="available-languages">Available languages</h3>
<p>:us: English (U.S.) <em>(base)</em></p>
<p>:fr: French</p>
<p>:de: German</p>
<p>:mexico: :es: Spanish</p>
<p>:sweden: Swedish</p>
<p>:tr: Turkish</p>
<h2 id="importexport">Import/Export</h2>
<p>Baby Buddy uses the <a href="https://django-import-export.readthedocs.io/">django-import-export application</a>
to provide import and export functionality.</p>
<h3 id="export">Export</h3>
<p>Export actions are accessible from Baby Buddy&#39;s &quot;Database Admin&quot; area (the
Django admin interface). For example, to export all diaper change entries from
Baby Buddy as an Excel file:</p>
<ol>
<li><p>Log in as a user with &quot;staff&quot; access.</p>
</li>
<li><p>From the user menu, click &quot;Database Admin&quot; under the &quot;Site&quot; heading.</p>
</li>
<li><p>Click &quot;Diaper Changes&quot; in the list of data types.</p>
</li>
<li><p>Click the &quot;Export&quot; button above the filters list on the right side of the
screen.</p>
</li>
<li><p>Select the &quot;xlxs&quot; format and click &quot;Submit&quot;</p>
</li>
</ol>
<p>Note: any applied filters will also filter the exported entries. Alternatively,
on the Diaper Change list screen (step 3 above), it is possible to select one
or many individual records and select &quot;Export selected Diaper Changes&quot; from the
&quot;Actions&quot; list.</p>
<h3 id="import">Import</h3>
<p>Import actions are accessible from Baby Buddy&#39;s &quot;Database Admin&quot; area (the
Django admin interface). From the list of entry types in the Database Admin,
select the type to import and click the &quot;Import&quot; button on the list page. The
import screen for a particular type will list the fields generally expected to
be present for an import. Multiple file types -- including csv, xlsx, etc. --
are supported for the import.</p>
<p>The import pages do not provide <em>detailed</em> information about the required data
and formats. When an import is attempted, all rows will be checked for errors
and any issues will be reported on screen and will need to be resolved before
the import can be performed.</p>
<p>See the <a href="core/tests/import">example import files</a> used for tests to get an idea
of the expected data format.</p>
<h2 id="api">API</h2>
<p>Baby Buddy uses the <a href="https://www.django-rest-framework.org/">Django REST Framework</a>
(DRF) to provide a REST API.</p>
<p>The only requirement for (most) requests is that the <code>Authorization</code> header is
set as described in the <a href="#authentication">Authentication</a> section. The one
exception is the <code>/api</code> endpoint, which lists all available endpoints.</p>
<p>Currently, the following endpoints are available for <code>GET</code>, <code>OPTIONS</code>, and
<code>POST</code> requests:</p>
<ul>
<li><code>/api/children/</code></li>
<li><code>/api/changes/</code> (Diaper Changes)</li>
<li><code>/api/feedings/</code></li>
<li><code>/api/notes/</code></li>
<li><code>/api/sleep/</code></li>
<li><code>/api/temperature/</code></li>
<li><code>/api/timers/</code></li>
<li><code>/api/tummy-times/</code></li>
<li><code>/api/weight/</code></li>
</ul>
<h3 id="authentication">Authentication</h3>
<p>By default, the <a href="https://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication">TokenAuthentication</a>
and <a href="https://www.django-rest-framework.org/api-guide/authentication/#sessionauthentication">SessionAuthentication</a>
classes are enabled. Session authentication covers local API requests made by
the application itself. Token authentication allows external requests to be
made.</p>
<p>:exclamation: <strong>In a production environment, token authentication should only
be used for API calls to an <code>https</code> endpoint.</strong> :exclamation:</p>
<p>Each user is automatically assigned an API key that can be used for token
authentication. This key can be found on the User Settings page for the logged
in the user. To use a key for an API request, set the request <code>Authorization</code>
header to <code>Token &lt;user-key&gt;</code>. E.g.</p>
<pre><code>Authorization: Token 2h23807gd72h7hop382p98hd823dw3g665g56</code></pre><p>If the <code>Authorization</code> header is not set or the key is not valid, the API will
return <code>403 Forbidden</code> with additional details in the response body.</p>
<h3 id="get-method"><code>GET</code> Method</h3>
<h4 id="request">Request</h4>
<p>The <code>limit</code> and <code>offset</code> request parameters can be used to limit
and offset the results set respectively. For example, the following request
will return five diaper changes starting from the 10th diaper change entry:</p>
<pre><code>curl -X GET &#39;https://[...]/api/changes/?limit=5&amp;offset=10&#39; -H &#39;Authorization: Token [...]&#39;
{
    &quot;count&quot;: &lt;int&gt;,
    &quot;next&quot;: &quot;https://[...]/api/changes/?limit=5&amp;offset=15&quot;,
    &quot;previous&quot;: &quot;https://[...]/api/changes/?limit=5&amp;offset=5&quot;,
    &quot;results&quot;: [...]
}</code></pre><p>Field-based filters for specific endpoints can be found the in the <code>filters</code>
field of the <code>OPTIONS</code> response for specific endpoints.</p>
<p>Single entries can also be retrieved by adding the ID (or in the case of a 
Child entry, the slug) of a particular entry:</p>
<pre><code> curl -X GET https://[...]/api/children/gregory-hill/ -H &#39;Authorization: Token [...]&#39;
 {
    &quot;id&quot;:3,
    &quot;first_name&quot;:&quot;Gregory&quot;,
    &quot;last_name&quot;:&quot;Hill&quot;,
    &quot;birth_date&quot;:&quot;2020-02-11&quot;,
    &quot;slug&quot;:&quot;gregory-hill&quot;,
    &quot;picture&quot;:null
}
curl -X GET https://[...]/api/sleep/1/ -H &#39;Authorization: Token [...]&#39;
{
 &quot;id&quot;:480,
 &quot;child&quot;:3,
 &quot;start&quot;:&quot;2020-03-12T21:25:28.916016-07:00&quot;,
 &quot;end&quot;:&quot;2020-03-13T01:34:28.916016-07:00&quot;,
 &quot;duration&quot;:&quot;04:09:00&quot;,
 &quot;nap&quot;:false
}</code></pre><h4 id="response">Response</h4>
<p>Returns JSON data in the response body in the following format:</p>
<pre><code>{
    &quot;count&quot;:&lt;int&gt;,
    &quot;next&quot;:&lt;url&gt;,
    &quot;previous&quot;:&lt;url&gt;,
    &quot;results&quot;:[{...}]
}</code></pre><ul>
<li><code>count</code>: Total number of records (<em>in the database</em>, not just the response).</li>
<li><code>next</code>: URL for the next set of results.</li>
<li><code>previous</code>: URL for the previous set of results.</li>
<li><code>results</code>: An array of the results of the request.</li>
</ul>
<p>For single entries, returns JSON data in the response body keyed by model field
names. This will vary between models.</p>
<h3 id="options-method"><code>OPTIONS</code> Method</h3>
<h4 id="request-1">Request</h4>
<p>All endpoints will respond to an <code>OPTIONS</code> request with detailed information
about the endpoint&#39;s purpose, parameters, filters, etc.</p>
<h4 id="response-1">Response</h4>
<p>Returns JSON data in the response body describing the endpoint, available
options for <code>POST</code> requests, and available filters for <code>GET</code> requests. The
following example describes the <code>/api/children</code> endpoint:</p>
<pre><code>{
    &quot;name&quot;: &quot;Child List&quot;,
    &quot;renders&quot;: [
        &quot;application/json&quot;,
        &quot;text/html&quot;
    ],
    &quot;parses&quot;: [
        &quot;application/json&quot;,
        &quot;application/x-www-form-urlencoded&quot;,
        &quot;multipart/form-data&quot;
    ],
    &quot;actions&quot;: {
        &quot;POST&quot;: {
            &quot;id&quot;: {
                &quot;type&quot;: &quot;integer&quot;,
                &quot;required&quot;: false,
                &quot;read_only&quot;: true,
                &quot;label&quot;: &quot;ID&quot;
            },
            [...]
        }
    },
    &quot;filters&quot;: [
        &quot;first_name&quot;,
        &quot;last_name&quot;,
        &quot;slug&quot;
    ]
}</code></pre><h3 id="post-method"><code>POST</code> Method</h3>
<h4 id="request-2">Request</h4>
<p>To add new entries for a particular endpoint, send a <code>POST</code> request with the
entry data in JSON format in the request body. The <code>Content-Type</code> header for
<code>POST</code> request must be set to <code>application/json</code>.</p>
<p>Regular sanity checks will be performed on relevant data. See the <code>OPTIONS</code>
response for a particular endpoint for details on required fields and data
formats.</p>
<h4 id="timer-field">Timer Field</h4>
<p>The &quot;timer&quot; field is a special field available for <code>POST</code> operations to model
endpoints supporting duration (Feeding, Sleep, Tummy Time). When the &quot;timer&quot;
field is set in the request, the <code>start</code> and <code>end</code> fields will be filled in
automatically using the <code>start</code> and <code>end</code> values <em>from the Timer</em> (the Timer
will be stopped if it is currently running).</p>
<p>Additionally, if the Timer has a Child relationship, the <code>child</code> field will be
filled in automatically use the <code>child</code> value from the Timer.</p>
<p>If the &quot;timer&quot; field is set, it&#39;s values will <strong>always override</strong> the relevant
fields in the request. E.g. if a <code>POST</code> request is sent with both the <code>timer</code>
and <code>end</code> fields, the value for the <code>end</code> field will be ignored and replaced by
the Timer&#39;s <code>end</code> value. The same applies for <code>start</code> and <code>child</code>. These fields
can all be left out of the request when the Timer is provided, otherwise they
are required fields.</p>
<h4 id="response-2">Response</h4>
<p>Returns JSON data in the response body describing the added/updated instance or
error details if errors exist. Errors are keyed by either the field in error or
the general string <code>non_field_errors</code> (usually when validation involves
multiple fields).</p>
<h3 id="patch-method"><code>PATCH</code> Method</h3>
<h4 id="request-3">Request</h4>
<p>To update existing entries, send a <code>PATCH</code> request to the single entry endpoint
for the entry to be updated. The <code>Content-Type</code> header for <code>PATCH</code> request must
be set to <code>application/json</code>. For example, to update a Diaper Change entry with
ID 947 to indicate a &quot;wet&quot; diaper only:</p>
<pre><code>curl -X PATCH \
    -H &#39;Authorization: Token [...]&#39; \
    -H &quot;Content-Type: application/json&quot; \
    -d &#39;{&quot;wet&quot;:1, &quot;solid&quot;:0}&#39; \
    https://[...]/api/changes/947/</code></pre><p>Regular sanity checks will be performed on relevant data. See the <code>OPTIONS</code>
response for a particular endpoint for details on required fields and data
formats.</p>
<h4 id="response-3">Response</h4>
<p>Returns JSON data in the response body describing the added/updated instance or
error details if errors exist. Errors are keyed by either the field in error or
the general string <code>non_field_errors</code> (usually when validation involves
multiple fields).</p>
<h3 id="delete-method"><code>DELETE</code> Method</h3>
<h4 id="request-4">Request</h4>
<p>To delete an existing entry, send a <code>DELETE</code> request to the single entry
endpoint to be deleted. For example, to delete a Diaper Change entry with ID
947:</p>
<pre><code>curl -X DELETE https://[...]/api/changes/947/ -H &#39;Authorization: Token [...]&#39;</code></pre><h4 id="response-4">Response</h4>
<p>Returns an empty response with HTTP status code <code>204</code> on success, or a JSON
encoded error detail if an error occurred (e.g. <code>{&quot;detail&quot;:&quot;Not found.&quot;}</code> if
the requested ID does not exist).</p>
<h2 id="contributing">Contributing</h2>
<p>Contributions are welcome! See <a href="CONTRIBUTING.md">CONTRIBUTING.md</a> for detailed
information about how to contribute to Baby Buddy.
<img src="babybuddy/static_src/logo/icon.png" height="150" align="left"></p>
<h1 id="baby-buddy-1">Baby Buddy</h1>
<p><a href="https://opensource.org/licenses/BSD-2-Clause"><img src="https://img.shields.io/badge/License-BSD%202--Clause-orange.svg" alt="License"></a>
<a href="https://gitter.im/babybuddy/Lobby"><img src="https://img.shields.io/gitter/room/nwjs/nw.js.svg" alt="Gitter"></a></p>
<p>A buddy for babies! Helps caregivers track sleep, feedings, diaper changes, 
tummy time and more to learn about and predict baby&#39;s needs without (<em>as much</em>)
guess work.</p>
<p><img src="screenshot.png" alt="Baby Buddy desktop view"></p>
<p><img src="screenshot_mobile.png" alt="Baby Buddy mobile views"></p>
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#demo">Demo</a></li>
<li><a href="#deployment">Deployment</a><ul>
<li><a href="#aws-elastic-beanstalk">AWS Elastic Beanstalk</a></li>
<li><a href="#docker">Docker</a></li>
<li><a href="#heroku">Heroku</a></li>
<li><a href="#manual">Manual</a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#languages">Languages</a></li>
<li><a href="#importexport">Import/Export</a><ul>
<li><a href="#export">Export</a></li>
<li><a href="#import">Import</a></li>
</ul>
</li>
<li><a href="#api">API</a><ul>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#get-method"><code>GET</code> Method</a></li>
<li><a href="#options-method"><code>OPTIONS</code> Method</a></li>
<li><a href="#post-method"><code>POST</code> Method</a></li>
<li><a href="#patch-method"><code>PATCH</code> Method</a></li>
<li><a href="#delete-method"><code>DELETE</code> Method</a></li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
</ul>
<h2 id="demo-1">Demo</h2>
<p>A <a href="http://demo.baby-buddy.net">demo of Baby Buddy</a> is available on Heroku.
The demo instance resets every hour. Login credentials are:</p>
<ul>
<li>Username: <code>admin</code></li>
<li>Password: <code>admin</code></li>
</ul>
<h2 id="deployment-1">Deployment</h2>
<p>The default user name and password for Baby Buddy is <code>admin</code>/<code>admin</code>. For any
deployment, <strong>log in and change the default admin password immediately</strong>.</p>
<p>Many of Baby Buddy&#39;s configuration settings can be controlled using environment
variables - see <a href="#configuration">Configuration</a> for detailed information.</p>
<h3 id="aws-elastic-beanstalk-1">AWS Elastic Beanstalk</h3>
<p>A basic <a href="https://aws.amazon.com/elasticbeanstalk/">Elastic Beanstalk</a>
configuration is provided in <code>.ebextensions/babybuddy.config</code>.   The steps
below are a rough guide to deployment. See <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-apps.html">Working with Python</a>
for detailed information.</p>
<ol>
<li><p>Clone/download the Baby Buddy repo</p>
<pre><code> git clone https://github.com/babybuddy/babybuddy.git</code></pre></li>
<li><p>Enter the cloned/downloaded directory</p>
<pre><code> cd babybuddy</code></pre></li>
<li><p>Set (at least) the <code>SECRET_KEY</code> environment value in <code>.ebextensions/babybuddy.config</code></p>
<p> *See <a href="#configuration">Configuration</a> for other settings that can be
 controlled by environment variables.</p>
</li>
<li><p><a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html">Create an IAM user</a> in AWS with EB, EC2, RDS and S3 privileges.</p>
</li>
<li><p>Initialize the Elastic Bean application (using the IAM user from the previous step)</p>
<pre><code> eb init -p python-3.6</code></pre></li>
<li><p>Create/deploy the environment! :rocket:</p>
<pre><code> eb create -db -db.engine postgres</code></pre></li>
</ol>
<p>The create command will also do an initial deployment. Run <code>eb deploy</code> to
redeploy the app (e.g. if there are errors or settings are changed).</p>
<h3 id="docker-1">Docker</h3>
<p>A Docker deployment requires <a href="https://www.docker.com/">Docker Engine</a> v18.06.0+
and <a href="https://docs.docker.com/compose/">Docker Compose</a> v1.22.0+ to create two
containers: one for the database and one for the application.</p>
<p>The example <code>docker-compose.example.yml</code> file provided in this repository is
intended for production deployments. Baby Buddy is deployed to Docker Hub as
<a href="https://hub.docker.com/r/babybuddy/babybuddy">babybuddy/babybuddy</a> so this is
the only file needed for a Docker deployment with Docker Compose.</p>
<ol>
<li><p>Copy the contents of <code>docker-compose.example.yml</code> as <code>docker-compose.yml</code>
and set, at least, the <code>ALLOWED_HOSTS</code> and <code>SECRET_KEY</code> variables under
<code>services:app:environment</code>.</p>
<p> <em>See <a href="#configuration">Configuration</a> for other settings that can be
 controlled by environment variables.</em></p>
</li>
<li><p>Build/run the application</p>
<pre><code> docker-compose up -d</code></pre></li>
</ol>
<p>The app should now be locally available at
<a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a>. See
<a href="https://docs.docker.com/get-started/">Docker&#39;s &quot;Get Started&quot; documentation</a>
for detailed information about deployment methods with Docker.</p>
<h3 id="heroku-1">Heroku</h3>
<p><a href="https://heroku.com/deploy"><img src="https://www.herokucdn.com/deploy/button.svg" alt="Deploy"></a></p>
<p>For manual deployments to Heroku without using the deploy button, make sure to
create the following settings before pushing:</p>
<pre><code>heroku config:set DJANGO_SETTINGS_MODULE=babybuddy.settings.heroku
heroku config:set SECRET_KEY=&lt;CHANGE TO SOMETHING RANDOM&gt;
heroku config:set DISABLE_COLLECTSTATIC=1
heroku config:set TIME_ZONE=&lt;DESIRED DEFAULT TIMEZONE&gt;</code></pre><p>See <a href="#configuration">Configuration</a> for other settings that can be controlled
by <code>heroku config:set</code>.</p>
<p>And after an initial push, execute the following commands:</p>
<pre><code>heroku run python manage.py migrate
heroku run python manage.py createcachetable</code></pre><h3 id="manual-1">Manual</h3>
<p>There are many ways to deploy Baby Buddy manually to any server/VPS. The basic 
requirements are Python, a web server, an application server, and a database.</p>
<h4 id="requirements-1">Requirements</h4>
<ul>
<li>Python 3.6+, pip, pipenv</li>
<li>Web server (<a href="http://nginx.org/">nginx</a>, <a href="http://httpd.apache.org/">Apache</a>, etc.)</li>
<li>Application server (<a href="http://projects.unbit.it/uwsgi">uwsgi</a>, <a href="http://gunicorn.org/">gunicorn</a>, etc.)</li>
<li>Database (<a href="https://sqlite.org/">sqlite</a>, <a href="https://www.postgresql.org/">Postgres</a>, <a href="https://www.mysql.com/">MySQL</a>, etc.)</li>
</ul>
<h4 id="example-deployment-1">Example deployment</h4>
<p><em>This example assumes a 512MB VPS instance with Ubuntu 18.04.</em> It uses
Python 3.6+, nginx, uwsgi and sqlite and should be sufficient for a few users
(e.g. two parents and 1+ child).</p>
<ol>
<li><p>Install system packages</p>
<pre><code> sudo apt-get install python3 python3-pip nginx uwsgi uwsgi-plugin-python3 git libopenjp2-7-dev</code></pre></li>
<li><p>Default python3 to python for this session</p>
<pre><code> alias python=python3</code></pre></li>
<li><p>Install pipenv</p>
<pre><code> sudo -H pip3 install pipenv</code></pre></li>
<li><p>Set up directories and files</p>
<pre><code> sudo mkdir /var/www/babybuddy
 sudo chown user:user /var/www/babybuddy
 mkdir -p /var/www/babybuddy/data/media
 git clone https://github.com/babybuddy/babybuddy.git /var/www/babybuddy/public</code></pre></li>
<li><p>Move in to the application folder</p>
<pre><code> cd /var/www/babybuddy/public</code></pre></li>
<li><p>Set pipenv to install locally.</p>
<pre><code> export PIPENV_VENV_IN_PROJECT=1</code></pre></li>
<li><p>Initiate and enter the Python environment</p>
<pre><code> pipenv install --three
 pipenv shell</code></pre><p> <strong>Note:</strong> Python dependencies are locked on x86-64 architecture. Installs 
 on other architectures (like Raspberry Pi&#39;s ARM) may result in a 
 <code>THESE PACKAGES DO NOT MATCH THE HASHES FROM Pipfile.lock!</code> error. Add 
 the <code>--skip-lock</code> flag to the above command to suppress this error 
 (i.e.: <code>pipenv install --three --dev --skip-lock</code>).</p>
</li>
<li><p>Create a production settings file and set the <code>SECRET_KEY</code> and <code>ALLOWED_HOSTS</code> values</p>
<pre><code> cp babybuddy/settings/production.example.py babybuddy/settings/production.py
 editor babybuddy/settings/production.py</code></pre></li>
<li><p>Initiate the application</p>
<pre><code> export DJANGO_SETTINGS_MODULE=babybuddy.settings.production
 python manage.py migrate
 python manage.py createcachetable</code></pre></li>
<li><p>Set appropriate permissions on the database and data folder</p>
<pre><code> sudo chown -R www-data:www-data /var/www/babybuddy/data
 sudo chmod 640 /var/www/babybuddy/data/db.sqlite3
 sudo chmod 750 /var/www/babybuddy/data</code></pre></li>
<li><p>Create and configure the uwsgi app</p>
<pre><code> sudo editor /etc/uwsgi/apps-available/babybuddy.ini</code></pre><p> Example config:</p>
<pre><code> [uwsgi]
 plugins = python3
 project = babybuddy
 base_dir = /var/www/babybuddy

 chdir = %(base_dir)/public
 virtualenv = %(chdir)/.venv
 module =  %(project).wsgi:application
 env = DJANGO_SETTINGS_MODULE=%(project).settings.production
 master = True
 vacuum = True</code></pre><p> See the <a href="http://uwsgi-docs.readthedocs.io/en/latest/">uWSGI documentation</a>
 for more advanced configuration details.</p>
</li>
<li><p>Symlink config and restart uWSGI:</p>
<pre><code> sudo ln -s /etc/uwsgi/apps-available/babybuddy.ini /etc/uwsgi/apps-enabled/babybuddy.ini
 sudo service uwsgi restart</code></pre></li>
<li><p>Create and configure the nginx server</p>
<pre><code> sudo editor /etc/nginx/sites-available/babybuddy</code></pre><p> Example config:</p>
<pre><code> upstream babybuddy {
     server unix:///var/run/uwsgi/app/babybuddy/socket;
 }

 server {
     listen 80;
     server_name babybuddy.example.com;

     location / {
         uwsgi_pass babybuddy;
         include uwsgi_params;
     }

     location /media {
         alias /var/www/babybuddy/data/media;
     }
 }</code></pre><p> See the <a href="https://nginx.org/en/docs/">nginx documentation</a> for more advanced
 configuration details.</p>
</li>
<li><p>Symlink config and restart NGINX:</p>
<pre><code> sudo ln -s /etc/nginx/sites-available/babybuddy /etc/nginx/sites-enabled/babybuddy
 sudo service nginx restart</code></pre></li>
<li><p>That&#39;s it (hopefully)! :tada:</p>
</li>
</ol>
<h2 id="configuration-1">Configuration</h2>
<p>Environment variables can be used to define a number of configuration settings.
Baby Buddy will check the application directory structure for an <code>.env</code> file or
take these variables from the system environment. <strong>System environment variables
take precedence over the contents of an <code>.env</code> file.</strong></p>
<ul>
<li><a href="#allowed_hosts"><code>ALLOWED_HOSTS</code></a></li>
<li><a href="#allow_uploads"><code>ALLOW_UPLOADS</code></a></li>
<li><a href="#aws_access_key_id"><code>AWS_ACCESS_KEY_ID</code></a></li>
<li><a href="#aws_secret_access_key"><code>AWS_SECRET_ACCESS_KEY</code></a></li>
<li><a href="#aws_storage_bucket_name"><code>AWS_STORAGE_BUCKET_NAME</code></a></li>
<li><a href="#debug"><code>DEBUG</code></a></li>
<li><a href="#nap_start_max"><code>NAP_START_MAX</code></a></li>
<li><a href="#nap_start_min"><code>NAP_START_MIN</code></a></li>
<li><a href="#secret_key"><code>SECRET_KEY</code></a></li>
<li><a href="#time_zone"><code>TIME_ZONE</code></a></li>
</ul>
<h3 id="allowed_hosts-1"><code>ALLOWED_HOSTS</code></h3>
<p><em>Default: * (any)</em></p>
<p>This option may be set to a single host or comma-separated list of hosts
(without spaces). This should <em>always</em> be set to a specific host or hosts in
production deployments.</p>
<p>See also: <a href="https://docs.djangoproject.com/en/3.0/ref/settings/#allowed-hosts">Django&#39;s documentation on the ALLOWED_HOSTS setting</a></p>
<h3 id="allow_uploads-1"><code>ALLOW_UPLOADS</code></h3>
<p><em>Default: True</em></p>
<p>Whether or not to allow uploads (e.g. of Child photos). For some deployments
(AWS, Heroku) this setting will default to False due to the lack of available
persistent storage.</p>
<h3 id="aws_access_key_id-1"><code>AWS_ACCESS_KEY_ID</code></h3>
<p><em>Default: None</em></p>
<p>Required to access your AWS S3 bucket, should be uniquely generated per bucket
for security.</p>
<p>See also: <a href="#aws_storage_bucket_name"><code>AWS_STORAGE_BUCKET_NAME</code></a></p>
<h3 id="aws_secret_access_key-1"><code>AWS_SECRET_ACCESS_KEY</code></h3>
<p><em>Default: None</em></p>
<p>Required to access your AWS S3 bucket, should be uniquely generated per bucket
for security.</p>
<p>See also: <a href="#aws_storage_bucket_name"><code>AWS_STORAGE_BUCKET_NAME</code></a></p>
<h3 id="aws_storage_bucket_name-1"><code>AWS_STORAGE_BUCKET_NAME</code></h3>
<p><em>Default: None</em></p>
<p>If you would like to use AWS S3 for storage on ephemeral storage platforms like
Heroku you will need to create a bucket and add it&#39;s name. See django-storages&#39;
<a href="https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html">Amazon S3 documentation</a>.</p>
<h3 id="debug-1"><code>DEBUG</code></h3>
<p><em>Default: False</em></p>
<p>When in debug mode, Baby Buddy will print much more detailed error information
for exceptions. This setting should be <em>False</em> in production deployments.</p>
<p>See also <a href="https://docs.djangoproject.com/en/3.0/ref/settings/#debug">Django&#39;s documentation on the DEBUG setting</a>.</p>
<h3 id="nap_start_max-1"><code>NAP_START_MAX</code></h3>
<p><em>Default: 18:00</em></p>
<p>The maximum <em>start</em> time (in the instance&#39;s time zone) before which a sleep
entry is consider a nap. Expects the 24-hour format %H:%M.</p>
<h3 id="nap_start_min-1"><code>NAP_START_MIN</code></h3>
<p><em>Default: 06:00</em></p>
<p>The minimum <em>start</em> time (in the instance&#39;s time zone) after which a sleep
entry is considered a nap. Expects the 24-hour format %H:%M.</p>
<h3 id="secret_key-1"><code>SECRET_KEY</code></h3>
<p><em>Default: None</em></p>
<p>A random, unique string must be set as the &quot;secret key&quot; before Baby Buddy can
be deployed and run.</p>
<p>See also <a href="https://docs.djangoproject.com/en/3.0/ref/settings/#secret-key">Django&#39;s documentation on the SECRET_KEY setting</a>.</p>
<h3 id="time_zone-1"><code>TIME_ZONE</code></h3>
<p><em>Default: Etc/UTC</em></p>
<p>The default time zone to use for the instance. See <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">List of tz database time zones</a>
for all possible values. This value can be overridden per use from the user
settings form.</p>
<h2 id="languages-1">Languages</h2>
<p>Baby Buddy includes translation support as of v1.2.2. Language can be set on a
per-user basis from the user settings page (<code>/user/settings/</code>). See 
<a href="CONTRIBUTING.md#translation">CONTRIBUTING.md</a> for information about how to
create/update translations.</p>
<h3 id="available-languages-1">Available languages</h3>
<p>:us: English (U.S.) <em>(base)</em></p>
<p>:fr: French</p>
<p>:de: German</p>
<p>:mexico: :es: Spanish</p>
<p>:sweden: Swedish</p>
<p>:tr: Turkish</p>
<h2 id="importexport-1">Import/Export</h2>
<p>Baby Buddy uses the <a href="https://django-import-export.readthedocs.io/">django-import-export application</a>
to provide import and export functionality.</p>
<h3 id="export-1">Export</h3>
<p>Export actions are accessible from Baby Buddy&#39;s &quot;Database Admin&quot; area (the
Django admin interface). For example, to export all diaper change entries from
Baby Buddy as an Excel file:</p>
<ol>
<li><p>Log in as a user with &quot;staff&quot; access.</p>
</li>
<li><p>From the user menu, click &quot;Database Admin&quot; under the &quot;Site&quot; heading.</p>
</li>
<li><p>Click &quot;Diaper Changes&quot; in the list of data types.</p>
</li>
<li><p>Click the &quot;Export&quot; button above the filters list on the right side of the
screen.</p>
</li>
<li><p>Select the &quot;xlxs&quot; format and click &quot;Submit&quot;</p>
</li>
</ol>
<p>Note: any applied filters will also filter the exported entries. Alternatively,
on the Diaper Change list screen (step 3 above), it is possible to select one
or many individual records and select &quot;Export selected Diaper Changes&quot; from the
&quot;Actions&quot; list.</p>
<h3 id="import-1">Import</h3>
<p>Import actions are accessible from Baby Buddy&#39;s &quot;Database Admin&quot; area (the
Django admin interface). From the list of entry types in the Database Admin,
select the type to import and click the &quot;Import&quot; button on the list page. The
import screen for a particular type will list the fields generally expected to
be present for an import. Multiple file types -- including csv, xlsx, etc. --
are supported for the import.</p>
<p>The import pages do not provide <em>detailed</em> information about the required data
and formats. When an import is attempted, all rows will be checked for errors
and any issues will be reported on screen and will need to be resolved before
the import can be performed.</p>
<p>See the <a href="core/tests/import">example import files</a> used for tests to get an idea
of the expected data format.</p>
<h2 id="api-1">API</h2>
<p>Baby Buddy uses the <a href="https://www.django-rest-framework.org/">Django REST Framework</a>
(DRF) to provide a REST API.</p>
<p>The only requirement for (most) requests is that the <code>Authorization</code> header is
set as described in the <a href="#authentication">Authentication</a> section. The one
exception is the <code>/api</code> endpoint, which lists all available endpoints.</p>
<p>Currently, the following endpoints are available for <code>GET</code>, <code>OPTIONS</code>, and
<code>POST</code> requests:</p>
<ul>
<li><code>/api/children/</code></li>
<li><code>/api/changes/</code> (Diaper Changes)</li>
<li><code>/api/feedings/</code></li>
<li><code>/api/notes/</code></li>
<li><code>/api/sleep/</code></li>
<li><code>/api/temperature/</code></li>
<li><code>/api/timers/</code></li>
<li><code>/api/tummy-times/</code></li>
<li><code>/api/weight/</code></li>
</ul>
<h3 id="authentication-1">Authentication</h3>
<p>By default, the <a href="https://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication">TokenAuthentication</a>
and <a href="https://www.django-rest-framework.org/api-guide/authentication/#sessionauthentication">SessionAuthentication</a>
classes are enabled. Session authentication covers local API requests made by
the application itself. Token authentication allows external requests to be
made.</p>
<p>:exclamation: <strong>In a production environment, token authentication should only
be used for API calls to an <code>https</code> endpoint.</strong> :exclamation:</p>
<p>Each user is automatically assigned an API key that can be used for token
authentication. This key can be found on the User Settings page for the logged
in the user. To use a key for an API request, set the request <code>Authorization</code>
header to <code>Token &lt;user-key&gt;</code>. E.g.</p>
<pre><code>Authorization: Token 2h23807gd72h7hop382p98hd823dw3g665g56</code></pre><p>If the <code>Authorization</code> header is not set or the key is not valid, the API will
return <code>403 Forbidden</code> with additional details in the response body.</p>
<h3 id="get-method-1"><code>GET</code> Method</h3>
<h4 id="request-5">Request</h4>
<p>The <code>limit</code> and <code>offset</code> request parameters can be used to limit
and offset the results set respectively. For example, the following request
will return five diaper changes starting from the 10th diaper change entry:</p>
<pre><code>curl -X GET &#39;https://[...]/api/changes/?limit=5&amp;offset=10&#39; -H &#39;Authorization: Token [...]&#39;
{
    &quot;count&quot;: &lt;int&gt;,
    &quot;next&quot;: &quot;https://[...]/api/changes/?limit=5&amp;offset=15&quot;,
    &quot;previous&quot;: &quot;https://[...]/api/changes/?limit=5&amp;offset=5&quot;,
    &quot;results&quot;: [...]
}</code></pre><p>Field-based filters for specific endpoints can be found the in the <code>filters</code>
field of the <code>OPTIONS</code> response for specific endpoints.</p>
<p>Single entries can also be retrieved by adding the ID (or in the case of a 
Child entry, the slug) of a particular entry:</p>
<pre><code> curl -X GET https://[...]/api/children/gregory-hill/ -H &#39;Authorization: Token [...]&#39;
 {
    &quot;id&quot;:3,
    &quot;first_name&quot;:&quot;Gregory&quot;,
    &quot;last_name&quot;:&quot;Hill&quot;,
    &quot;birth_date&quot;:&quot;2020-02-11&quot;,
    &quot;slug&quot;:&quot;gregory-hill&quot;,
    &quot;picture&quot;:null
}
curl -X GET https://[...]/api/sleep/1/ -H &#39;Authorization: Token [...]&#39;
{
 &quot;id&quot;:480,
 &quot;child&quot;:3,
 &quot;start&quot;:&quot;2020-03-12T21:25:28.916016-07:00&quot;,
 &quot;end&quot;:&quot;2020-03-13T01:34:28.916016-07:00&quot;,
 &quot;duration&quot;:&quot;04:09:00&quot;,
 &quot;nap&quot;:false
}</code></pre><h4 id="response-5">Response</h4>
<p>Returns JSON data in the response body in the following format:</p>
<pre><code>{
    &quot;count&quot;:&lt;int&gt;,
    &quot;next&quot;:&lt;url&gt;,
    &quot;previous&quot;:&lt;url&gt;,
    &quot;results&quot;:[{...}]
}</code></pre><ul>
<li><code>count</code>: Total number of records (<em>in the database</em>, not just the response).</li>
<li><code>next</code>: URL for the next set of results.</li>
<li><code>previous</code>: URL for the previous set of results.</li>
<li><code>results</code>: An array of the results of the request.</li>
</ul>
<p>For single entries, returns JSON data in the response body keyed by model field
names. This will vary between models.</p>
<h3 id="options-method-1"><code>OPTIONS</code> Method</h3>
<h4 id="request-6">Request</h4>
<p>All endpoints will respond to an <code>OPTIONS</code> request with detailed information
about the endpoint&#39;s purpose, parameters, filters, etc.</p>
<h4 id="response-6">Response</h4>
<p>Returns JSON data in the response body describing the endpoint, available
options for <code>POST</code> requests, and available filters for <code>GET</code> requests. The
following example describes the <code>/api/children</code> endpoint:</p>
<pre><code>{
    &quot;name&quot;: &quot;Child List&quot;,
    &quot;renders&quot;: [
        &quot;application/json&quot;,
        &quot;text/html&quot;
    ],
    &quot;parses&quot;: [
        &quot;application/json&quot;,
        &quot;application/x-www-form-urlencoded&quot;,
        &quot;multipart/form-data&quot;
    ],
    &quot;actions&quot;: {
        &quot;POST&quot;: {
            &quot;id&quot;: {
                &quot;type&quot;: &quot;integer&quot;,
                &quot;required&quot;: false,
                &quot;read_only&quot;: true,
                &quot;label&quot;: &quot;ID&quot;
            },
            [...]
        }
    },
    &quot;filters&quot;: [
        &quot;first_name&quot;,
        &quot;last_name&quot;,
        &quot;slug&quot;
    ]
}</code></pre><h3 id="post-method-1"><code>POST</code> Method</h3>
<h4 id="request-7">Request</h4>
<p>To add new entries for a particular endpoint, send a <code>POST</code> request with the
entry data in JSON format in the request body. The <code>Content-Type</code> header for
<code>POST</code> request must be set to <code>application/json</code>.</p>
<p>Regular sanity checks will be performed on relevant data. See the <code>OPTIONS</code>
response for a particular endpoint for details on required fields and data
formats.</p>
<h4 id="timer-field-1">Timer Field</h4>
<p>The &quot;timer&quot; field is a special field available for <code>POST</code> operations to model
endpoints supporting duration (Feeding, Sleep, Tummy Time). When the &quot;timer&quot;
field is set in the request, the <code>start</code> and <code>end</code> fields will be filled in
automatically using the <code>start</code> and <code>end</code> values <em>from the Timer</em> (the Timer
will be stopped if it is currently running).</p>
<p>Additionally, if the Timer has a Child relationship, the <code>child</code> field will be
filled in automatically use the <code>child</code> value from the Timer.</p>
<p>If the &quot;timer&quot; field is set, it&#39;s values will <strong>always override</strong> the relevant
fields in the request. E.g. if a <code>POST</code> request is sent with both the <code>timer</code>
and <code>end</code> fields, the value for the <code>end</code> field will be ignored and replaced by
the Timer&#39;s <code>end</code> value. The same applies for <code>start</code> and <code>child</code>. These fields
can all be left out of the request when the Timer is provided, otherwise they
are required fields.</p>
<h4 id="response-7">Response</h4>
<p>Returns JSON data in the response body describing the added/updated instance or
error details if errors exist. Errors are keyed by either the field in error or
the general string <code>non_field_errors</code> (usually when validation involves
multiple fields).</p>
<h3 id="patch-method-1"><code>PATCH</code> Method</h3>
<h4 id="request-8">Request</h4>
<p>To update existing entries, send a <code>PATCH</code> request to the single entry endpoint
for the entry to be updated. The <code>Content-Type</code> header for <code>PATCH</code> request must
be set to <code>application/json</code>. For example, to update a Diaper Change entry with
ID 947 to indicate a &quot;wet&quot; diaper only:</p>
<pre><code>curl -X PATCH \
    -H &#39;Authorization: Token [...]&#39; \
    -H &quot;Content-Type: application/json&quot; \
    -d &#39;{&quot;wet&quot;:1, &quot;solid&quot;:0}&#39; \
    https://[...]/api/changes/947/</code></pre><p>Regular sanity checks will be performed on relevant data. See the <code>OPTIONS</code>
response for a particular endpoint for details on required fields and data
formats.</p>
<h4 id="response-8">Response</h4>
<p>Returns JSON data in the response body describing the added/updated instance or
error details if errors exist. Errors are keyed by either the field in error or
the general string <code>non_field_errors</code> (usually when validation involves
multiple fields).</p>
<h3 id="delete-method-1"><code>DELETE</code> Method</h3>
<h4 id="request-9">Request</h4>
<p>To delete an existing entry, send a <code>DELETE</code> request to the single entry
endpoint to be deleted. For example, to delete a Diaper Change entry with ID
947:</p>
<pre><code>curl -X DELETE https://[...]/api/changes/947/ -H &#39;Authorization: Token [...]&#39;</code></pre><h4 id="response-9">Response</h4>
<p>Returns an empty response with HTTP status code <code>204</code> on success, or a JSON
encoded error detail if an error occurred (e.g. <code>{&quot;detail&quot;:&quot;Not found.&quot;}</code> if
the requested ID does not exist).</p>
<h2 id="contributing-1">Contributing</h2>
<p>Contributions are welcome! See <a href="CONTRIBUTING.md">CONTRIBUTING.md</a> for detailed
information about how to contribute to Baby Buddy.</p>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 13 May 2020</div><div class="column">Version: 1.2.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>