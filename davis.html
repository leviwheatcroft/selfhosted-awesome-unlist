<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="A simple, dockerizable and fully translatable admin interface for sabre/dav based on Symfony 5 and Bootstrap 4, largely inspired by Baïkal."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/selfhosted-awesome-unlist/site.css" rel="stylesheet" type="text/css"></head></head><body class="project"><nav class="navigation"><section class="container"><a class="navigation-title" href="/selfhosted-awesome-unlist/">Selfhosted Awesome [Un]list</a></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>davis</h1><span class="subheading">A simple, dockerizable and fully translatable admin interface for sabre/dav based on Symfony 5 and Bootstrap 4, largely inspired by Baïkal.</span><div class="links"><a class="button button-outline" href="https://github.com/tchapi/davis/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>Davis</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info statistics"><span class="stat pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>22 Apr 2020</span><span class="stat stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>18</span><span class="stat issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>1</span></div></div></div><div class="row"><div class="column"><div class="info tags"><a class="tag" href="/selfhosted-awesome-unlist/tags/php.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">218</span>php</a><a class="tag" href="/selfhosted-awesome-unlist/tags/bootstrap4.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">2</span>bootstrap4</a><a class="tag" href="/selfhosted-awesome-unlist/tags/caldav.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">4</span>caldav</a><a class="tag" href="/selfhosted-awesome-unlist/tags/carddav.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">2</span>carddav</a><a class="tag" href="/selfhosted-awesome-unlist/tags/symfony4.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">3</span>symfony4</a><a class="tag" href="/selfhosted-awesome-unlist/tags/webdav.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">5</span>webdav</a><a class="tag" href="/selfhosted-awesome-unlist/tags/calendaring-and-contacts-management.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">11</span>calendaring and contacts management</a><a class="tag" href="/selfhosted-awesome-unlist/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">943</span>selfhosted</a><a class="tag" href="/selfhosted-awesome-unlist/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="count">327</span>docker</a></div></div></div></div></section><article><div class="container"><div class="row"><div class="column"><h2 id="davis">Davis</h2>
<p>A simple, fully translatable admin interface and frontend for <code>sabre/dav</code> based on <a href="https://symfony.com/">Symfony 5</a> and <a href="https://getbootstrap.com/">Bootstrap 4</a>, largely inspired by <a href="https://github.com/sabre-io/Baikal">Baïkal</a>.</p>
<p><img src="https://raw.githubusercontent.com/tchapi/davis/master/_screenshots/dashboard.png" alt="Dashboard page"></p>
<p><img src="https://raw.githubusercontent.com/tchapi/davis/master/_screenshots/user.png" alt="User creation page"></p>
<h1 id="requirements">Requirements</h1>
<p>PHP &gt; 7.3.0 (with <code>pdo_mysql</code> and <code>intl</code> extensions), MySQL (or MariaDB).</p>
<h1 id="installation">Installation</h1>
<ol start="0">
<li><p>Clone this repository</p>
</li>
<li><p>Retrieve the dependencies:</p>
</li>
</ol>
<pre><code>composer install</code></pre><ol start="2">
<li><p>At least put the correct credentials to your database in your <code>.env.local</code> file so you can easily migrate your database.</p>
</li>
<li><p>Migrate the database:</p>
</li>
</ol>
<pre><code>bin/console migrate</code></pre><p><strong>Davis</strong> can be used with a pre-existing MySQL database (<em>for instance, one previously managed by Baïkal</em>). The only missing table would be the <code>migrations</code> table, that you can recreate automatically when running the migrations.</p>
<blockquote>
<p>The migrations are not <em>exactly</em> equivalent to those of Baïkal, and allow for a bit more room in columns.</p>
</blockquote>
<h2 id="configuration">Configuration</h2>
<p>Create your own <code>.env.local</code> file to change the necessary variables, if you plan on using <code>symfony/dotenv</code>.</p>
<blockquote>
<p>If your installation is behind a web server like Apache or Nginx, you can setup the env vars directly in your Apache or Nginx configuration (see below). Skip this part in this case.</p>
</blockquote>
<p>a. The database url (<em>you should already have it configured since you migrated the database previously</em>)</p>
<pre><code>DATABASE_URL=mysql://db_user:db_pass@host:3306/db_name</code></pre><p>b. The admin password for the backend</p>
<pre><code>ADMIN_LOGIN=admin
ADMIN_PASSWORD=test</code></pre><p>c. The auth Realm and method for HTTP auth</p>
<pre><code>AUTH_REALM=SabreDAV
AUTH_METHOD=Digest # can be &quot;Basic&quot; or &quot;Digest&quot;</code></pre><p>d. The global flags to enable CalDAV, CardDAV and WebDAV</p>
<pre><code>CALDAV_ENABLED=true
CARDDAV_ENABLED=true
WEBDAV_ENABLED=false</code></pre><p>e. The email address that your invites are going to be sent from</p>
<pre><code>INVITE_FROM_ADDRESS=no-reply@example.org</code></pre><p>f. The paths for the WebDAV installation</p>
<blockquote>
<p>I recommend that you use absolute directories so you know exactly where your files reside.</p>
</blockquote>
<pre><code>TMP_DIR=&#39;/tmp&#39;
PUBLIC_DIR=&#39;/public&#39;</code></pre><h2 id="migrating-from-baïkal-">Migrating from Baïkal ?</h2>
<p>If you&#39;re migrating from Baïkal, then you will likely want to do the following :</p>
<ol>
<li><p>Get a backup of your data (without the <code>CREATE</code>  statements, but with complete <code>INSERT</code>  statements):</p>
<p> <code>mysqldump -u root -p --no-create-info --complete-insert baikal &gt; baikal_to_davis.sql # baikal is the actual name of your database</code></p>
</li>
<li><p>Create a new database for Davis (let&#39;s name it <code>davis</code>) and run the migrations :</p>
<p> <code>bin/console doctrine:migrations:migrate</code></p>
</li>
<li><p>Reimport the data back:</p>
<p> <code>mysql -uroot -p davis &lt; baikal_to_davis.sql</code></p>
</li>
</ol>
<h1 id="access--webserver">Access / Webserver</h1>
<p>A simple status page is available on the root <code>/</code> of the server.</p>
<p>The administration interface is available at <code>/dashboard</code>. You need to login to use it (See <code>ADMIN_LOGIN</code> and <code>ADMIN_PASSWORD</code> env vars).</p>
<p>The main endpoint for CalDAV, WebDAV or CardDAV is at <code>/dav</code>.</p>
<h3 id="example-apache-24-configuration">Example Apache 2.4 configuration</h3>
<pre><code>&lt;VirtualHost *:80&gt;
    ServerName dav.domain.tld

    DocumentRoot /var/www/davis/public
    DirectoryIndex /index.php

    &lt;Directory /var/www/davis/public&gt;
        AllowOverride None
        Order Allow,Deny
        Allow from All
        FallbackResource /index.php
    &lt;/Directory&gt;

    # Apache &gt; 2.4.25, else remove this part
    &lt;Directory /var/www/davis/public/bundles&gt;
        FallbackResource disabled
    &lt;/Directory&gt;

    # Env vars (if you did not use .env.local)
    SetEnv APP_ENV prod
    SetEnv APP_SECRET &lt;app-secret-id&gt;
    SetEnv DATABASE_URL &quot;mysql://db_user:db_pass@host:3306/db_name&quot;
    # ... etc
&lt;/VirtualHost&gt;</code></pre><h3 id="example-nginx-configuration">Example Nginx configuration</h3>
<pre><code>server {
    server_name dav.domain.tld;
    root /var/www/davis/public;

    location / {
        try_files $uri /index.php$is_args$args;
    }

    location /bundles {
        try_files $uri =404;
    }

    location ~ ^/index\.php(/|$) {
        fastcgi_pass unix:/var/run/php/php7.2-fpm.sock; # Change for your PHP version
        fastcgi_split_path_info ^(.+\.php)(/.*)$;
        include fastcgi_params;

        # Env vars (if you did not use .env.local)            fastcgi_param APP_ENV prod;
        fastcgi_param APP_SECRET &lt;app-secret-id&gt;;
        fastcgi_param DATABASE_URL &quot;mysql://db_user:db_pass@host:3306/db_name&quot;;
        # ... etc ...

        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        fastcgi_param DOCUMENT_ROOT $realpath_root;
        internal;
    }

    location ~ \.php$ {
        return 404;
    }
}</code></pre><p>More examples and information <a href="https://symfony.com/doc/current/setup/web_server_configuration.html">here</a>.</p>
<h2 id="well-known-redirections-for-caldav-and-carddav">Well-known redirections for CalDAV and CardDAV</h2>
<p>Web-based protocols like CalDAV and CardDAV can be found using a discovery service. Some clients require that you implement a path prefix to point to the correct location for your service. See <a href="https://en.wikipedia.org/wiki/List_of_/.well-known/_services_offered_by_webservers">here</a> for more info.</p>
<p>If you use Apache as your webserver, you can enable the redirections with:</p>
<pre><code>RewriteEngine On
RewriteRule ^\.well-known/carddav /dav/ [R=301,L]
RewriteRule ^\.well-known/caldav /dav/ [R=301,L]</code></pre><p>Make sure that <code>mod_rewrite</code> is enabled on your installation beforehand.</p>
<p>If you use Nginx, you can add this to your configuration:</p>
<pre><code>location / {
   rewrite ^/.well-known/carddav /dav/ redirect;
   rewrite ^/.well-known/caldav /dav/ redirect;
}</code></pre><h1 id="dockerized-installation">Dockerized installation</h1>
<p>A <code>Dockerfile</code> is available for you to compile the container.</p>
<p>We use <code>ssmtp</code> as a delivery service for a configured mailhost instead of using local delivery (<em>that should work out of the box</em>). You can ignore this or remove it from the Dockerfile if you want.</p>
<p>A <code>docker-compose.yml</code> file is also included as a minimal example setup with a MariaDB database and Nginx as a reverse proxy.</p>
<p>You can start the containers with :</p>
<pre><code>cd docker &amp;&amp; docker-compose up -d</code></pre><p><strong>⚠ Do not forget to create the database the first time you run the container</strong> :</p>
<pre><code>docker exec -it davis bash -c &quot;APP_ENV=prod bin/console doctrine:migrations:migrate --no-interaction&quot;</code></pre><p>Then, head up to <code>http://&lt;YOUR_DOCKER_IP&gt;</code> to see the status display :</p>
<p><img src="https://raw.githubusercontent.com/tchapi/davis/master/_screenshots/status.png" alt="Status page"></p>
<blockquote>
<p>Note that there is no user, no principals, etc created by default.</p>
</blockquote>
<h1 id="development">Development</h1>
<p>You can spin off a local PHP webserver with:</p>
<pre><code>php -S localhost:8000 -t public</code></pre><p>If you change or add translations, you need to update the <code>messages</code> XLIFF file with:</p>
<pre><code>bin/console translation:update en --force --domain=messages+intl-icu</code></pre><h1 id="libraries-used">Libraries used</h1>
<ul>
<li>Symfony 5 (Licence : MIT)</li>
<li>Sabre-io/dav (Licence : BSD-3-Clause)</li>
<li>Bootstrap 4 (Licence : MIT)</li>
</ul>
<p><em>This project does not use any pipeline for the assets since the frontend side is relatively simple, and based on Bootstrap.</em></p>
<h1 id="licence">Licence</h1>
<p>This project is release under the MIT licence. See the LICENCE file</p>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built On: 13 May 2020</div><div class="column">Version: 1.2.0</div></div></div></footer><script src="/selfhosted-awesome-unlist/site.js"></script></body></html>