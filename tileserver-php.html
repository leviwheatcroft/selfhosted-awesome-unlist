<!DOCTYPE html><html><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Serve map tiles from any PHP hosting."><meta name="DCTERMS.issued"><meta name="DCTERMS.modified"><title></title><link href="https://fonts.googleapis.com/css2?family=Special+Elite&amp;display=swap" rel="stylesheet"><link href="/site.css" rel="stylesheet" type="text/css"></head></head><body><nav class="navigation"><section class="container"><a class="navigation-title" href="/">Selfhosted Awesome [Un]list</a><ul class="navigation-list float-right"><li class="navigation-item"><a class="navigation-link" href="/tags"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>github</a></li></ul></section></nav><header><div class="container"><div class="row"><div class="column"><div class="title"><h1>tileserver-php</h1><span class="subheading"></span><div class="links"><a class="button button-outline" href="https://github.com/klokantech/tileserver-php"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>TileServer PHP</a></div></div></div></div></div></header><section><div class="container"><div class="row"><div class="column"><div class="info"><div class="github"><span class="pushed-at"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg>11 Jul 2019</span><span class="stargazers-count"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>398</span><span class="issues"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>35</span></div><div class="tags"><a class="button" href="/tags/php.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>PHP</a><a class="button" href="/tags/maps-and-global-positioning-system-gps.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Maps and Global Positioning System (GPS)</a><a class="button" href="/tags/selfhosted.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>selfhosted</a><a class="button" href="/tags/docker.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>Docker</a></div></div></div></div></div></section><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><h1 id="tileserver-php-maptiler-and-mbtiles-maps-via-wmts">TileServer PHP: MapTiler and MBTiles maps via WMTS</h1>
<p><a href="https://travis-ci.org/klokantech/tileserver-php"><img src="https://travis-ci.org/klokantech/tileserver-php.svg" alt="Build Status"></a>
<a href="https://hub.docker.com/r/klokantech/tileserver-php/"><img src="https://img.shields.io/badge/docker-hub-blue.svg" alt="Docker Hub"></a></p>
<p>This server distributes maps to desktop, web, and mobile applications from
a standard Apache+PHP web hosting.</p>
<p>Try a live demo at: <a href="http://tileserver.maptiler.com/">http://tileserver.maptiler.com/</a></p>
<p>It is a free and open-source project implementing OGC WMTS standard for
pre-rendered map tiles made with <a href="http://www.maptiler.com/">MapTiler</a>, GDAL2Tiles,
or available as MBTiles files.</p>
<p>It is the easiest and cheapest way how to serve zoomable maps in a
standardized way - practically from any ordinary web hosting.</p>
<p>It is easy to install - just copy the project files to a PHP-enabled
directory along with your map data.</p>
<p>It comes with an online interface showing the list of the maps and step-by-step guides for online mapping libraries (Google Maps API, Leaflet, OpenLayers, OL3, MapBox JS, ArcGIS JS) and various desktop GIS software:</p>
<p><img src="https://f.cloud.github.com/assets/59284/1041807/a040160c-0fdb-11e3-8941-ab367b2a648d.png" alt="tileserver-screenshot"></p>
<p>This project is developed in PHP, not because it is the best language for
development of web applications, but because it maximally simplify the
deployment on large number of web hosting providers including various free
web hostings.</p>
<p>Tiles are served directly by Apache with mod_rewrite rules as static files
and therefore are very fast and with correct HTTP caching headers.
Only XML metadata are delivered via PHP.
MBTiles are served via PHP, and are therfore slower, unless they are unpacked with mbutil.</p>
<p><a href="http://www.maptiler.com/">MapTiler</a> can render GeoTIFF, ECW, MrSID, GeoPDF into compatible map tiles. JPEG, PNG, GIF and TIFF with scanned maps or images without geolocation can be turned into standard map layers with the visual georeferencing functionality (<a href="http://youtu.be/eJxdCe9CNYg">http://youtu.be/eJxdCe9CNYg</a>).</p>
<p><a href="http://www.maptiler.com/"><img src="https://cloud.githubusercontent.com/assets/59284/3037911/583d7810-e0c6-11e3-877c-6a7747b80dd3.jpg" alt="MapTiler - mapping tiles"></a></p>
<h2 id="requirements">Requirements:</h2>
<ul>
<li>Apache webserver (with mod_rewrite / .htaccess supported)</li>
<li>PHP 5.2+ with SQLite module (php5-sqlite)</li>
</ul>
<p>(or another webserver implementing mod_rewrite rules and PHP)</p>
<h2 id="installation">Installation:</h2>
<p>Download the project files as a <a href="https://github.com/klokantech/tileserver-php/archive/master.zip">zip archive</a> or source code from GitHub and unpack it into a web-hosting of your choice.</p>
<p>If you access the web address relevant to the installation directory, 
the TileServer.php Server should display you a welcome message and further
instructions.</p>
<p>Then you can upload to the web hosting your mapping data - a directory with
tiles rendered with <a href="http://www.maptiler.com/">MapTiler</a>.</p>
<p>Tiles produced by open-source GDAL2Tiles or MapTiler and tiles in .mbtiles
files can be easily converted to required structure (XYZ with top-left origin
and metadata.json file). The open-source utility <a href="https://github.com/mapbox/mbutil">mbutil</a> produces
exactly the required format.</p>
<p>Direct reading of .mbtiles files is supported, but with decreased performance
compared to the static files in a directory. The advantage is easier data management,
especially upload over FTP or similar protocols.</p>
<h2 id="supported-protocols">Supported protocols:</h2>
<ul>
<li><p>OpenGIS WMTS 1.0.0</p>
<p>The Open Geospatial Consortium (OGC) Web Map Tile Service (WMTS)
Both KVP and RESTful version 1.0.0:
<a href="http://www.opengeospatial.org/standards/wmts/">http://www.opengeospatial.org/standards/wmts/</a></p>
<p>Target is maximal compliance to the standard.</p>
<p>Exposed at http://[...]/wmts</p>
</li>
<li><p>OSGeo TMS 1.0.0</p>
<p>The OSGeo Tile Maps Service, but with inverted y-coordinates:
<a href="http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification">http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification</a>
This means request compatible with OpenStreetMap tile servers.</p>
<p>Target is &quot;InvertedTMS&quot; implementation used by the ArcBruTile client
which is available from <a href="http://arcbrutile.codeplex.com/">http://arcbrutile.codeplex.com/</a> and uses
flipped y-axis.</p>
<p>Exposed at http://[...]/tms</p>
</li>
<li><p>TileJSON</p>
<p>Metadata about the individual maps in a ready to use form for web
clients following the standard <a href="http://mapbox.com/developers/tilejson/">http://mapbox.com/developers/tilejson/</a>
and with support for JSONP access.</p>
<p>Exposed at http://[...]/layer.json or .jsonp</p>
</li>
<li><p>Direct access with XYZ tile requests (to existing tiles in a directory
or to .mbtiles)</p>
<p>Compatible with Google Maps API / Bing SDK / OpenStreetMap clients.</p>
<p>Exposed at http://[...]/layer/z/x/y.ext</p>
</li>
<li><p>MapBox UTFgrid request (for existing tiles in .mbtiles with UTFgrid support). Callback is supported </p>
<p>Example <a href="https://www.mapbox.com/demo/visiblemap/">https://www.mapbox.com/demo/visiblemap/</a>
Specification <a href="https://github.com/mapbox/utfgrid-spec">https://github.com/mapbox/utfgrid-spec</a></p>
<p>Exposed at http://[...]/layer/z/x/y.grid.json</p>
</li>
<li><p>MapBox Vector Tiles (for MBTiles generated by <a href="https://www.mapbox.com/mapbox-studio-classic/">MapBox Studio Classic</a> or by <a href="http://osm2vectortiles.org/">OSM2VectorTiles</a> project).</p>
<p>Example <a href="http://osm2vectortiles.tileserver.com/">http://osm2vectortiles.tileserver.com/</a>
TileJSON can be used in MapBox Studio Classic, MapBox SDKs/APIs, OpenLayers, etc.</p>
<p>Exposed at http://[...]/layer/z/x/y.pbf</p>
</li>
<li><p>Retina / HighDPI routing with 512 tiles
Use @2x suffix in url for JSONs and tiles. For example <a href="http://tileserver.maptiler.com/grandcanyon@2x.json">http://tileserver.maptiler.com/grandcanyon@2x.json</a>  </p>
</li>
</ul>
<p>To use the OGC WMTS standard point your client (desktop or web) to the URL
of &#39;directory&#39; where you installed tileserver.php project with suffix &quot;wmts&quot;.
For example: <a href="http://www.example.com/directory/wmts">http://www.example.com/directory/wmts</a></p>
<p>If you have installed the project into a root directory of a domain, then the address is: <a href="http://www.example.com/wmts">http://www.example.com/wmts</a></p>
<p>The supported WMTS requests includes:</p>
<p>GetCapabilities RESTful/KVP:</p>
<p>   http://[...]/1.0.0/WMTSCapabilities.xml
   http://[...]?service=wmts&amp;request=getcapabilities&amp;version=1.0.0</p>
<p>GetTile RESTful/KVP:</p>
<p>   http://[...]/layer/[ANYTHING-OPTIONAL][z]/[x]/[y].[ext]
   http://[...]?service=wmts&amp;request=getTile&amp;layer=[layer]&amp;tilematrix=[z]&amp;tilerow=[y]&amp;tilecol=[y]&amp;format=[ext]</p>
<p>Other example requests are mentioned in the .htaccess.</p>
<p>TileServer-PHP supports all coordinates system. You have to define it with tilejson with specification on <a href="https://github.com/klokantech/tilejson-spec/tree/custom-projection/2.2.0">https://github.com/klokantech/tilejson-spec/tree/custom-projection/2.2.0</a>
Or use MapTiler to produce datasets with this specification.</p>
<h2 id="performance-from-the-web-clients">Performance from the web clients</h2>
<p>It is highly recommended to map several domain names to the service, such as:
<a href="http://a.example.com/">http://a.example.com/</a>, <a href="http://b.example.com/">http://b.example.com/</a>, <a href="http://c.example.com/">http://c.example.com/</a>.
This can be done with DNS CNAME records pointing to your hosting.
The reason for this is that traditionally browsers will not send more then two
simultaneous http request to the same domain - with multiple domains for the
same server you can better saturate the network and receive the maps faster.</p>
<h2 id="performance">Performance</h2>
<p>In case the data are available in a form of directory with XYZ tiles, then
Apache webserver is serving these files directly as WMTS RESTful or KVP.</p>
<p>This means performance is excellent, maps are delivered very fast and large
number of concurrent visitors can be handled even with quite a low-end
hardware or cheap/free web hosting providers.</p>
<p>Mod_rewrite rules are utilized to ensure the HTTP requests defined in the OCG
WMTS standard are served, and Apache preserve standard caching headers &amp; eTag.</p>
<p>The performance should be significantly better then performance of any other
tile caching project (such as TileCache.org or GeoWebCache).</p>
<p>Performance graph for &quot;apache static&quot; comparing other tile caching projects
is available online at:
<a href="http://code.google.com/p/mod-geocache/wiki/PreliminaryBenchmark">http://code.google.com/p/mod-geocache/wiki/PreliminaryBenchmark</a></p>
<h2 id="limits-of-actual-implementation">Limits of actual implementation</h2>
<p>With intention, in this moment the project supports only:</p>
<ul>
<li>We enforce and require XYZ (top-left origin) tiling schema (even for TMS).</li>
</ul>
<h2 id="password-protection">Password protection</h2>
<p>HTTP Simple Authentication can be easily added to the server.
Edit the .htaccess and add these lines:</p>
<pre><code>AuthUserFile /full/path/to/.htpasswd
AuthType Basic
AuthName &quot;Secure WMTS&quot;
Require valid-user</code></pre><p>Create a file called .htpasswd with user:password format.
You can use a command-line utility:</p>
<p>$ htpasswd -c .htpasswd [your-user-login]</p>
<p>Or an online service:</p>
<p><a href="http://www.htaccesstools.com/htpasswd-generator/">http://www.htaccesstools.com/htpasswd-generator/</a></p>
<h2 id="https--ssl-support">HTTPS / SSL support</h2>
<p>TileServer.php can run without any problems over HTTPS, if required.</p>
<h2 id="microsoft-windows-web-hosting">Microsoft Windows web-hosting</h2>
<p>The TileServer.php should run on Windows-powered webservers with Apache
installation if PHP 5.2+ and mod_rewrite are available.</p>
<p>With the IIS webserver hosting, you may need PHP and IIRF module
(<a href="http://iirf.codeplex.com/">http://iirf.codeplex.com/</a>) and alter appropriately the rewrite rules.</p>
<h2 id="credits--contributors">Credits / Contributors</h2>
<p>Project developed initially by Klokan Technologies GmbH, Switzerland in
cooperation with National Oceanic and Atmospheric Administration - NOAA, USA.</p>
<ul>
<li>Petr Pridal - Klokan Technologies GmbH <a href="mailto:&#112;&#x65;&#x74;&#x72;&#x2e;&#x70;&#114;&#105;&#x64;&#97;&#x6c;&#x40;&#107;&#108;&#111;&#x6b;&#x61;&#x6e;&#x74;&#101;&#99;&#104;&#x2e;&#99;&#111;&#109;">&#112;&#x65;&#x74;&#x72;&#x2e;&#x70;&#114;&#105;&#x64;&#97;&#x6c;&#x40;&#107;&#108;&#111;&#x6b;&#x61;&#x6e;&#x74;&#101;&#99;&#104;&#x2e;&#99;&#111;&#109;</a></li>
<li>Jason Woolard - NOAA <a href="mailto:&#x6a;&#x61;&#x73;&#111;&#110;&#46;&#x77;&#111;&#x6f;&#108;&#x61;&#114;&#100;&#64;&#x6e;&#x6f;&#x61;&#x61;&#46;&#103;&#x6f;&#118;">&#x6a;&#x61;&#x73;&#111;&#110;&#46;&#x77;&#111;&#x6f;&#108;&#x61;&#114;&#100;&#64;&#x6e;&#x6f;&#x61;&#x61;&#46;&#103;&#x6f;&#118;</a></li>
<li>Jon Sellars - NOAA <a href="mailto:&#x6a;&#x6f;&#110;&#46;&#115;&#101;&#108;&#x6c;&#x61;&#114;&#x73;&#x40;&#x6e;&#x6f;&#97;&#x61;&#46;&#x67;&#x6f;&#118;">&#x6a;&#x6f;&#110;&#46;&#115;&#101;&#108;&#x6c;&#x61;&#114;&#x73;&#x40;&#x6e;&#x6f;&#97;&#x61;&#46;&#x67;&#x6f;&#118;</a></li>
<li>Dalibor Janak - Klokan Technologies GmbH <a href="mailto:&#x64;&#x61;&#x6c;&#x69;&#98;&#111;&#x72;&#x2e;&#x6a;&#x61;&#110;&#97;&#x6b;&#x40;&#x6b;&#108;&#x6f;&#107;&#97;&#110;&#116;&#x65;&#99;&#104;&#x2e;&#x63;&#x6f;&#x6d;">&#x64;&#x61;&#x6c;&#x69;&#98;&#111;&#x72;&#x2e;&#x6a;&#x61;&#110;&#97;&#x6b;&#x40;&#x6b;&#108;&#x6f;&#107;&#97;&#110;&#116;&#x65;&#99;&#104;&#x2e;&#x63;&#x6f;&#x6d;</a></li>
</ul>
<h2 id="tested-wmtstms-clients">Tested WMTS/TMS clients</h2>
<ul>
<li>QuantumGIS Desktop 1.9+ - open with Layer-&gt;Add WMS layer
<a href="http://www.qgis.org/">http://www.qgis.org/</a></li>
<li>ESRI ArcGIS Desktop 10.1+ - native WMTS implementation supported
<a href="http://www.esri.com/software/arcgis/arcgis-for-desktop">http://www.esri.com/software/arcgis/arcgis-for-desktop</a></li>
<li>ESRI ArcGIS Online - loading via WMTS protocol
<a href="http://www.arcgis.com/">http://www.arcgis.com/</a></li>
<li>ArcBruTiles plugin for ArcGIS 9.3+ - via TMS endpoint
<a href="http://arcbrutile.codeplex.com/">http://arcbrutile.codeplex.com/</a></li>
<li>OpenLayers WMTS Layer - including parsing GetCapabilities
<a href="http://www.openlayers.org/">http://www.openlayers.org/</a></li>
<li>GAIA - native WMTS (issues with 3857 to be fixed)
<a href="http://www.thecarbonproject.com/gaia.php">http://www.thecarbonproject.com/gaia.php</a></li>
<li>MapBox.js - the loading of maps via TileJSON, interaction layer supported
<a href="https://www.mapbox.com/mapbox.js">https://www.mapbox.com/mapbox.js</a></li>
</ul>
<h2 id="bsd-license">BSD License</h2>
<p>Copyright (C) 2015 Klokan Technologies GmbH (<a href="http://www.klokantech.com/">http://www.klokantech.com/</a>)
All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met: </p>
<ol>
<li>Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer. </li>
<li>Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution. </li>
</ol>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</div></div></div></article><footer><div class="container"><div class="row"><div class="column">Total Projects: 1313</div><div class="column">Built At: 02 May 2020</div><div class="column">Version: 1.0.0</div></div></div></footer><script src="/site.js"></script></body></html>